<div
    class="group relative bg-white rounded-xl shadow-md overflow-hidden border border-gray-100 hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1">
    <!-- Bannière colorée en haut de la carte -->
    <div class="h-2 bg-gradient-to-r" [ngClass]="getBannerGradient(formation.category)"></div>

    <!-- Badge de catégorie -->
    <div class="absolute top-4 right-4 z-10">
        <span class="px-3 py-1.5 rounded-full text-xs font-bold shadow-sm"
            [ngClass]="getCategoryColor(formation.category)">
            {{ getCategoryLabel(formation.category) }}
        </span>
    </div>

    <div class="p-6">
        <!-- Titre avec effet de survol -->
        <h3 class="font-bold text-gray-800 text-xl mb-3 group-hover:text-blue-700 transition-colors duration-300">
            {{ formation.title }}
        </h3>

        <!-- Description avec effet de dégradé pour indiquer qu'il y a plus de contenu -->
        <div class="relative mb-5">
            <p class="text-gray-600 text-sm mb-1 line-clamp-2 min-h-[3rem]">
                {{ formation.description }}
            </p>
            <div class="absolute bottom-0 left-0 right-0 h-6 bg-gradient-to-t from-white to-transparent"></div>
        </div>

        <!-- Statistiques avec icônes améliorées -->
        <div class="grid grid-cols-2 gap-4 mb-5">
            <div class="flex items-center">
                <div class="w-10 h-10 rounded-lg bg-blue-50 flex items-center justify-center mr-3">
                    <i class="fa-solid fa-calendar text-blue-600"></i>
                </div>
                <div>
                    <p class="text-gray-900 font-bold text-lg leading-none !mb-0">{{ formation.sessions.length }}</p>
                    <p class="text-gray-500 text-xs !mb-0">Sessions</p>
                </div>
            </div>
            <div class="flex items-center">
                <div class="w-10 h-10 rounded-lg bg-indigo-50 flex items-center justify-center mr-3">
                    <i class="fa-solid fa-book text-indigo-600"></i>
                </div>
                <div>
                    <p class="text-gray-900 font-bold text-lg leading-none !mb-0">{{ formation.modules.length }}</p>
                    <p class="text-gray-500 text-xs !mb-0">Modules</p>
                </div>
            </div>
        </div>

        <!-- Indicateur de progression si disponible -->
        <div *ngIf="formation.userProgress && formation.userProgress.length > 0" class="mb-5">
            <div class="flex justify-between items-center mb-1">
                <span class="text-xs font-medium text-gray-700">Progression</span>
                <span class="text-xs font-medium text-blue-700">{{ getProgressPercentage() }}%</span>
            </div>
            <div class="w-full bg-gray-200 rounded-full h-2">
                <div class="bg-blue-600 h-2 rounded-full" [style.width.%]="getProgressPercentage()"></div>
            </div>
        </div>
    </div>

    <!-- Bouton d'action avec effet de survol -->
    <div class="px-6 py-4 bg-gray-50 border-t border-gray-100 flex justify-between items-center">
        <div class="text-xs text-gray-500">
            <i class="fas fa-clock mr-1"></i> Dernière mise à jour: {{ getLastUpdateDate() }}
        </div>
        <button [routerLink]="['./', formation.id]"
            class="px-4 py-2 bg-blue-600 text-white rounded-lg shadow-sm hover:bg-blue-700 transition-colors flex items-center">
            <i class="fa-solid fa-arrow-right mr-2"></i> Voir détails
        </button>
    </div>
</div>