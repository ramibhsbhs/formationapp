"use strict";(self.webpackChunkformationApp=self.webpackChunkformationApp||[]).push([[826],{7798:(y,x,l)=>{l.d(x,{y:()=>t});const t=["Technical Training","Soft Skills","Leadership","Compliance","Project Management","Customer Service","Sales Training","Safety Training"]},5061:(y,x,l)=>{l.d(x,{B:()=>T});var t=l(2340),c=l(1571),Z=l(529);let T=(()=>{class m{constructor(u){this.http=u,this.apiUrl=`${t.N.baseUrl}/formation`}createFormation(u){return this.http.post(this.apiUrl,u)}getFormations(){return this.http.get(this.apiUrl)}getFormation(u){return this.http.get(`${this.apiUrl}/${u}`)}updateFormation(u,a){return this.http.put(`${this.apiUrl}/${u}`,a)}deleteFormation(u){return this.http.delete(`${this.apiUrl}/${u}`)}updateFormationContent(u,a){return this.http.put(`${this.apiUrl}/${u}/content`,a)}updateFormationCategory(u,a){return this.http.put(`${this.apiUrl}/${u}/category`,a)}updateFormationGroups(u,a){return this.http.put(`${this.apiUrl}/${u}/groups`,a)}updateFormationModules(u,a){return this.http.put(`${this.apiUrl}/${u}/modules`,a)}}return m.\u0275fac=function(u){return new(u||m)(c.LFG(Z.eN))},m.\u0275prov=c.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})()},3310:(y,x,l)=>{l.d(x,{F:()=>f,L:()=>H});var t=l(1571),c=l(3371),Z=l(6920),T=l(4569),m=l(7153),v=l.n(m),u=l(6895),a=l(433);const h=["pdfContent"];function p(s,n){1&s&&(t.TgZ(0,"div",7),t._uU(1,"G\xe9n\xe9ration du PDF en cours..."),t.qZA())}const d=function(s,n){return{"border-primary":s,"border-red-500":n}};function _(s,n){if(1&s&&(t.TgZ(0,"div",4),t._UZ(1,"div",5),t.YNc(2,p,2,0,"div",6),t.qZA()),2&s){const e=t.oxw();t.xp6(1),t.Q6J("ngClass",t.WLB(2,d,e.loading,e.generatingPdf)),t.xp6(1),t.Q6J("ngIf",e.generatingPdf)}}function w(s,n){if(1&s&&(t.TgZ(0,"div",8)(1,"strong",9),t._uU(2,"Erreur!"),t.qZA(),t.TgZ(3,"span",10),t._uU(4),t.qZA()()),2&s){const e=t.oxw();t.xp6(4),t.Oqu(e.error)}}function R(s,n){if(1&s&&(t.TgZ(0,"div",92)(1,"div"),t._uU(2),t.qZA(),t.TgZ(3,"div",93),t._uU(4),t.qZA()()),2&s){const e=t.oxw().$implicit,i=t.oxw(3);t.xp6(2),t.Oqu(i.truncateText(e.module.title||"Module inconnu",10)),t.xp6(2),t.hij(" Position: ",e.module.position||"N/A"," ")}}const C=function(s,n){return{"bg-blue-50":s,"bg-purple-50":n}},U=function(s,n){return{"bg-blue-100 text-blue-800":s,"bg-purple-100 text-purple-800":n}},b=function(s,n){return{"text-green-600":s,"text-red-600":n}};function Q(s,n){if(1&s&&(t.TgZ(0,"tr",62)(1,"td",86)(2,"div",87),t._uU(3),t.qZA(),t.TgZ(4,"div",88),t._uU(5),t.qZA()(),t.TgZ(6,"td",86),t._uU(7),t.qZA(),t.TgZ(8,"td",86)(9,"div")(10,"span",89),t._uU(11),t.qZA(),t.YNc(12,R,5,2,"div",90),t.qZA()(),t.TgZ(13,"td",86),t._uU(14),t.qZA(),t.TgZ(15,"td",91),t._uU(16),t.ALo(17,"number"),t.qZA(),t.TgZ(18,"td",86)(19,"span",62),t._uU(20),t.qZA()()()),2&s){const e=n.$implicit,i=t.oxw(3);t.Q6J("ngClass",t.WLB(15,C,0===e.attemptType,1===e.attemptType)),t.xp6(3),t.Oqu(null==e.user?null:e.user.userName),t.xp6(2),t.Oqu(null==e.user?null:e.user.email),t.xp6(2),t.hij("",i.truncateText((null==e.session?null:e.session.title)||"",10)," "),t.xp6(3),t.Q6J("ngClass",t.WLB(18,U,0===e.attemptType,1===e.attemptType)),t.xp6(1),t.hij(" ",0===e.attemptType?"Module":"Formation"," "),t.xp6(1),t.Q6J("ngIf",0===e.attemptType&&e.module),t.xp6(2),t.Oqu(i.formatDate(e.attemptedAt)),t.xp6(1),t.Q6J("ngClass",t.WLB(21,b,e.score>=70,e.score<70)),t.xp6(1),t.hij("",t.xi3(17,12,e.score,"1.0-1"),"%"),t.xp6(3),t.Q6J("ngClass",t.WLB(24,b,e.hasPassed,!e.hasPassed)),t.xp6(1),t.Oqu(e.hasPassed?"R\xe9ussi":"\xc9chou\xe9")}}function E(s,n){1&s&&(t.TgZ(0,"tr")(1,"td",94),t._uU(2," Aucun r\xe9sultat pour cette formation. "),t.qZA()())}function D(s,n){if(1&s&&(t.TgZ(0,"div",92)(1,"div"),t._uU(2),t.qZA(),t.TgZ(3,"div",93),t._uU(4),t.qZA()()),2&s){const e=t.oxw().$implicit;t.xp6(2),t.Oqu(e.module.title||"Module inconnu"),t.xp6(2),t.hij(" Position: ",e.module.position||"N/A"," ")}}function O(s,n){if(1&s&&(t.TgZ(0,"tr",62)(1,"td",86)(2,"div",87),t._uU(3),t.qZA(),t.TgZ(4,"div",88),t._uU(5),t.qZA()(),t.TgZ(6,"td",86)(7,"div")(8,"span",89),t._uU(9),t.qZA(),t.YNc(10,D,5,2,"div",90),t.qZA()(),t.TgZ(11,"td",86),t._uU(12),t.qZA(),t.TgZ(13,"td",91),t._uU(14),t.ALo(15,"number"),t.qZA(),t.TgZ(16,"td",86)(17,"span",62),t._uU(18),t.qZA()()()),2&s){const e=n.$implicit,i=t.oxw(5);t.Q6J("ngClass",t.WLB(14,C,0===e.attemptType,1===e.attemptType)),t.xp6(3),t.Oqu(null==e.user?null:e.user.userName),t.xp6(2),t.Oqu(null==e.user?null:e.user.email),t.xp6(3),t.Q6J("ngClass",t.WLB(17,U,0===e.attemptType,1===e.attemptType)),t.xp6(1),t.hij(" ",0===e.attemptType?"Module":"Formation"," "),t.xp6(1),t.Q6J("ngIf",0===e.attemptType&&e.module),t.xp6(2),t.Oqu(i.formatDate(e.attemptedAt)),t.xp6(1),t.Q6J("ngClass",t.WLB(20,b,e.score>=70,e.score<70)),t.xp6(1),t.hij("",t.xi3(15,11,e.score,"1.0-1"),"%"),t.xp6(3),t.Q6J("ngClass",t.WLB(23,b,e.hasPassed,!e.hasPassed)),t.xp6(1),t.Oqu(e.hasPassed?"R\xe9ussi":"\xc9chou\xe9")}}function M(s,n){1&s&&(t.TgZ(0,"tr")(1,"td",97),t._uU(2," Aucun r\xe9sultat pour cette session. "),t.qZA()())}function I(s,n){if(1&s&&(t.TgZ(0,"div",69)(1,"h4",96),t._uU(2),t.qZA(),t.TgZ(3,"table",80)(4,"thead")(5,"tr",81)(6,"th",82),t._uU(7,"Utilisateur"),t.qZA(),t.TgZ(8,"th",84),t._uU(9,"Type"),t.qZA(),t.TgZ(10,"th",82),t._uU(11,"Date"),t.qZA(),t.TgZ(12,"th",83),t._uU(13,"Score"),t.qZA(),t.TgZ(14,"th",82),t._uU(15,"Statut"),t.qZA()()(),t.TgZ(16,"tbody"),t.YNc(17,O,19,26,"tr",61),t.YNc(18,M,3,0,"tr",18),t.qZA()()()),2&s){const e=n.$implicit;t.xp6(2),t.Oqu(e.sessionTitle),t.xp6(15),t.Q6J("ngForOf",e.attempts),t.xp6(1),t.Q6J("ngIf",0===e.attempts.length)}}function P(s,n){if(1&s&&(t.TgZ(0,"div")(1,"h3",67),t._uU(2,"R\xe9sultats par session"),t.qZA(),t.YNc(3,I,19,3,"div",95),t.qZA()),2&s){const e=t.oxw(3);t.xp6(3),t.Q6J("ngForOf",e.formationResults.sessionResults)}}const q=function(s){return{hidden:s}};function J(s,n){if(1&s&&(t.TgZ(0,"div",62,63)(2,"div",64)(3,"div",65)(4,"h1",66),t._uU(5,"R\xe9sultats de formation"),t.qZA(),t.TgZ(6,"h2",67),t._uU(7),t.qZA(),t.TgZ(8,"p",68),t._uU(9),t.qZA()(),t.TgZ(10,"div",69)(11,"h3",67),t._uU(12,"Statistiques globales"),t.qZA(),t.TgZ(13,"div",70)(14,"div",71)(15,"h4",72),t._uU(16,"Total des tentatives"),t.qZA(),t.TgZ(17,"p",73),t._uU(18),t.qZA()(),t.TgZ(19,"div",71)(20,"h4",72),t._uU(21,"Taux de r\xe9ussite global"),t.qZA(),t.TgZ(22,"p",74),t._uU(23),t.ALo(24,"number"),t.qZA()(),t.TgZ(25,"div",71)(26,"h4",72),t._uU(27,"Score moyen global"),t.qZA(),t.TgZ(28,"p",73),t._uU(29),t.ALo(30,"number"),t.qZA()()(),t.TgZ(31,"div",75)(32,"div",76)(33,"h4",77),t._uU(34,"Quiz de modules"),t.qZA(),t.TgZ(35,"div",45)(36,"div")(37,"p",46),t._uU(38,"Tentatives"),t.qZA(),t.TgZ(39,"p",47),t._uU(40),t.qZA()(),t.TgZ(41,"div")(42,"p",46),t._uU(43,"Taux de r\xe9ussite"),t.qZA(),t.TgZ(44,"p",47),t._uU(45),t.ALo(46,"number"),t.qZA()(),t.TgZ(47,"div")(48,"p",46),t._uU(49,"Score moyen"),t.qZA(),t.TgZ(50,"p",47),t._uU(51),t.ALo(52,"number"),t.qZA()()()(),t.TgZ(53,"div",78)(54,"h4",79),t._uU(55,"Quiz finaux"),t.qZA(),t.TgZ(56,"div",45)(57,"div")(58,"p",46),t._uU(59,"Tentatives"),t.qZA(),t.TgZ(60,"p",51),t._uU(61),t.qZA()(),t.TgZ(62,"div")(63,"p",46),t._uU(64,"Taux de r\xe9ussite"),t.qZA(),t.TgZ(65,"p",51),t._uU(66),t.ALo(67,"number"),t.qZA()(),t.TgZ(68,"div")(69,"p",46),t._uU(70,"Score moyen"),t.qZA(),t.TgZ(71,"p",51),t._uU(72),t.ALo(73,"number"),t.qZA()()()()()(),t.TgZ(74,"div",69)(75,"h3",67),t._uU(76,"R\xe9sultats globaux"),t.qZA(),t.TgZ(77,"table",80)(78,"thead")(79,"tr",81)(80,"th",82),t._uU(81,"Utilisateur"),t.qZA(),t.TgZ(82,"th",83),t._uU(83,"Session"),t.qZA(),t.TgZ(84,"th",84),t._uU(85,"Type"),t.qZA(),t.TgZ(86,"th",83),t._uU(87,"Date"),t.qZA(),t.TgZ(88,"th",85),t._uU(89,"Score"),t.qZA(),t.TgZ(90,"th",83),t._uU(91,"Statut"),t.qZA()()(),t.TgZ(92,"tbody"),t.YNc(93,Q,21,27,"tr",61),t.YNc(94,E,3,0,"tr",18),t.qZA()()(),t.YNc(95,P,4,1,"div",18),t.qZA()()),2&s){const e=t.oxw(2);t.Q6J("ngClass",t.VKq(33,q,!e.generatingPdf)),t.xp6(7),t.Oqu(e.formationResults.formationTitle),t.xp6(2),t.hij("Date d'impression: ",e.formatDate(e.today),""),t.xp6(9),t.Oqu(e.getAttemptsCount()),t.xp6(5),t.hij("",t.xi3(24,15,e.getSuccessRate(),"1.0-0"),"%"),t.xp6(6),t.hij("",t.xi3(30,18,e.getAverageScore(),"1.0-1"),"%"),t.xp6(11),t.Oqu(e.getAttemptsCount(0)),t.xp6(5),t.hij("",t.xi3(46,21,e.getSuccessRate(0),"1.0-0"),"%"),t.xp6(6),t.hij("",t.xi3(52,24,e.getAverageScore(0),"1.0-1"),"% "),t.xp6(10),t.Oqu(e.getAttemptsCount(1)),t.xp6(5),t.hij("",t.xi3(67,27,e.getSuccessRate(1),"1.0-0"),"% "),t.xp6(6),t.hij("",t.xi3(73,30,e.getAverageScore(1),"1.0-1"),"% "),t.xp6(21),t.Q6J("ngForOf",e.formationResults.attempts),t.xp6(1),t.Q6J("ngIf",0===e.formationResults.attempts.length),t.xp6(1),t.Q6J("ngIf",e.formationResults.sessionResults&&e.formationResults.sessionResults.length>0)}}function S(s,n){1&s&&(t.TgZ(0,"span"),t._uU(1,"G\xe9n\xe9rer PDF"),t.qZA())}function F(s,n){1&s&&(t.TgZ(0,"span"),t._uU(1,"G\xe9n\xe9ration en cours..."),t.qZA())}function L(s,n){if(1&s&&(t.TgZ(0,"div",114),t._uU(1),t.qZA()),2&s){const e=t.oxw().$implicit,i=t.oxw(2);t.xp6(1),t.hij(" ",i.getSessionDateRange(e)," ")}}function z(s,n){if(1&s&&(t.TgZ(0,"div",115)(1,"span",116),t._uU(2),t.qZA(),t.TgZ(3,"div",117)(4,"span",93),t._uU(5),t.qZA()()()),2&s){const e=t.oxw().$implicit,i=t.oxw(2);t.xp6(2),t.Oqu(i.truncateText(e.module.title||"",10)),t.xp6(3),t.hij("Position: ",e.module.position,"")}}function j(s,n){if(1&s&&(t.TgZ(0,"div",118),t._uU(1),t.qZA()),2&s){const e=t.oxw().$implicit,i=t.oxw(2);t.xp6(1),t.hij(" ",i.getAttemptHistoryText(e)," ")}}const k=function(s,n){return{"bg-blue-50 text-blue-700":s,"bg-purple-50 text-purple-700":n}},N=function(s,n,e){return{"bg-green-500":s,"bg-yellow-500":n,"bg-red-500":e}},B=function(s,n){return{"bg-green-100 text-green-800":s,"bg-red-100 text-red-800":n}};function W(s,n){if(1&s&&(t.TgZ(0,"tr",62)(1,"td",98)(2,"div",29)(3,"div")(4,"div",99),t._uU(5),t.qZA(),t.TgZ(6,"div",100),t._uU(7),t.qZA()()()(),t.TgZ(8,"td",98)(9,"div",101),t._uU(10),t.qZA(),t.YNc(11,L,2,1,"div",102),t.qZA(),t.TgZ(12,"td",98)(13,"div",103)(14,"span",104),t._uU(15),t.qZA(),t.YNc(16,z,6,2,"div",105),t.TgZ(17,"div",106)(18,"span",107),t._uU(19),t.qZA()()()(),t.TgZ(20,"td",98)(21,"div",88),t._uU(22),t.qZA()(),t.TgZ(23,"td",98)(24,"div",108)(25,"div",109),t._uU(26),t.ALo(27,"number"),t.qZA(),t.TgZ(28,"div",110),t._UZ(29,"div",111),t.qZA()()(),t.TgZ(30,"td",98)(31,"div",108)(32,"span",112),t._uU(33),t.qZA(),t.YNc(34,j,2,1,"div",113),t.qZA()()()),2&s){const e=n.$implicit,i=t.oxw(2);t.Q6J("ngClass",t.WLB(22,C,0===e.attemptType,1===e.attemptType)),t.xp6(5),t.hij("",null==e.user?null:e.user.userName," "),t.xp6(2),t.Oqu(null==e.user?null:e.user.email),t.xp6(3),t.hij("",i.truncateText((null==e.session?null:e.session.title)||"",10)," "),t.xp6(1),t.Q6J("ngIf",(null==e.session?null:e.session.startDate)&&(null==e.session?null:e.session.endDate)),t.xp6(3),t.Q6J("ngClass",t.WLB(25,U,0===e.attemptType,1===e.attemptType)),t.xp6(1),t.hij(" ",0===e.attemptType?"Module":"Formation"," "),t.xp6(1),t.Q6J("ngIf",0===e.attemptType&&e.module),t.xp6(2),t.Q6J("ngClass",t.WLB(28,k,0===e.attemptType,1===e.attemptType)),t.xp6(1),t.hij(" Tentative ",i.getAttemptNumber(e)," "),t.xp6(3),t.Oqu(i.formatDate(e.attemptedAt)),t.xp6(3),t.Q6J("ngClass",t.WLB(31,b,e.score>=70,e.score<70)),t.xp6(1),t.hij(" ",t.xi3(27,19,e.score,"1.0-1"),"% "),t.xp6(3),t.Udp("width",e.score,"%"),t.Q6J("ngClass",t.kEZ(34,N,e.score>=70,e.score>=50&&e.score<70,e.score<50)),t.xp6(3),t.Q6J("ngClass",t.WLB(38,B,e.hasPassed,!e.hasPassed)),t.xp6(1),t.hij(" ",e.hasPassed?"R\xe9ussi":"\xc9chou\xe9"," "),t.xp6(1),t.Q6J("ngIf",i.hasMultipleAttempts(e))}}function $(s,n){1&s&&(t.TgZ(0,"tr")(1,"td",119),t._uU(2," Aucun r\xe9sultat trouv\xe9. "),t.qZA()())}const A=function(s,n){return{"fa-sort-up":s,"fa-sort-down":n}};function K(s,n){if(1&s){const e=t.EpF();t.TgZ(0,"div",11),t.YNc(1,J,96,35,"div",12),t.TgZ(2,"div",13)(3,"h2",14),t._uU(4),t.qZA(),t.TgZ(5,"div",15)(6,"button",16),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.generatePDF())}),t._UZ(7,"i",17),t.YNc(8,S,2,0,"span",18),t.YNc(9,F,2,0,"span",18),t.qZA()()(),t.TgZ(10,"div",19)(11,"h1",20),t._uU(12,"R\xe9sultats de formation"),t.qZA(),t.TgZ(13,"h2",21),t._uU(14),t.qZA(),t.TgZ(15,"p",22),t._uU(16),t.qZA()(),t.TgZ(17,"div",23)(18,"div",24)(19,"div",25)(20,"label",26),t._uU(21,"Rechercher"),t.qZA(),t.TgZ(22,"input",27),t.NdJ("ngModelChange",function(r){t.CHM(e);const o=t.oxw();return t.KtG(o.searchTerm=r)}),t.qZA()(),t.TgZ(23,"div",28)(24,"div",29)(25,"input",30),t.NdJ("ngModelChange",function(r){t.CHM(e);const o=t.oxw();return t.KtG(o.showOnlyPassed=r)}),t.qZA(),t.TgZ(26,"label",31),t._uU(27," Afficher uniquement les r\xe9ussites "),t.qZA()(),t.TgZ(28,"div",29)(29,"input",32),t.NdJ("ngModelChange",function(r){t.CHM(e);const o=t.oxw();return t.KtG(o.showOnlyFinalQuiz=r)}),t.qZA(),t.TgZ(30,"label",33),t._uU(31," Afficher uniquement les quiz finaux "),t.qZA()()()()(),t.TgZ(32,"div",34)(33,"div",35)(34,"div",36)(35,"h3",37),t._uU(36,"Total des tentatives"),t.qZA(),t.TgZ(37,"p",38),t._uU(38),t.qZA()(),t.TgZ(39,"div",36)(40,"h3",37),t._uU(41,"Taux de r\xe9ussite global"),t.qZA(),t.TgZ(42,"p",39),t._uU(43),t.ALo(44,"number"),t.qZA()(),t.TgZ(45,"div",36)(46,"h3",37),t._uU(47,"Score moyen global"),t.qZA(),t.TgZ(48,"p",40),t._uU(49),t.ALo(50,"number"),t.qZA()()(),t.TgZ(51,"div",41)(52,"div",42)(53,"h3",43),t._UZ(54,"span",44),t._uU(55," Quiz de modules "),t.qZA(),t.TgZ(56,"div",45)(57,"div")(58,"p",46),t._uU(59,"Tentatives"),t.qZA(),t.TgZ(60,"p",47),t._uU(61),t.qZA()(),t.TgZ(62,"div")(63,"p",46),t._uU(64,"Taux de r\xe9ussite"),t.qZA(),t.TgZ(65,"p",47),t._uU(66),t.ALo(67,"number"),t.qZA()(),t.TgZ(68,"div")(69,"p",46),t._uU(70,"Score moyen"),t.qZA(),t.TgZ(71,"p",47),t._uU(72),t.ALo(73,"number"),t.qZA()()()(),t.TgZ(74,"div",48)(75,"h3",49),t._UZ(76,"span",50),t._uU(77," Quiz finaux "),t.qZA(),t.TgZ(78,"div",45)(79,"div")(80,"p",46),t._uU(81,"Tentatives"),t.qZA(),t.TgZ(82,"p",51),t._uU(83),t.qZA()(),t.TgZ(84,"div")(85,"p",46),t._uU(86,"Taux de r\xe9ussite"),t.qZA(),t.TgZ(87,"p",51),t._uU(88),t.ALo(89,"number"),t.qZA()(),t.TgZ(90,"div")(91,"p",46),t._uU(92,"Score moyen"),t.qZA(),t.TgZ(93,"p",51),t._uU(94),t.ALo(95,"number"),t.qZA()()()()()(),t.TgZ(96,"div",52)(97,"table",53)(98,"thead",54)(99,"tr")(100,"th",55),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.sortBy("user"))}),t._uU(101," Utilisateur "),t._UZ(102,"i",56),t.qZA(),t.TgZ(103,"th",57),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.sortBy("session"))}),t._uU(104," Session "),t._UZ(105,"i",56),t.qZA(),t.TgZ(106,"th",58),t._uU(107," Type "),t.qZA(),t.TgZ(108,"th",57),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.sortBy("date"))}),t._uU(109," Date "),t._UZ(110,"i",56),t.qZA(),t.TgZ(111,"th",57),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.sortBy("score"))}),t._uU(112," Score "),t._UZ(113,"i",56),t.qZA(),t.TgZ(114,"th",59),t._uU(115," Statut "),t.qZA()()(),t.TgZ(116,"tbody",60),t.YNc(117,W,35,41,"tr",61),t.YNc(118,$,3,0,"tr",18),t.qZA()()()()}if(2&s){const e=t.oxw();t.Q6J("ngClass",t.VKq(44,q,e.generatingPdf)),t.xp6(1),t.Q6J("ngIf",e.generatingPdf),t.xp6(3),t.hij("R\xe9sultats de la formation: ",e.formationResults.formationTitle,""),t.xp6(2),t.Q6J("disabled",e.generatingPdf),t.xp6(2),t.Q6J("ngIf",!e.generatingPdf),t.xp6(1),t.Q6J("ngIf",e.generatingPdf),t.xp6(5),t.Oqu(e.formationResults.formationTitle),t.xp6(2),t.hij("Date d'impression: ",e.formatDate(e.today),""),t.xp6(6),t.Q6J("ngModel",e.searchTerm),t.xp6(3),t.Q6J("ngModel",e.showOnlyPassed),t.xp6(4),t.Q6J("ngModel",e.showOnlyFinalQuiz),t.xp6(9),t.Oqu(e.getAttemptsCount()),t.xp6(5),t.hij(" ",t.xi3(44,26,e.getSuccessRate(),"1.0-0"),"% "),t.xp6(6),t.hij(" ",t.xi3(50,29,e.getAverageScore(),"1.0-1"),"% "),t.xp6(12),t.Oqu(e.getAttemptsCount(0)),t.xp6(5),t.hij("",t.xi3(67,32,e.getSuccessRate(0),"1.0-0"),"%"),t.xp6(6),t.hij("",t.xi3(73,35,e.getAverageScore(0),"1.0-1"),"%"),t.xp6(11),t.Oqu(e.getAttemptsCount(1)),t.xp6(5),t.hij("",t.xi3(89,38,e.getSuccessRate(1),"1.0-0"),"%"),t.xp6(6),t.hij("",t.xi3(95,41,e.getAverageScore(1),"1.0-1"),"%"),t.xp6(8),t.Q6J("ngClass",t.WLB(46,A,"user"===e.sortField&&"asc"===e.sortDirection,"user"===e.sortField&&"desc"===e.sortDirection)),t.xp6(3),t.Q6J("ngClass",t.WLB(49,A,"session"===e.sortField&&"asc"===e.sortDirection,"session"===e.sortField&&"desc"===e.sortDirection)),t.xp6(5),t.Q6J("ngClass",t.WLB(52,A,"date"===e.sortField&&"asc"===e.sortDirection,"date"===e.sortField&&"desc"===e.sortDirection)),t.xp6(3),t.Q6J("ngClass",t.WLB(55,A,"score"===e.sortField&&"asc"===e.sortDirection,"score"===e.sortField&&"desc"===e.sortDirection)),t.xp6(4),t.Q6J("ngForOf",e.filteredAttempts),t.xp6(1),t.Q6J("ngIf",0===e.filteredAttempts.length)}}function Y(s,n){1&s&&(t.TgZ(0,"div",120)(1,"p",121),t._uU(2,"Aucun r\xe9sultat disponible pour cette formation."),t.qZA()())}var f=(()=>{return(s=f||(f={})).Admin="admin",s.Manager="manager",s.Supervisor="supervisor",f;var s})();let H=(()=>{class s{constructor(){this.userType=f.Admin,this.loading=!1,this.error=null,this.sortField="score",this.sortDirection="desc",this.today=new Date,this.generatingPdf=!1,this.showOnlyPassed=!1,this.showOnlyFinalQuiz=!1,this.searchTerm="",this.quizService=(0,t.f3M)(Z.v),this.authService=(0,t.f3M)(T.e),this.subscriptions=[]}ngOnInit(){this.formationId&&this.loadResults()}loadResults(){let e;this.loading=!0,e=this.userType===f.Supervisor?this.quizService.getQuizAttemptsByFormationForSupervisor(this.formationId):this.quizService.getQuizAttemptsByFormation(this.formationId);const i=e.subscribe({next:r=>{this.formationResults=r,this.loading=!1},error:r=>{console.error("Erreur lors du chargement des r\xe9sultats:",r),this.error="Impossible de charger les r\xe9sultats. Veuillez r\xe9essayer plus tard.",this.loading=!1}});this.subscriptions.push(i)}sortBy(e){this.sortField===e?this.sortDirection="asc"===this.sortDirection?"desc":"asc":(this.sortField=e,this.sortDirection="desc")}get filteredAttempts(){if(!this.formationResults?.attempts)return[];let e=[...this.formationResults.attempts];if(this.showOnlyFinalQuiz&&(e=e.filter(i=>i.attemptType===c.J.Formation)),this.showOnlyPassed&&(e=e.filter(i=>i.hasPassed)),this.searchTerm){const i=this.searchTerm.toLowerCase();e=e.filter(r=>r.user?.userName?.toLowerCase().includes(i)||r.user?.email?.toLowerCase().includes(i)||r.session?.title?.toLowerCase().includes(i))}return e.sort((i,r)=>{let o=0;switch(this.sortField){case"score":default:o=i.score-r.score;break;case"date":o=new Date(i.attemptedAt).getTime()-new Date(r.attemptedAt).getTime();break;case"user":o=(i.user?.userName||"").localeCompare(r.user?.userName||"");break;case"session":o=(i.session?.title||"").localeCompare(r.session?.title||"")}return"asc"===this.sortDirection?o:-o}),e}getSuccessRate(e){if(!this.formationResults?.attempts||0===this.formationResults.attempts.length)return 0;let i=this.formationResults.attempts;return void 0!==e&&(i=i.filter(o=>o.attemptType===e)),0===i.length?0:i.filter(o=>o.hasPassed).length/i.length*100}getAverageScore(e){if(!this.formationResults?.attempts||0===this.formationResults.attempts.length)return 0;let i=this.formationResults.attempts;return void 0!==e&&(i=i.filter(o=>o.attemptType===e)),0===i.length?0:i.reduce((o,g)=>o+g.score,0)/i.length}getAttemptsCount(e){return this.formationResults?.attempts?void 0!==e?this.formationResults.attempts.filter(i=>i.attemptType===e).length:this.formationResults.attempts.length:0}isAnswerSelected(e,i){return!0}generatePDF(){this.generatingPdf=!0,setTimeout(()=>{const e=this.pdfContent.nativeElement,r={margin:10,filename:`resultats_${this.formationResults.formationTitle.replace(/\s+/g,"_")}.pdf`,image:{type:"jpeg",quality:1},html2canvas:{scale:2,useCORS:!0,logging:!0,letterRendering:!0},jsPDF:{unit:"mm",format:"a4",orientation:"portrait",compress:!0}};try{v()().from(e).set(r).save(),setTimeout(()=>{this.generatingPdf=!1},3e3)}catch(o){console.error("Erreur lors de la g\xe9n\xe9ration du PDF:",o),this.generatingPdf=!1}},100)}printResults(){window.print()}formatDate(e){return e?new Date(e).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):""}formatDateShort(e){return e?new Date(e).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"}):""}getAttemptNumber(e){if(!this.formationResults?.attempts)return 1;const i=this.formationResults.attempts.filter(o=>o.userId===e.userId&&o.sessionId===e.sessionId&&o.attemptType===e.attemptType&&(e.attemptType!==c.J.Module||o.moduleId===e.moduleId));i.sort((o,g)=>new Date(o.attemptedAt).getTime()-new Date(g.attemptedAt).getTime());const r=i.findIndex(o=>o.id===e.id);return-1!==r?r+1:1}hasMultipleAttempts(e){return!!this.formationResults?.attempts&&this.formationResults.attempts.filter(r=>r.userId===e.userId&&r.sessionId===e.sessionId&&r.attemptType===e.attemptType&&(e.attemptType!==c.J.Module||r.moduleId===e.moduleId)).length>1}getAttemptHistoryText(e){if(!this.formationResults?.attempts)return"";const i=this.formationResults.attempts.filter(g=>g.userId===e.userId&&g.sessionId===e.sessionId&&g.attemptType===e.attemptType&&(e.attemptType!==c.J.Module||g.moduleId===e.moduleId));i.sort((g,G)=>new Date(g.attemptedAt).getTime()-new Date(G.attemptedAt).getTime());const r=i.length;return`${i.filter(g=>g.hasPassed).length}/${r} tentatives r\xe9ussies`}getSessionDateRange(e){return e.session?.startDate&&e.session?.endDate?`${this.formatDateShort(e.session.startDate)} - ${this.formatDateShort(e.session.endDate)}`:""}truncateText(e,i=15){return e?e.length<=i?e:e.substring(0,i)+"...":""}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}}return s.\u0275fac=function(e){return new(e||s)},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-quiz-results"]],viewQuery:function(e,i){if(1&e&&t.Gf(h,5),2&e){let r;t.iGM(r=t.CRH())&&(i.pdfContent=r.first)}},inputs:{formationId:"formationId",userType:"userType"},decls:4,vars:4,consts:[["class","flex justify-center items-center py-10",4,"ngIf"],["class","bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4","role","alert",4,"ngIf"],["class","print:bg-white",3,"ngClass",4,"ngIf"],["class","bg-gray-50 p-8 rounded-lg text-center",4,"ngIf"],[1,"flex","justify-center","items-center","py-10"],[1,"animate-spin","rounded-full","h-12","w-12","border-t-2","border-b-2",3,"ngClass"],["class","ml-4 text-lg font-medium",4,"ngIf"],[1,"ml-4","text-lg","font-medium"],["role","alert",1,"bg-red-100","border","border-red-400","text-red-700","px-4","py-3","rounded","relative","mb-4"],[1,"font-bold"],[1,"block","sm:inline"],[1,"print:bg-white",3,"ngClass"],[3,"ngClass",4,"ngIf"],[1,"flex","justify-between","items-center","mb-6","print:hidden"],[1,"text-2xl","font-bold"],[1,"flex","space-x-2"],[1,"bg-red-500","hover:bg-red-600","text-white","px-4","py-2","rounded-lg","flex","items-center","mr-2",3,"disabled","click"],[1,"fas","fa-file-pdf","mr-2"],[4,"ngIf"],[1,"hidden","print:block","mb-6"],[1,"text-3xl","font-bold","text-center","mb-2"],[1,"text-xl","font-semibold","text-center","mb-4"],[1,"text-center","text-gray-600"],[1,"bg-gray-50","p-4","rounded-lg","mb-6","print:hidden"],[1,"flex","flex-wrap","gap-4","items-center"],[1,"flex-1"],["for","search",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["type","text","id","search","placeholder","Rechercher par nom, email ou session...",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-primary","focus:border-primary",3,"ngModel","ngModelChange"],[1,"flex","flex-col","gap-2"],[1,"flex","items-center"],["type","checkbox","id","showPassed",1,"h-4","w-4","text-primary","focus:ring-primary","border-gray-300","rounded",3,"ngModel","ngModelChange"],["for","showPassed",1,"ml-2","block","text-sm","text-gray-900"],["type","checkbox","id","showFinalQuiz",1,"h-4","w-4","text-primary","focus:ring-primary","border-gray-300","rounded",3,"ngModel","ngModelChange"],["for","showFinalQuiz",1,"ml-2","block","text-sm","text-gray-900"],[1,"mb-6"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4","mb-4"],[1,"bg-white","p-4","rounded-lg","shadow","border","border-gray-200"],[1,"text-lg","font-medium","text-gray-700","mb-2"],[1,"text-3xl","font-bold","text-primary"],[1,"text-3xl","font-bold","text-green-600"],[1,"text-3xl","font-bold","text-blue-600"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],[1,"bg-blue-50","p-4","rounded-lg","shadow","border","border-blue-200"],[1,"text-lg","font-medium","text-blue-800","mb-2","flex","items-center"],[1,"inline-block","w-3","h-3","rounded-full","bg-blue-500","mr-2"],[1,"grid","grid-cols-3","gap-2"],[1,"text-sm","text-gray-600"],[1,"text-xl","font-bold","text-blue-700"],[1,"bg-purple-50","p-4","rounded-lg","shadow","border","border-purple-200"],[1,"text-lg","font-medium","text-purple-800","mb-2","flex","items-center"],[1,"inline-block","w-3","h-3","rounded-full","bg-purple-500","mr-2"],[1,"text-xl","font-bold","text-purple-700"],[1,"overflow-x-auto","bg-white","rounded-lg","shadow"],[1,"w-full","divide-y","divide-gray-200",2,"table-layout","fixed","max-width","100%"],[1,"bg-gray-50"],["scope","col",1,"px-6","py-3","text-left","text-xs","font-medium","text-gray-500","uppercase","tracking-wider","cursor-pointer",2,"width","20%",3,"click"],[1,"fas","fa-sort","ml-1",3,"ngClass"],["scope","col",1,"px-6","py-3","text-left","text-xs","font-medium","text-gray-500","uppercase","tracking-wider","cursor-pointer",2,"width","15%",3,"click"],["scope","col",1,"px-6","py-3","text-left","text-xs","font-medium","text-gray-500","uppercase","tracking-wider",2,"width","20%"],["scope","col",1,"px-6","py-3","text-left","text-xs","font-medium","text-gray-500","uppercase","tracking-wider",2,"width","15%"],[1,"bg-white","divide-y","divide-gray-200"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],["pdfContent",""],[1,"bg-white","p-8"],[1,"text-center","mb-8"],[1,"text-3xl","font-bold","mb-2"],[1,"text-xl","font-semibold","mb-4"],[1,"text-gray-600"],[1,"mb-8"],[1,"grid","grid-cols-3","gap-4","mb-6"],[1,"border","border-gray-300","p-4","rounded-lg"],[1,"font-medium","text-gray-700","mb-2"],[1,"text-2xl","font-bold","text-blue-600"],[1,"text-2xl","font-bold","text-green-600"],[1,"grid","grid-cols-2","gap-4"],[1,"border","border-blue-300","p-4","rounded-lg","bg-blue-50"],[1,"font-medium","text-blue-800","mb-2"],[1,"border","border-purple-300","p-4","rounded-lg","bg-purple-50"],[1,"font-medium","text-purple-800","mb-2"],[1,"w-full","border-collapse","border","border-gray-300",2,"table-layout","fixed","max-width","100%"],[1,"bg-gray-100"],[1,"border","border-gray-300","p-2","text-left",2,"width","20%"],[1,"border","border-gray-300","p-2","text-left",2,"width","15%"],[1,"border","border-gray-300","p-2","text-left",2,"width","25%"],[1,"border","border-gray-300","p-2","text-left",2,"width","10%"],[1,"border","border-gray-300","p-2"],[1,"font-medium"],[1,"text-sm","text-gray-500"],[1,"px-2","py-1","rounded-full","text-xs","font-medium",3,"ngClass"],["class","mt-1",4,"ngIf"],[1,"border","border-gray-300","p-2",3,"ngClass"],[1,"mt-1"],[1,"text-xs","text-gray-500"],["colspan","6",1,"border","border-gray-300","p-2","text-center","text-gray-500"],["class","mb-8",4,"ngFor","ngForOf"],[1,"text-lg","font-medium","mb-3"],["colspan","5",1,"border","border-gray-300","p-2","text-center","text-gray-500"],[1,"px-6","py-4"],[1,"text-sm","font-medium","text-gray-900","truncate"],[1,"text-sm","text-gray-500","truncate"],[1,"text-sm","text-gray-900","truncate"],["class","text-xs text-gray-500 truncate",4,"ngIf"],[1,"flex","flex-col"],[1,"px-2","py-1","rounded-full","text-xs","font-medium","mb-1",3,"ngClass"],["class","text-xs text-gray-700 mt-1",4,"ngIf"],[1,"mt-1","flex","items-center"],[1,"text-xs","px-2","py-1","rounded-full",3,"ngClass"],[1,"flex","flex-col","items-center"],[1,"text-lg","font-medium",3,"ngClass"],[1,"w-full","bg-gray-200","rounded-full","h-2","mt-1"],[1,"h-2","rounded-full",3,"ngClass"],[1,"px-3","py-1","inline-flex","text-sm","leading-5","font-semibold","rounded-full",3,"ngClass"],["class","mt-2 text-xs text-gray-500",4,"ngIf"],[1,"text-xs","text-gray-500","truncate"],[1,"text-xs","text-gray-700","mt-1"],[1,"font-medium","truncate"],[1,"flex","items-center","mt-1"],[1,"mt-2","text-xs","text-gray-500"],["colspan","6",1,"px-6","py-4","text-center","text-gray-500"],[1,"bg-gray-50","p-8","rounded-lg","text-center"],[1,"text-gray-500"]],template:function(e,i){1&e&&(t.YNc(0,_,3,5,"div",0),t.YNc(1,w,5,1,"div",1),t.YNc(2,K,119,58,"div",2),t.YNc(3,Y,3,0,"div",3)),2&e&&(t.Q6J("ngIf",i.loading||i.generatingPdf),t.xp6(1),t.Q6J("ngIf",i.error),t.xp6(1),t.Q6J("ngIf",!i.loading&&!i.error&&i.formationResults),t.xp6(1),t.Q6J("ngIf",!(i.loading||i.error||i.formationResults&&0!==i.formationResults.attempts.length)))},dependencies:[u.mk,u.sg,u.O5,a.Fj,a.Wl,a.JJ,a.On,u.JJ]}),s})()},7334:(y,x,l)=>{l.d(x,{Q:()=>u});var t=l(1571),c=l(6895),Z=l(7917);function T(a,h){if(1&a){const p=t.EpF();t.TgZ(0,"button",21),t.NdJ("click",function(){t.CHM(p);const _=t.oxw();return t.KtG(_.edit.emit(_.training.id))}),t.O4$(),t.TgZ(1,"svg",22),t._UZ(2,"path",23)(3,"path",24),t.qZA()()}}function m(a,h){if(1&a){const p=t.EpF();t.TgZ(0,"button",25),t.NdJ("click",function(){t.CHM(p);const _=t.oxw();return t.KtG(_.delete.emit(_.training.id))}),t.O4$(),t.TgZ(1,"svg",22),t._UZ(2,"path",26),t.qZA()()}}const v=function(a){return[".",a]};let u=(()=>{class a{constructor(){this.canEdit=!1,this.canDelete=!1,this.edit=new t.vpe,this.delete=new t.vpe,this.addSession=new t.vpe,this.usersCount=0}ngOnInit(){this.training.groups.forEach(p=>{this.usersCount+=p.users?.length||0})}getCategoryColor(p){switch(p){case"Technical Training":return"bg-blue-100 text-blue-800";case"Soft Skills":return"bg-red-100 text-red-800";case"Leadership":return"bg-green-100 text-green-800";case"Project Management":return"bg-purple-100 text-purple-800";case"Compliance":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}}getCategoryLabel(p){switch(p){case"Technical Training":return"Technique";case"Soft Skills":return"S\xe9curit\xe9";case"Leadership":return"Qualit\xe9";case"Project Management":return"Project Management";case"Compliance":return"Compliance";default:return p}}}return a.\u0275fac=function(p){return new(p||a)},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-training-card"]],inputs:{training:"training",canEdit:"canEdit",canDelete:"canDelete"},outputs:{edit:"edit",delete:"delete",addSession:"addSession"},decls:32,vars:13,consts:[[1,"bg-white","rounded-lg","shadow-md","overflow-hidden","border","border-gray-200","hover:shadow-lg","transition-shadow"],[1,"p-4"],[1,"flex","justify-between","items-start","mb-3"],[1,"font-semibold","text-gray-800","text-lg"],[1,"px-2","py-1","rounded-full","text-xs","font-medium",3,"ngClass"],[1,"text-gray-600","text-sm","mb-4","line-clamp-2","line-coverage","min-h-[3.5rem]"],[1,"grid","grid-cols-2","gap-2","mb-3"],[1,"flex","items-center","text-gray-600","text-sm"],[1,"fa-solid","fa-clock","w-4","h-4","mr-2","text-gray-400"],[1,"fa-solid","fa-calendar","text-gray-300","mr-2"],[1,"fa-solid","fa-users","mr-2","text-gray-400"],[1,"fa-solid","fa-book","text-gray-400","w-4","h-4","mr-2"],[1,"px-4","py-3","bg-gray-50","border-t","border-gray-200","flex","justify-between"],[1,"text-primary","text-sm","font-medium","flex","items-center","hover:text-primary-dark",3,"click"],["fill","currentColor","viewBox","0 0 20 20",1,"w-4","h-4","mr-1"],["fill-rule","evenodd","d","M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z","clip-rule","evenodd"],[1,"flex","space-x-2"],["class","text-gray-600 hover:text-gray-900",3,"click",4,"ngIf"],["class","text-gray-600 hover:text-red-600",3,"click",4,"ngIf"],[1,"text-gray-400","hover:text-gray-900",3,"routerLink"],[1,"fa-solid","fa-eye","text-gray-500","hover:text-blue-600"],[1,"text-gray-600","hover:text-gray-900",3,"click"],["fill","currentColor","viewBox","0 0 20 20",1,"w-4","h-4"],["d","M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z"],["fill-rule","evenodd","d","M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z","clip-rule","evenodd"],[1,"text-gray-600","hover:text-red-600",3,"click"],["fill-rule","evenodd","d","M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z","clip-rule","evenodd"]],template:function(p,d){1&p&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),t._uU(4),t.qZA(),t.TgZ(5,"span",4),t._uU(6),t.qZA()(),t.TgZ(7,"p",5),t._uU(8),t.qZA(),t.TgZ(9,"div",6)(10,"div",7),t._UZ(11,"i",8),t._uU(12),t.qZA(),t.TgZ(13,"div",7),t._UZ(14,"i",9),t._uU(15),t.qZA(),t.TgZ(16,"div",7),t._UZ(17,"i",10),t._uU(18),t.qZA(),t.TgZ(19,"div",7),t._UZ(20,"i",11),t._uU(21),t.qZA()()(),t.TgZ(22,"div",12)(23,"button",13),t.NdJ("click",function(){return d.addSession.emit(d.training.id)}),t.O4$(),t.TgZ(24,"svg",14),t._UZ(25,"path",15),t.qZA(),t._uU(26," Session "),t.qZA(),t.kcU(),t.TgZ(27,"div",16),t.YNc(28,T,4,0,"button",17),t.YNc(29,m,3,0,"button",18),t.TgZ(30,"button",19),t._UZ(31,"i",20),t.qZA()()()()),2&p&&(t.xp6(4),t.Oqu(d.training.title),t.xp6(1),t.Q6J("ngClass",d.getCategoryColor(d.training.category)),t.xp6(1),t.hij(" ",d.getCategoryLabel(d.training.category)," "),t.xp6(2),t.hij(" ",d.training.description," "),t.xp6(4),t.hij(" ",d.training.groups.length," groupes "),t.xp6(3),t.hij(" ",d.training.sessions.length," sessions "),t.xp6(3),t.hij(" ",d.usersCount," participants "),t.xp6(3),t.hij(" ",d.training.modules.length," modules "),t.xp6(7),t.Q6J("ngIf",d.canEdit),t.xp6(1),t.Q6J("ngIf",d.canDelete),t.xp6(1),t.Q6J("routerLink",t.VKq(11,v,d.training.id)))},dependencies:[c.mk,c.O5,Z.rH]}),a})()}}]);