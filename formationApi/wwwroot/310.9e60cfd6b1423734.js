"use strict";(self.webpackChunkformationApp=self.webpackChunkformationApp||[]).push([[310],{848:(U,b,u)=>{u.d(b,{O:()=>_});var t=u(433),x=u(5412),e=u(1571),v=u(3039),m=u(9140),p=u(6895);function g(o,l){if(1&o){const i=e.EpF();e.TgZ(0,"button",25),e.NdJ("click",function(){const f=e.CHM(i).$implicit,h=e.oxw();return e.KtG(h.setRating(f))})("mouseenter",function(){const f=e.CHM(i).$implicit,h=e.oxw();return e.KtG(h.setHoverRating(f))})("mouseleave",function(){e.CHM(i);const a=e.oxw();return e.KtG(a.resetHoverRating())}),e._UZ(1,"i",26),e.qZA()}if(2&o){const i=l.$implicit,n=e.oxw();e.xp6(1),e.ekj("text-yellow-400",(n.hoverRating||n.selectedRating)>=i)("text-gray-300",(n.hoverRating||n.selectedRating)<i)}}function y(o,l){1&o&&(e.O4$(),e.TgZ(0,"svg",27),e._UZ(1,"circle",28)(2,"path",29),e.qZA())}const k=function(o,l){return{"text-yellow-500":o,"text-gray-500":l}};let q=(()=>{class o{constructor(i,n,a,f,h){this.dialogRef=i,this.fb=n,this.feedbackService=a,this.toaster=f,this.data=h,this.isLoading=!1,this.stars=[1,2,3,4,5],this.selectedRating=0,this.hoverRating=0}ngOnInit(){this.form=this.fb.group({description:[""],value:[0,[t.kI.required,t.kI.min(0),t.kI.max(1)]],formationId:[this.data.formationId,t.kI.required]})}setRating(i){setTimeout(()=>{this.selectedRating=i;const n=i/5;this.form.get("value")?.setValue(n)},0)}setHoverRating(i){setTimeout(()=>{this.hoverRating=i},0)}resetHoverRating(){setTimeout(()=>{this.hoverRating=0},0)}onSubmit(){this.form.valid&&(this.isLoading=!0,this.feedbackService.createFeedback(this.form.value).subscribe({next:i=>{this.isLoading=!1,this.toaster.showSuccess("Merci pour votre feedback !","Feedback envoy\xe9"),this.dialogRef.close(i)},error:i=>{this.isLoading=!1,this.toaster.showError("Une erreur est survenue lors de l'envoi du feedback.","Erreur"),console.error("Erreur lors de la cr\xe9ation du feedback:",i)}}))}onCancel(){this.dialogRef.close()}}return o.\u0275fac=function(i){return new(i||o)(e.Y36(x.so),e.Y36(t.qu),e.Y36(v.T),e.Y36(m.M),e.Y36(x.WI))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-feedback-dialog"]],decls:34,vars:10,consts:[[1,"bg-white","rounded-lg","shadow-xl","max-w-4xl","w-full","mx-auto"],[1,"px-8","py-5","border-b","border-gray-200"],[1,"flex","items-center","justify-between"],[1,"text-2xl","font-semibold","text-gray-900"],[1,"text-gray-400","hover:text-gray-500","transition-colors",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"p-8"],[3,"formGroup","ngSubmit"],[1,"space-y-8"],[1,"text-center"],[1,"text-lg","font-medium","text-gray-700"],[1,"text-sm","text-gray-500","mt-1"],[1,"flex","flex-col","items-center"],[1,"block","text-base","font-medium","text-gray-700","mb-4"],[1,"flex","space-x-4"],["type","button","class","text-3xl focus:outline-none star-btn px-1",3,"click","mouseenter","mouseleave",4,"ngFor","ngForOf"],[1,"mt-2","text-sm",3,"ngClass"],["for","description",1,"block","text-base","font-medium","text-gray-700","mb-2"],[1,"mt-1"],["id","description","formControlName","description","rows","4","placeholder","Partagez votre exp\xe9rience...",1,"block","w-full","px-4","py-3","text-base","border","border-gray-300","rounded-md","shadow-sm","focus:ring-2","focus:ring-primary","focus:border-primary","text-black"],[1,"mt-8","flex","justify-end","space-x-4"],["type","button",1,"inline-flex","justify-center","px-6","py-3","text-base","font-medium","text-gray-700","bg-white","border","border-gray-300","rounded-md","shadow-sm","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-primary",3,"click"],["type","submit",1,"inline-flex","justify-center","px-6","py-3","text-base","font-medium","text-white","bg-primary","border","border-transparent","rounded-md","shadow-sm","hover:bg-primary-dark","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-primary","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled"],["class","animate-spin -ml-1 mr-3 h-5 w-5 text-white","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",4,"ngIf"],["type","button",1,"text-3xl","focus:outline-none","star-btn","px-1",3,"click","mouseenter","mouseleave"],[1,"fas","fa-star"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","-ml-1","mr-3","h-5","w-5","text-white"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"]],template:function(i,n){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),e._uU(4,"Donnez votre avis"),e.qZA(),e.TgZ(5,"button",4),e.NdJ("click",function(){return n.onCancel()}),e.O4$(),e.TgZ(6,"svg",5),e._UZ(7,"path",6),e.qZA()()()(),e.kcU(),e.TgZ(8,"div",7)(9,"form",8),e.NdJ("ngSubmit",function(){return n.onSubmit()}),e.TgZ(10,"div",9)(11,"div",10)(12,"h3",11),e._uU(13),e.qZA(),e.TgZ(14,"p",12),e._uU(15,"Merci de nous donner votre avis sur cette formation"),e.qZA()(),e.TgZ(16,"div",13)(17,"label",14),e._uU(18,"Votre note"),e.qZA(),e.TgZ(19,"div",15),e.YNc(20,g,2,4,"button",16),e.qZA(),e.TgZ(21,"div",17),e._uU(22),e.qZA()(),e.TgZ(23,"div")(24,"label",18),e._uU(25,"Commentaire (optionnel)"),e.qZA(),e.TgZ(26,"div",19),e._UZ(27,"textarea",20),e.qZA()()(),e.TgZ(28,"div",21)(29,"button",22),e.NdJ("click",function(){return n.onCancel()}),e._uU(30," Annuler "),e.qZA(),e.TgZ(31,"button",23),e.YNc(32,y,3,0,"svg",24),e._uU(33," Envoyer "),e.qZA()()()()()),2&i&&(e.xp6(9),e.Q6J("formGroup",n.form),e.xp6(4),e.hij("Formation: ",n.data.formationTitle,""),e.xp6(7),e.Q6J("ngForOf",n.stars),e.xp6(1),e.Q6J("ngClass",e.WLB(7,k,n.selectedRating>0,0===n.selectedRating)),e.xp6(1),e.hij(" ",n.selectedRating>0?n.selectedRating+"/5":"Cliquez pour noter"," "),e.xp6(9),e.Q6J("disabled",!n.form.valid||0===n.selectedRating||n.isLoading),e.xp6(1),e.Q6J("ngIf",n.isLoading))},dependencies:[p.mk,p.sg,p.O5,t._Y,t.Fj,t.JJ,t.JL,t.sg,t.u],styles:['@charset "UTF-8";.fa-star[_ngcontent-%COMP%]{transition:all .1s ease-in-out;cursor:pointer;display:inline-block}.star-btn[_ngcontent-%COMP%]{padding:.25rem .5rem;margin:0 .25rem;border-radius:.25rem;background:transparent;border:none;cursor:pointer;touch-action:manipulation}.star-btn[_ngcontent-%COMP%]:hover   .fa-star[_ngcontent-%COMP%]{transform:scale(1.3)}.text-yellow-400[_ngcontent-%COMP%]{color:#f59e0b}.text-gray-300[_ngcontent-%COMP%]{color:#d1d5db}textarea[_ngcontent-%COMP%]{resize:vertical;min-height:100px}button[type=submit][_ngcontent-%COMP%]{transition:all .2s ease-in-out}button[type=submit][_ngcontent-%COMP%]:not(:disabled):hover{transform:translateY(-2px);box-shadow:0 4px 6px #0000001a}[_nghost-%COMP%]{display:block;max-width:500px;width:100%}']}),o})();var w=u(7917),I=u(6920);function T(o,l){if(1&o&&(e.TgZ(0,"div",3),e._UZ(1,"div",4),e.TgZ(2,"div",5),e._uU(3),e.qZA()()),2&o){const i=e.oxw();e.xp6(3),e.hij(" ",i.isRedirecting?"Redirection en cours...":"Chargement du quiz..."," ")}}function Z(o,l){if(1&o&&(e.TgZ(0,"div",6),e._uU(1),e.qZA()),2&o){const i=e.oxw();e.xp6(1),e.hij(" ",i.error,"\n")}}function C(o,l){if(1&o){const i=e.EpF();e.TgZ(0,"li",14),e.NdJ("click",function(){const f=e.CHM(i).$implicit,h=e.oxw(2);return e.KtG(h.selectAnswer(f.id))}),e._uU(1),e.qZA()}if(2&o){const i=l.$implicit,n=e.oxw(2);e.ekj("selected",n.isAnswerSelected(n.quiz.questions[n.currentQuestionIndex].id,i.id)),e.xp6(1),e.hij(" ",i.text||"No answer text"," ")}}function F(o,l){if(1&o){const i=e.EpF();e.TgZ(0,"div",7)(1,"h1"),e._uU(2),e.qZA(),e.TgZ(3,"p"),e._uU(4),e.ALo(5,"date"),e.qZA(),e.TgZ(6,"div",8)(7,"div",9)(8,"div",10),e._uU(9),e.ALo(10,"number"),e.qZA()(),e.TgZ(11,"p"),e._uU(12),e.qZA(),e.TgZ(13,"ul"),e.YNc(14,C,2,3,"li",11),e.qZA()(),e.TgZ(15,"div",12)(16,"button",13),e.NdJ("click",function(){e.CHM(i);const a=e.oxw();return e.KtG(a.nextQuestion())}),e._uU(17),e.qZA()()()}if(2&o){const i=e.oxw();e.xp6(2),e.Oqu(i.quiz.title||"Untitled Quiz"),e.xp6(2),e.hij("Created on: ",e.xi3(5,8,i.quiz.createdAt,"dd MMM yyyy"),""),e.xp6(4),e.Udp("width",(i.currentQuestionIndex+1)/i.quiz.questions.length*100,"%"),e.xp6(1),e.hij(" ",e.xi3(10,11,(i.currentQuestionIndex+1)/i.quiz.questions.length*100,"1.0-0"),"% "),e.xp6(3),e.Oqu(i.quiz.questions[i.currentQuestionIndex].title),e.xp6(2),e.Q6J("ngForOf",i.quiz.questions[i.currentQuestionIndex].answers),e.xp6(3),e.hij(" ",i.currentQuestionIndex===i.quiz.questions.length-1?"Finish":"Next"," ")}}function z(o,l){1&o&&(e.TgZ(0,"span",24),e._uU(1," (Correct)"),e.qZA())}function A(o,l){1&o&&(e.TgZ(0,"span",25),e._uU(1," (Your choice)"),e.qZA())}function P(o,l){1&o&&(e.TgZ(0,"span",24),e._uU(1," (Your choice)"),e.qZA())}function r(o,l){if(1&o&&(e.TgZ(0,"li"),e._uU(1),e.YNc(2,z,2,0,"span",22),e.YNc(3,A,2,0,"span",23),e.YNc(4,P,2,0,"span",22),e.qZA()),2&o){const i=l.$implicit,n=e.oxw().$implicit,a=e.oxw(2);e.ekj("correct",i.isCorrect)("wrong",a.isAnswerSelected(n.id,i.id)&&!i.isCorrect),e.xp6(1),e.hij(" ",i.text," "),e.xp6(1),e.Q6J("ngIf",i.isCorrect),e.xp6(1),e.Q6J("ngIf",a.isAnswerSelected(n.id,i.id)&&!i.isCorrect),e.xp6(1),e.Q6J("ngIf",a.isAnswerSelected(n.id,i.id)&&i.isCorrect)}}function c(o,l){if(1&o&&(e.TgZ(0,"div",8)(1,"h3",20),e._uU(2),e.qZA(),e.TgZ(3,"ul"),e.YNc(4,r,5,8,"li",21),e.qZA()()),2&o){const i=l.$implicit,n=l.index;e.xp6(2),e.AsE(" ",n+1,". ",i.title," "),e.xp6(2),e.Q6J("ngForOf",i.answers)}}function s(o,l){1&o&&(e.TgZ(0,"div",26)(1,"p"),e._uU(2,"Vous allez \xeatre redirig\xe9 automatiquement..."),e.qZA()())}function d(o,l){if(1&o&&(e.TgZ(0,"div",7)(1,"h1"),e._uU(2,"Quiz Results"),e.qZA(),e.TgZ(3,"p",15),e._uU(4," You scored "),e.TgZ(5,"strong"),e._uU(6),e.qZA(),e._uU(7),e.ALo(8,"number"),e.qZA(),e.TgZ(9,"div",16)(10,"div",17),e._uU(11),e.ALo(12,"number"),e.qZA()(),e.YNc(13,c,5,3,"div",18),e.YNc(14,s,3,0,"div",19),e.qZA()),2&o){const i=e.oxw();e.xp6(6),e.AsE("",i.score,"/",i.totalPossiblePoints,""),e.xp6(1),e.hij(" (",e.xi3(8,8,i.score/i.totalPossiblePoints*100,"1.0-0"),"%) "),e.xp6(3),e.Udp("width",i.score/i.totalPossiblePoints*100,"%"),e.xp6(1),e.hij(" ",e.xi3(12,11,i.score/i.totalPossiblePoints*100,"1.0-0"),"% "),e.xp6(2),e.Q6J("ngForOf",i.quiz.questions),e.xp6(1),e.Q6J("ngIf",i.isRedirecting)}}let _=(()=>{class o{constructor(i,n,a,f,h){this.route=i,this.router=n,this.quizService=a,this.toaster=f,this.dialog=h,this.isLoading=!0,this.error=null,this.currentQuestionIndex=0,this.selectedAnswers={},this.isFinished=!1,this.isRedirecting=!1,this.score=0,this.quizType="session",this.formationTitle=""}ngOnInit(){const i=this.route.snapshot.paramMap,n=this.route.snapshot.queryParams;if(this.quizId=+i.get("quizId"),this.quizId){if(n.type&&(this.quizType=n.type),"module"===this.quizType){if(this.formationId=+n.formationId,this.moduleId=+n.moduleId,n.sessionId&&(this.sessionId=+n.sessionId),!this.formationId||!this.moduleId)return void(this.error="Param\xe8tres invalides pour le quiz de module")}else if("final"===this.quizType){if(this.formationId=+n.formationId,n.sessionId&&(this.sessionId=+n.sessionId),!this.formationId)return void(this.error="Param\xe8tres invalides pour le quiz final")}else{if(this.sessionId=+i.get("sessionId"),!this.sessionId)return void(this.error="ID de session invalide");this.quizType="final"}this.loadQuiz(this.quizId)}else this.error="ID de quiz invalide"}loadQuiz(i){this.isLoading=!0,this.error=null,this.quizService.getQuiz(i).subscribe({next:n=>{this.quiz=n,this.isLoading=!1,"final"===this.quizType&&this.formationId&&this.quizService.getFormationTitle(this.formationId).subscribe({next:a=>{this.formationTitle=a},error:a=>{console.error("Erreur lors de la r\xe9cup\xe9ration du titre de la formation:",a)}})},error:n=>{this.error=n?.error?.message||"Failed to load quiz.",this.isLoading=!1}})}selectAnswer(i){const n=this.quiz.questions[this.currentQuestionIndex],a=n.id;if(this.selectedAnswers[a]||(this.selectedAnswers[a]=[]),n.answers.length>2){const f=this.selectedAnswers[a].indexOf(i);-1===f?this.selectedAnswers[a].push(i):this.selectedAnswers[a].splice(f,1)}else this.selectedAnswers[a]=[i]}nextQuestion(){this.selectedAnswers[this.quiz.questions[this.currentQuestionIndex].id]?.length>0?this.currentQuestionIndex<this.quiz.questions.length-1?this.currentQuestionIndex++:this.finishQuiz():this.toaster.showInfo("Please select at least one answer.","warning")}finishQuiz(){this.isLoading=!0;const i=Object.entries(this.selectedAnswers).map(([a,f])=>({questionId:parseInt(a),selectedAnswerId:f[0]}));let n;switch(this.quizType){case"module":if(!this.formationId||!this.moduleId)return this.error="Param\xe8tres invalides pour le quiz de module",void(this.isLoading=!1);n=this.quizService.submitModuleQuizAnswer(this.quizId,this.formationId,this.moduleId,i,this.sessionId);break;case"final":if(!this.formationId)return this.error="Param\xe8tres invalides pour le quiz final",void(this.isLoading=!1);n=this.quizService.submitFinalQuizAnswer(this.quizId,this.formationId,i,this.sessionId);break;default:if(!this.sessionId)return this.error="ID de session invalide",void(this.isLoading=!1);n=this.formationId?this.quizService.submitFinalQuizAnswer(this.quizId,this.formationId,i,this.sessionId):this.quizService.submitQuizAnswer(this.quizId,this.sessionId,i)}n.subscribe({next:a=>{this.isLoading=!1,this.isFinished=!0,this.score=a.score*this.totalPossiblePoints/100,this.toaster.showInfo(a.passed?"F\xe9licitations ! Vous avez r\xe9ussi le test.":"Vous n'avez pas obtenu le score minimum requis.","R\xe9sultat du test"),setTimeout(()=>{"final"===this.quizType&&a.passed&&this.formationId?this.openFeedbackDialog():(this.isRedirecting=!0,setTimeout(()=>{this.navigateAfterQuiz(a.passed)},1500))},3e3)},error:a=>{this.isLoading=!1,this.error=a?.error?.message||"Une erreur est survenue lors de la soumission du test.",this.toaster.showInfo("Erreur lors de la soumission du test","Erreur")}})}openFeedbackDialog(){this.dialog.open(q,{width:"500px",disableClose:!0,data:{formationId:this.formationId,formationTitle:this.formationTitle||"Formation"}}).afterClosed().subscribe(n=>{this.isRedirecting=!0,setTimeout(()=>{this.navigateAfterQuiz(!0)},1e3)})}navigateAfterQuiz(i){switch(this.isRedirecting=!0,this.quizType){case"module":if(this.formationId&&this.moduleId){const n=`/condidat/module/${this.formationId}/${this.moduleId}`;this.router.navigate(this.sessionId?[n,this.sessionId]:[n]),i?this.toaster.showInfo("Vous avez r\xe9ussi le quiz du module !","F\xe9licitations"):this.toaster.showInfo("Vous n'avez pas obtenu le score minimum requis. Vous pouvez r\xe9essayer.","Information")}break;case"final":this.formationId&&(this.router.navigate([`/condidat/formations/${this.formationId}`]),i?this.toaster.showInfo("Vous avez r\xe9ussi le quiz final de la formation !","F\xe9licitations"):this.toaster.showInfo("Vous n'avez pas obtenu le score minimum requis pour le quiz final. Vous pouvez r\xe9essayer.","Information"));break;default:this.router.navigate(["/condidat/formations"])}}isAnswerSelected(i,n){return this.selectedAnswers[i]?.includes(n)||!1}get totalPossiblePoints(){return 10*this.quiz.questions.length}}return o.\u0275fac=function(i){return new(i||o)(e.Y36(w.gz),e.Y36(w.F0),e.Y36(I.v),e.Y36(m.M),e.Y36(x.uw))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-quiz-passing"]],decls:4,vars:4,consts:[["class","flex justify-center items-center py-10",4,"ngIf"],["class","error",4,"ngIf"],["class","quiz-details bg-gray-100 shadow-inner shadow-gray-200 rounded-2xl p-8 max-w-4xl m-auto mt-6",4,"ngIf"],[1,"flex","justify-center","items-center","py-10"],[1,"animate-spin","rounded-full","h-12","w-12","border-t-2","border-b-2","border-primary"],[1,"ml-4","text-lg","font-medium"],[1,"error"],[1,"quiz-details","bg-gray-100","shadow-inner","shadow-gray-200","rounded-2xl","p-8","max-w-4xl","m-auto","mt-6"],[1,"question"],[1,"!my-5","w-full","bg-gray-200","rounded-full"],[1,"bg-primary","text-xs","font-medium","text-blue-100","text-center","p-0.5","leading-none","rounded-full","transition-colors"],[3,"selected","click",4,"ngFor","ngForOf"],[1,"flex","flex-row","justify-end","w-full","mt-8"],[1,"btn-next","disabled:opacity-80","bg-primary","disabled:bg-primary/80","rounded-lg",3,"click"],[3,"click"],[1,"text-center","text-xl","font-medium","mb-4"],[1,"!my-5","w-full","bg-gray-200","rounded-full","result-progress-bar","mb-8"],[1,"bg-green-500","text-xs","font-medium","text-white","text-center","p-0.5","leading-none","rounded-full","transition-colors","result-progress-bar__fill"],["class","question",4,"ngFor","ngForOf"],["class","mt-6 text-center text-gray-600",4,"ngIf"],[1,"!my-5"],[3,"correct","wrong",4,"ngFor","ngForOf"],["class","text-green-600 font-semibold",4,"ngIf"],["class","text-red-600 font-semibold",4,"ngIf"],[1,"text-green-600","font-semibold"],[1,"text-red-600","font-semibold"],[1,"mt-6","text-center","text-gray-600"]],template:function(i,n){1&i&&(e.YNc(0,T,4,1,"div",0),e.YNc(1,Z,2,1,"div",1),e.YNc(2,F,18,14,"div",2),e.YNc(3,d,15,14,"div",2)),2&i&&(e.Q6J("ngIf",n.isLoading),e.xp6(1),e.Q6J("ngIf",!n.isLoading&&n.error),e.xp6(1),e.Q6J("ngIf",!n.isLoading&&!n.error&&n.quiz&&!n.isFinished),e.xp6(1),e.Q6J("ngIf",!n.isLoading&&!n.error&&n.isFinished))},dependencies:[p.sg,p.O5,p.JJ,p.uU],styles:[".loading[_ngcontent-%COMP%]{font-size:1.2em;color:#555;text-align:center;margin-top:20px}.error[_ngcontent-%COMP%]{font-size:1.2em;color:red;text-align:center;margin-top:20px}.quiz-details[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2em;margin-bottom:10px}.quiz-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1em;color:#666;margin-bottom:20px;font-style:italic}.question[_ngcontent-%COMP%]{margin-top:20px}.question[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5em;margin-bottom:5px;color:#333}.question[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:15px;color:#444}.question[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style-type:none;padding:0}.question[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{background-color:#fff;padding:12px 16px;margin-bottom:8px;border-radius:4px;box-shadow:0 1px 2px #0000000d;cursor:pointer;transition:background-color .2s,border .2s}.question[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:#eef2f7}.question[_ngcontent-%COMP%]   li.selected[_ngcontent-%COMP%]{background-color:#e0f7fa;border:2px solid #26c6da}.btn-next[_ngcontent-%COMP%]{display:block;padding:10px 20px;font-size:1em;color:#fff;cursor:pointer;transition:background-color .2s}.btn-next[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#2563eb}.result-progress-bar[_ngcontent-%COMP%]{height:1rem;background:#e5e7eb;border-radius:9999px;overflow:hidden;margin:0 auto;max-width:600px}.result-progress-bar__fill[_ngcontent-%COMP%]{height:100%;background-color:#10b981;transition:width .5s ease}"]}),o})()},3039:(U,b,u)=>{u.d(b,{T:()=>v});var t=u(2340),x=u(1571),e=u(529);let v=(()=>{class m{constructor(g){this.http=g,this.apiUrl=`${t.N.baseUrl}/feedback`}getAllFeedbacks(){return this.http.get(`${this.apiUrl}`)}getAllByAdmin(){return this.http.get(`${this.apiUrl}/admin`)}getUserFeedbacks(){return this.http.get(`${this.apiUrl}/user`)}getFeedback(g){return this.http.get(`${this.apiUrl}/${g}`)}getFeedbacksByFormation(g){return this.http.get(`${this.apiUrl}/formation/${g}`)}createFeedback(g){return this.http.post(`${this.apiUrl}`,g)}deleteFeedback(g){return this.http.delete(`${this.apiUrl}/${g}`)}}return m.\u0275fac=function(g){return new(g||m)(x.LFG(e.eN))},m.\u0275prov=x.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})()},8690:(U,b,u)=>{u.d(b,{e:()=>P});var t=u(1571),x=u(3039),e=u(6895);function v(r,c){1&r&&(t.TgZ(0,"div",6),t._UZ(1,"div",7),t.qZA())}function m(r,c){if(1&r&&(t.TgZ(0,"div",8)(1,"strong",9),t._uU(2,"Erreur!"),t.qZA(),t.TgZ(3,"span",10),t._uU(4),t.qZA()()),2&r){const s=t.oxw();t.xp6(4),t.Oqu(s.error)}}function p(r,c){1&r&&t._UZ(0,"i",23)}function g(r,c){1&r&&t._UZ(0,"i",24)}function y(r,c){1&r&&t._UZ(0,"i",25)}function k(r,c){if(1&r&&(t.ynx(0),t.YNc(1,p,1,0,"i",20),t.YNc(2,g,1,0,"i",21),t.YNc(3,y,1,0,"i",22),t.BQk()),2&r){const s=c.$implicit;t.xp6(1),t.Q6J("ngIf",2===s),t.xp6(1),t.Q6J("ngIf",1===s),t.xp6(1),t.Q6J("ngIf",0===s)}}function q(r,c){if(1&r&&(t.TgZ(0,"div",11)(1,"div",12)(2,"h2",13),t._uU(3,"R\xe9sum\xe9 des \xe9valuations"),t.qZA(),t.TgZ(4,"div",14)(5,"div",15),t.YNc(6,k,4,3,"ng-container",16),t.qZA(),t.TgZ(7,"span",17),t._uU(8),t.qZA()()(),t.TgZ(9,"div",18)(10,"p"),t._uU(11,"Nombre total d'\xe9valuations: "),t.TgZ(12,"span",19),t._uU(13),t.qZA()()()()),2&r){const s=t.oxw();t.xp6(6),t.Q6J("ngForOf",s.getStarsArray(s.getAverageRating())),t.xp6(2),t.hij("",(5*s.getAverageRating()).toFixed(1),"/5"),t.xp6(5),t.Oqu(s.feedbacks.length)}}function w(r,c){1&r&&(t.TgZ(0,"div",26)(1,"div",27),t._UZ(2,"i",28),t.TgZ(3,"h2",29),t._uU(4,"Aucun feedback"),t.qZA(),t.TgZ(5,"p",30),t._uU(6,"Cette formation n'a pas encore re\xe7u d'\xe9valuations."),t.qZA()()())}function I(r,c){1&r&&t._UZ(0,"i",46)}function T(r,c){1&r&&t._UZ(0,"i",47)}function Z(r,c){1&r&&t._UZ(0,"i",48)}function C(r,c){if(1&r&&(t.ynx(0),t.YNc(1,I,1,0,"i",43),t.YNc(2,T,1,0,"i",44),t.YNc(3,Z,1,0,"i",45),t.BQk()),2&r){const s=c.$implicit;t.xp6(1),t.Q6J("ngIf",2===s),t.xp6(1),t.Q6J("ngIf",1===s),t.xp6(1),t.Q6J("ngIf",0===s)}}function F(r,c){if(1&r){const s=t.EpF();t.TgZ(0,"button",49),t.NdJ("click",function(){t.CHM(s);const _=t.oxw().$implicit,o=t.oxw(2);return t.KtG(o.deleteFeedback(_.id))}),t._UZ(1,"i",50),t.qZA()}}function z(r,c){if(1&r&&(t.TgZ(0,"div",34)(1,"div",35)(2,"div")(3,"div",36)(4,"div",15),t.YNc(5,C,4,3,"ng-container",16),t.qZA(),t.TgZ(6,"span",37),t._uU(7),t.qZA()(),t.TgZ(8,"div",14),t._UZ(9,"i",38),t.TgZ(10,"span",39),t._uU(11),t.qZA(),t.TgZ(12,"span",40),t._uU(13),t.qZA()()(),t.TgZ(14,"div",14)(15,"span",41),t._uU(16),t.qZA(),t.YNc(17,F,2,0,"button",42),t.qZA()(),t.TgZ(18,"p",18),t._uU(19),t.qZA()()),2&r){const s=c.$implicit,d=t.oxw(2);t.xp6(5),t.Q6J("ngForOf",d.getStarsArray(s.value)),t.xp6(2),t.hij("",(5*s.value).toFixed(1),"/5"),t.xp6(4),t.Oqu(s.user.userName),t.xp6(2),t.hij("(",s.user.email,")"),t.xp6(3),t.Oqu(d.formatDate(s.createdAt)),t.xp6(1),t.Q6J("ngIf",d.canDelete),t.xp6(2),t.Oqu(s.description)}}function A(r,c){if(1&r&&(t.TgZ(0,"div",31)(1,"h2",32),t._uU(2,"Tous les feedbacks"),t.qZA(),t.YNc(3,z,20,7,"div",33),t.qZA()),2&r){const s=t.oxw();t.xp6(3),t.Q6J("ngForOf",s.feedbacks)}}let P=(()=>{class r{constructor(s){this.feedbackService=s,this.canDelete=!1,this.feedbacks=[],this.loading=!1,this.error=null}ngOnInit(){this.loadFeedbacks()}loadFeedbacks(){this.formationId?(this.loading=!0,this.feedbackService.getFeedbacksByFormation(this.formationId).subscribe({next:s=>{this.feedbacks=s,this.loading=!1},error:s=>{this.error=s.message||"Erreur lors du chargement des feedbacks",this.loading=!1}})):this.error="ID de formation non sp\xe9cifi\xe9"}getStarsArray(s){const d=[],_=5*s;for(let o=0;o<5;o++)o<Math.floor(_)?d.push(2):o<Math.floor(_+.5)?d.push(1):d.push(0);return d}getAverageRating(){return 0===this.feedbacks.length?0:this.feedbacks.reduce((d,_)=>d+_.value,0)/this.feedbacks.length}deleteFeedback(s){confirm("\xcates-vous s\xfbr de vouloir supprimer ce feedback ?")&&this.feedbackService.deleteFeedback(s).subscribe({next:()=>{this.feedbacks=this.feedbacks.filter(d=>d.id!==s)},error:d=>{this.error=d.message||"Erreur lors de la suppression du feedback"}})}formatDate(s){if(!s)return"";const d=new Date(s);return`${d.getDate().toString().padStart(2,"0")}/${(d.getMonth()+1).toString().padStart(2,"0")}/${d.getFullYear()}`}}return r.\u0275fac=function(s){return new(s||r)(t.Y36(x.T))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-formation-feedbacks"]],inputs:{formationId:"formationId",canDelete:"canDelete"},decls:6,vars:5,consts:[[1,"space-y-6"],["class","flex justify-center items-center py-10",4,"ngIf"],["class","bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative","role","alert",4,"ngIf"],["class","bg-white rounded-lg shadow p-6",4,"ngIf"],["class","bg-white rounded-lg shadow p-8 text-center",4,"ngIf"],["class","space-y-4",4,"ngIf"],[1,"flex","justify-center","items-center","py-10"],[1,"animate-spin","rounded-full","h-12","w-12","border-t-2","border-b-2","border-primary"],["role","alert",1,"bg-red-100","border","border-red-400","text-red-700","px-4","py-3","rounded","relative"],[1,"font-bold"],[1,"block","sm:inline"],[1,"bg-white","rounded-lg","shadow","p-6"],[1,"flex","items-center","justify-between","mb-4"],[1,"text-xl","font-semibold","text-gray-800"],[1,"flex","items-center"],[1,"flex"],[4,"ngFor","ngForOf"],[1,"ml-2","text-lg","font-medium"],[1,"text-gray-600"],[1,"font-medium"],["class","fas fa-star text-yellow-400 text-xl mr-1",4,"ngIf"],["class","fas fa-star-half-alt text-yellow-400 text-xl mr-1",4,"ngIf"],["class","far fa-star text-yellow-400 text-xl mr-1",4,"ngIf"],[1,"fas","fa-star","text-yellow-400","text-xl","mr-1"],[1,"fas","fa-star-half-alt","text-yellow-400","text-xl","mr-1"],[1,"far","fa-star","text-yellow-400","text-xl","mr-1"],[1,"bg-white","rounded-lg","shadow","p-8","text-center"],[1,"flex","flex-col","items-center"],[1,"fas","fa-comment-slash","text-gray-400","mb-4","text-5xl"],[1,"text-xl","font-semibold","text-gray-700","mb-2"],[1,"text-gray-500"],[1,"space-y-4"],[1,"text-xl","font-semibold","text-gray-800","mb-4"],["class","bg-white rounded-lg shadow p-5 transition-all hover:shadow-lg",4,"ngFor","ngForOf"],[1,"bg-white","rounded-lg","shadow","p-5","transition-all","hover:shadow-lg"],[1,"flex","justify-between","items-start","mb-3"],[1,"flex","items-center","mb-2"],[1,"ml-2","text-sm","text-gray-500"],[1,"fas","fa-user-circle","text-gray-400","mr-2"],[1,"font-medium","text-gray-700"],[1,"text-xs","text-gray-500","ml-2"],[1,"text-sm","text-gray-500"],["class","ml-3 text-red-500 hover:text-red-700",3,"click",4,"ngIf"],["class","fas fa-star text-yellow-400 mr-1",4,"ngIf"],["class","fas fa-star-half-alt text-yellow-400 mr-1",4,"ngIf"],["class","far fa-star text-yellow-400 mr-1",4,"ngIf"],[1,"fas","fa-star","text-yellow-400","mr-1"],[1,"fas","fa-star-half-alt","text-yellow-400","mr-1"],[1,"far","fa-star","text-yellow-400","mr-1"],[1,"ml-3","text-red-500","hover:text-red-700",3,"click"],[1,"fas","fa-trash-alt"]],template:function(s,d){1&s&&(t.TgZ(0,"div",0),t.YNc(1,v,2,0,"div",1),t.YNc(2,m,5,1,"div",2),t.YNc(3,q,14,3,"div",3),t.YNc(4,w,7,0,"div",4),t.YNc(5,A,4,1,"div",5),t.qZA()),2&s&&(t.xp6(1),t.Q6J("ngIf",d.loading),t.xp6(1),t.Q6J("ngIf",d.error),t.xp6(1),t.Q6J("ngIf",!d.loading&&!d.error&&d.feedbacks.length>0),t.xp6(1),t.Q6J("ngIf",!d.loading&&!d.error&&0===d.feedbacks.length),t.xp6(1),t.Q6J("ngIf",!d.loading&&!d.error&&d.feedbacks.length>0))},dependencies:[e.sg,e.O5]}),r})()}}]);