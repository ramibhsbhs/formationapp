"use strict";(self.webpackChunkformationApp=self.webpackChunkformationApp||[]).push([[736],{3736:(gn,q,d)=>{d.r(q),d.d(q,{AdminModule:()=>cn});var l=d(6895),p=d(7917),h=d(5080),t=d(1571),k=d(5332);const U=["categoryChart"],P=["attemptsChart"],F=["ratingsChart"],z=["topFormationsChart"];function Q(n,r){1&n&&(t.TgZ(0,"div",40),t._UZ(1,"i",41),t.TgZ(2,"p"),t._uU(3,"Aucune donn\xe9e disponible pour le moment."),t.qZA()())}function I(n,r){1&n&&(t.TgZ(0,"div",42),t._UZ(1,"canvas",null,43),t.qZA())}function J(n,r){1&n&&(t.TgZ(0,"div",40),t._UZ(1,"i",44),t.TgZ(2,"p"),t._uU(3,"Aucune donn\xe9e disponible pour le moment."),t.qZA()())}function N(n,r){1&n&&(t.TgZ(0,"div",42),t._UZ(1,"canvas",null,45),t.qZA())}function E(n,r){1&n&&(t.TgZ(0,"div",40),t._UZ(1,"i",46),t.TgZ(2,"p"),t._uU(3,"Aucune \xe9valuation disponible pour le moment."),t.qZA()())}function S(n,r){1&n&&(t.TgZ(0,"div",42),t._UZ(1,"canvas",null,47),t.qZA())}function D(n,r){1&n&&(t.TgZ(0,"div",40),t._UZ(1,"i",48),t.TgZ(2,"p"),t._uU(3,"Aucune formation n'a encore \xe9t\xe9 tent\xe9e."),t.qZA()())}function Y(n,r){1&n&&(t.TgZ(0,"div",42),t._UZ(1,"canvas",null,49),t.qZA())}function L(n,r){1&n&&(t.TgZ(0,"div",50),t._UZ(1,"div",51),t.qZA())}function G(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",52)(1,"strong",53),t._uU(2,"Erreur!"),t.qZA(),t.TgZ(3,"span",54),t._uU(4," Impossible de charger les donn\xe9es du tableau de bord."),t.qZA(),t.TgZ(5,"button",55),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.refreshData())}),t._uU(6,"R\xe9essayer"),t.qZA()()}}h.kL.register(...h.zX);let j=(()=>{class n{constructor(e){this.dashboardService=e,this.loading=!0,this.error=!1}ngOnInit(){this.loadDashboardData()}loadDashboardData(){this.loading=!0,this.error=!1,this.dashboardService.getAdminDashboardData().subscribe({next:e=>{this.dashboardData=e,this.loading=!1,setTimeout(()=>{this.initCharts()},100)},error:e=>{console.error("Erreur lors du chargement des donn\xe9es du tableau de bord",e),this.loading=!1,this.error=!0}})}initCharts(){this.initCategoryChart(),this.initAttemptsChart(),this.initRatingsChart(),this.initTopFormationsChart()}initCategoryChart(){if(this.categoryChartCanvas&&this.dashboardData?.formationsByCategory?.length>0){const e=this.categoryChartCanvas.nativeElement.getContext("2d");this.categoryChart&&this.categoryChart.destroy(),this.categoryChart=new h.kL(e,{type:"pie",data:{labels:this.dashboardData.formationsByCategory.map(o=>o.category),datasets:[{data:this.dashboardData.formationsByCategory.map(o=>o.count),backgroundColor:["#4F46E5","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#06B6D4","#84CC16","#F97316","#6366F1"],borderWidth:1}]},options:{responsive:!0,plugins:{legend:{position:"right"},title:{display:!0,text:"Formations par cat\xe9gorie"}}}})}}initAttemptsChart(){if(this.attemptsChartCanvas&&this.dashboardData?.quizAttemptsOverTime?.length>0){const e=this.attemptsChartCanvas.nativeElement.getContext("2d");this.attemptsChart&&this.attemptsChart.destroy(),this.attemptsChart=new h.kL(e,{type:"line",data:{labels:this.dashboardData.quizAttemptsOverTime.map(o=>o.month),datasets:[{label:"Tentatives de quiz",data:this.dashboardData.quizAttemptsOverTime.map(o=>o.count),borderColor:"#4F46E5",backgroundColor:"rgba(79, 70, 229, 0.1)",borderWidth:2,fill:!0,tension:.4}]},options:{responsive:!0,plugins:{title:{display:!0,text:"Tentatives de quiz par mois"}},scales:{y:{beginAtZero:!0}}}})}}initRatingsChart(){if(this.ratingsChartCanvas&&this.dashboardData?.feedbackRatings?.length>0){const e=this.ratingsChartCanvas.nativeElement.getContext("2d");this.ratingsChart&&this.ratingsChart.destroy(),this.ratingsChart=new h.kL(e,{type:"bar",data:{labels:this.dashboardData.feedbackRatings.map(o=>`${o.rating.toFixed(1)} \xe9toiles`),datasets:[{label:"Nombre d'\xe9valuations",data:this.dashboardData.feedbackRatings.map(o=>o.count),backgroundColor:"#10B981",borderWidth:0,borderRadius:4}]},options:{responsive:!0,plugins:{title:{display:!0,text:"Distribution des \xe9valuations"}},scales:{y:{beginAtZero:!0}}}})}}initTopFormationsChart(){if(this.topFormationsChartCanvas&&this.dashboardData?.topFormations?.length>0){const e=this.topFormationsChartCanvas.nativeElement.getContext("2d");this.topFormationsChart&&this.topFormationsChart.destroy(),this.topFormationsChart=new h.kL(e,{type:"bar",data:{labels:this.dashboardData.topFormations.map(o=>this.truncateTitle(o.title)),datasets:[{label:"Nombre de tentatives",data:this.dashboardData.topFormations.map(o=>o.count),backgroundColor:"#F59E0B",borderWidth:0,borderRadius:4}]},options:{indexAxis:"y",responsive:!0,plugins:{title:{display:!0,text:"Formations les plus populaires"}},scales:{x:{beginAtZero:!0}}}})}}truncateTitle(e){return e.length>25?e.substring(0,22)+"...":e}refreshData(){this.loadDashboardData()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(k.s))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-home"]],viewQuery:function(e,o){if(1&e&&(t.Gf(U,5),t.Gf(P,5),t.Gf(F,5),t.Gf(z,5)),2&e){let i;t.iGM(i=t.CRH())&&(o.categoryChartCanvas=i.first),t.iGM(i=t.CRH())&&(o.attemptsChartCanvas=i.first),t.iGM(i=t.CRH())&&(o.ratingsChartCanvas=i.first),t.iGM(i=t.CRH())&&(o.topFormationsChartCanvas=i.first)}},decls:105,vars:17,consts:[[1,"container","mx-auto","px-4","py-8"],[1,"flex","justify-between","items-center","mb-8"],[1,"text-3xl","font-bold","text-gray-800"],[1,"text-gray-600","mt-2"],[1,"px-4","py-2","bg-primary","text-white","rounded-md","flex","items-center",3,"click"],[1,"fas","fa-sync-alt","mr-2"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-4","gap-6","mb-8"],[1,"stat-card"],[1,"flex","justify-between","items-center","mb-2"],[1,"text-lg","font-semibold","text-gray-700"],[1,"p-2","bg-blue-100","rounded-full"],[1,"fas","fa-users","text-blue-600"],[1,"stat-value","text-blue-600"],[1,"stat-label"],[1,"p-2","bg-green-100","rounded-full"],[1,"fas","fa-graduation-cap","text-green-600"],[1,"stat-value","text-green-600"],[1,"p-2","bg-purple-100","rounded-full"],[1,"fas","fa-calendar-alt","text-purple-600"],[1,"stat-value","text-purple-600"],[1,"p-2","bg-yellow-100","rounded-full"],[1,"fas","fa-certificate","text-yellow-600"],[1,"stat-value","text-yellow-600"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-6","mb-8"],[1,"p-2","bg-indigo-100","rounded-full"],[1,"fas","fa-book","text-indigo-600"],[1,"stat-value","text-indigo-600"],[1,"p-2","bg-red-100","rounded-full"],[1,"fas","fa-question-circle","text-red-600"],[1,"stat-value","text-red-600"],[1,"p-2","bg-teal-100","rounded-full"],[1,"fas","fa-tasks","text-teal-600"],[1,"stat-value","text-teal-600"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-8","mb-8"],[1,"bg-white","p-6","rounded-lg","shadow-md"],[1,"text-lg","font-semibold","text-gray-700","mb-4"],["class","text-center py-8 text-gray-500",4,"ngIf"],["class","h-64",4,"ngIf"],["class","flex justify-center items-center py-12",4,"ngIf"],["class","bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-8",4,"ngIf"],[1,"text-center","py-8","text-gray-500"],[1,"fas","fa-chart-pie","text-2xl","mb-2"],[1,"h-64"],["categoryChart",""],[1,"fas","fa-chart-line","text-2xl","mb-2"],["attemptsChart",""],[1,"fas","fa-star","text-2xl","mb-2"],["ratingsChart",""],[1,"fas","fa-graduation-cap","text-2xl","mb-2"],["topFormationsChart",""],[1,"flex","justify-center","items-center","py-12"],[1,"animate-spin","rounded-full","h-12","w-12","border-t-2","border-b-2","border-primary"],[1,"bg-red-100","border","border-red-400","text-red-700","px-4","py-3","rounded","relative","mb-8"],[1,"font-bold"],[1,"block","sm:inline"],[1,"underline","ml-2",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div")(3,"h1",2),t._uU(4,"Tableau de bord administrateur"),t.qZA(),t.TgZ(5,"p",3),t._uU(6,"Aper\xe7u global des formations, utilisateurs et activit\xe9s"),t.qZA()(),t.TgZ(7,"button",4),t.NdJ("click",function(){return o.refreshData()}),t._UZ(8,"i",5),t._uU(9," Actualiser "),t.qZA()(),t.TgZ(10,"div",6)(11,"div",7)(12,"div",8)(13,"h3",9),t._uU(14,"Utilisateurs"),t.qZA(),t.TgZ(15,"div",10),t._UZ(16,"i",11),t.qZA()(),t.TgZ(17,"p",12),t._uU(18),t.qZA(),t.TgZ(19,"p",13),t._uU(20,"Utilisateurs inscrits"),t.qZA()(),t.TgZ(21,"div",7)(22,"div",8)(23,"h3",9),t._uU(24,"Formations"),t.qZA(),t.TgZ(25,"div",14),t._UZ(26,"i",15),t.qZA()(),t.TgZ(27,"p",16),t._uU(28),t.qZA(),t.TgZ(29,"p",13),t._uU(30,"Formations disponibles"),t.qZA()(),t.TgZ(31,"div",7)(32,"div",8)(33,"h3",9),t._uU(34,"Sessions"),t.qZA(),t.TgZ(35,"div",17),t._UZ(36,"i",18),t.qZA()(),t.TgZ(37,"p",19),t._uU(38),t.qZA(),t.TgZ(39,"p",13),t._uU(40,"Sessions planifi\xe9es"),t.qZA()(),t.TgZ(41,"div",7)(42,"div",8)(43,"h3",9),t._uU(44,"Certifications"),t.qZA(),t.TgZ(45,"div",20),t._UZ(46,"i",21),t.qZA()(),t.TgZ(47,"p",22),t._uU(48),t.qZA(),t.TgZ(49,"p",13),t._uU(50,"Certifications d\xe9livr\xe9es"),t.qZA()()(),t.TgZ(51,"div",23)(52,"div",7)(53,"div",8)(54,"h3",9),t._uU(55,"Modules"),t.qZA(),t.TgZ(56,"div",24),t._UZ(57,"i",25),t.qZA()(),t.TgZ(58,"p",26),t._uU(59),t.qZA(),t.TgZ(60,"p",13),t._uU(61,"Modules de formation"),t.qZA()(),t.TgZ(62,"div",7)(63,"div",8)(64,"h3",9),t._uU(65,"Quizs"),t.qZA(),t.TgZ(66,"div",27),t._UZ(67,"i",28),t.qZA()(),t.TgZ(68,"p",29),t._uU(69),t.qZA(),t.TgZ(70,"p",13),t._uU(71,"Quizs cr\xe9\xe9s"),t.qZA()(),t.TgZ(72,"div",7)(73,"div",8)(74,"h3",9),t._uU(75,"Tentatives"),t.qZA(),t.TgZ(76,"div",30),t._UZ(77,"i",31),t.qZA()(),t.TgZ(78,"p",32),t._uU(79),t.qZA(),t.TgZ(80,"p",13),t._uU(81,"Tentatives de quiz"),t.qZA()()(),t.TgZ(82,"div",33)(83,"div",34)(84,"h3",35),t._uU(85,"Formations par cat\xe9gorie"),t.qZA(),t.YNc(86,Q,4,0,"div",36),t.YNc(87,I,3,0,"div",37),t.qZA(),t.TgZ(88,"div",34)(89,"h3",35),t._uU(90,"Tentatives de quiz par mois"),t.qZA(),t.YNc(91,J,4,0,"div",36),t.YNc(92,N,3,0,"div",37),t.qZA(),t.TgZ(93,"div",34)(94,"h3",35),t._uU(95,"Distribution des \xe9valuations"),t.qZA(),t.YNc(96,E,4,0,"div",36),t.YNc(97,S,3,0,"div",37),t.qZA(),t.TgZ(98,"div",34)(99,"h3",35),t._uU(100,"Formations les plus populaires"),t.qZA(),t.YNc(101,D,4,0,"div",36),t.YNc(102,Y,3,0,"div",37),t.qZA()(),t.YNc(103,L,2,0,"div",38),t.YNc(104,G,7,0,"div",39),t.qZA()),2&e&&(t.xp6(18),t.Oqu(o.dashboardData&&o.dashboardData.totalUsers||0),t.xp6(10),t.Oqu(o.dashboardData&&o.dashboardData.totalFormations||0),t.xp6(10),t.Oqu(o.dashboardData&&o.dashboardData.totalSessions||0),t.xp6(10),t.Oqu(o.dashboardData&&o.dashboardData.totalCertifications||0),t.xp6(11),t.Oqu(o.dashboardData&&o.dashboardData.totalModules||0),t.xp6(10),t.Oqu(o.dashboardData&&o.dashboardData.totalQuizzes||0),t.xp6(10),t.Oqu(o.dashboardData&&o.dashboardData.totalQuizAttempts||0),t.xp6(7),t.Q6J("ngIf",!o.dashboardData||!o.dashboardData.formationsByCategory||0===o.dashboardData.formationsByCategory.length),t.xp6(1),t.Q6J("ngIf",o.dashboardData&&o.dashboardData.formationsByCategory&&o.dashboardData.formationsByCategory.length>0),t.xp6(4),t.Q6J("ngIf",!o.dashboardData||!o.dashboardData.quizAttemptsOverTime||0===o.dashboardData.quizAttemptsOverTime.length),t.xp6(1),t.Q6J("ngIf",o.dashboardData&&o.dashboardData.quizAttemptsOverTime&&o.dashboardData.quizAttemptsOverTime.length>0),t.xp6(4),t.Q6J("ngIf",!o.dashboardData||!o.dashboardData.feedbackRatings||0===o.dashboardData.feedbackRatings.length),t.xp6(1),t.Q6J("ngIf",o.dashboardData&&o.dashboardData.feedbackRatings&&o.dashboardData.feedbackRatings.length>0),t.xp6(4),t.Q6J("ngIf",!o.dashboardData||!o.dashboardData.topFormations||0===o.dashboardData.topFormations.length),t.xp6(1),t.Q6J("ngIf",o.dashboardData&&o.dashboardData.topFormations&&o.dashboardData.topFormations.length>0),t.xp6(1),t.Q6J("ngIf",o.loading),t.xp6(1),t.Q6J("ngIf",o.error))},dependencies:[l.O5]}),n})();var w=d(7798),v=d(5952),y=d(5061),m=d(5412),C=d(9140),s=d(433),H=d(7334);function K(n,r){1&n&&t._UZ(0,"i",11)}function $(n,r){1&n&&(t.O4$(),t.TgZ(0,"svg",12),t._UZ(1,"circle",13)(2,"path",14),t.qZA())}function R(n,r){if(1&n&&(t.TgZ(0,"option",30),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e)}}function B(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",31)(1,"app-training-card",32),t.NdJ("edit",function(i){t.CHM(e);const a=t.oxw(2);return t.KtG(a.handleEditTraining(i))})("delete",function(){const a=t.CHM(e).$implicit,c=t.oxw(2);return t.KtG(c.deleteFormation(a.id))})("addSession",function(i){t.CHM(e);const a=t.oxw(2);return t.KtG(a.handleAddSession(i))}),t.qZA()()}if(2&n){const e=r.$implicit;t.xp6(1),t.Q6J("training",e)("canEdit",!0)("canDelete",!0)}}function V(n,r){1&n&&(t.TgZ(0,"div",33)(1,"p",34),t._uU(2,"Aucune formation ne correspond \xe0 votre recherche."),t.qZA()())}function W(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",15)(1,"div",16)(2,"div",17)(3,"div",18),t.O4$(),t.TgZ(4,"svg",19),t._UZ(5,"path",20),t.qZA()(),t.kcU(),t.TgZ(6,"input",21),t.NdJ("ngModelChange",function(i){t.CHM(e);const a=t.oxw();return t.KtG(a.searchTerm=i)})("input",function(i){t.CHM(e);const a=t.oxw();return t.KtG(a.onSearch(i))}),t.qZA()(),t.TgZ(7,"div",22)(8,"div",18),t.O4$(),t.TgZ(9,"svg",19),t._UZ(10,"path",23),t.qZA()(),t.kcU(),t.TgZ(11,"select",24),t.NdJ("ngModelChange",function(i){t.CHM(e);const a=t.oxw();return t.KtG(a.filterCategory=i)})("change",function(i){t.CHM(e);const a=t.oxw();return t.KtG(a.onFilterCategory(i))}),t.TgZ(12,"option",25),t._uU(13,"Toutes les cat\xe9gories"),t.qZA(),t.YNc(14,R,2,2,"option",26),t.qZA()()(),t.TgZ(15,"div",27),t.YNc(16,B,2,3,"div",28),t.qZA(),t.YNc(17,V,3,0,"div",29),t.qZA()}if(2&n){const e=t.oxw();t.xp6(6),t.Q6J("ngModel",e.searchTerm),t.xp6(5),t.Q6J("ngModel",e.filterCategory),t.xp6(3),t.Q6J("ngForOf",e.categories),t.xp6(2),t.Q6J("ngForOf",e.filteredTrainings),t.xp6(1),t.Q6J("ngIf",0===e.filteredTrainings.length&&!e.isLoading)}}let X=(()=>{class n{constructor(e,o,i,a){this.formationService=e,this.dialog=o,this.toaster=i,this.router=a,this.categories=w.y,this.trainings=[],this.searchTerm="",this.isFormOpen=!1,this.currentTraining=null,this.filterCategory="",this.isLoading=!1}get filteredTrainings(){return this.trainings.filter(e=>e.title.toLowerCase().includes(this.searchTerm.toLowerCase())&&(""===this.filterCategory||e.category===this.filterCategory))}onSearch(e){this.searchTerm=e.target.value}onFilterCategory(e){this.filterCategory=e.target.value}handleEditTraining(e){this.router.navigate(["/admin/formations/edit",e])}handleDeleteTraining(e){}handleAddSession(e){this.dialog.open(v.U,{data:{formationId:e}}).afterClosed().subscribe(i=>{i&&this.fetchFormations()})}ngOnInit(){this.fetchFormations()}fetchFormations(){this.isLoading=!0,this.formationService.getFormations().subscribe(e=>{this.trainings=e,this.isLoading=!1},e=>{this.isLoading=!1,console.error("Erreur lors de la r\xe9cup\xe9ration des formations",e)})}deleteFormation(e){window.confirm("\xcates-vous s\xfbr de vouloir supprimer cette formation ?")&&this.formationService.deleteFormation(e).subscribe(()=>{this.fetchFormations(),this.toaster.showSuccess("Formation supprim\xe9e","La formation a \xe9t\xe9 supprim\xe9e avec succ\xe8s.")},o=>{console.error("Erreur lors de la suppression de la formation",o),this.toaster.showError("Erreur","Une erreur est survenue lors de la suppression de la formation.")})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(y.B),t.Y36(m.uw),t.Y36(C.M),t.Y36(p.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-training"]],decls:15,vars:5,consts:[[1,"animate-fade-in","container","mx-auto","p-6"],[1,"flex","justify-between","items-center","mb-8"],[1,"text-3xl","font-bold","text-gray-800"],[1,"flex","gap-3"],[1,"px-4","py-2","bg-gray-100","text-gray-700","rounded-lg","shadow-sm","text-sm","font-medium","hover:bg-gray-200","transition-colors","flex","items-center","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled","click"],["class","fa-solid fa-rotate-right mr-2",4,"ngIf"],["class","animate-spin h-4 w-4 mr-2","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",4,"ngIf"],["routerLink","/admin/formations/create",1,"px-4","py-2","bg-primary","text-white","rounded-lg","shadow-sm","text-sm","font-medium","hover:bg-primary-dark","flex","items-center","space-x-2","transition-colors"],["fill","currentColor","viewBox","0 0 20 20",1,"w-5","h-5"],["fill-rule","evenodd","d","M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z","clip-rule","evenodd"],["class","space-y-6",4,"ngIf"],[1,"fa-solid","fa-rotate-right","mr-2"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","h-4","w-4","mr-2"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],[1,"space-y-6"],[1,"flex","flex-col","md:flex-row","space-y-3","md:space-y-0","md:space-x-4"],[1,"relative","flex-grow"],[1,"absolute","inset-y-0","left-0","pl-3","flex","items-center","pointer-events-none"],["fill","currentColor","viewBox","0 0 20 20",1,"w-5","h-5","text-gray-400"],["fill-rule","evenodd","d","M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z","clip-rule","evenodd"],["type","text","placeholder","Rechercher une formation...",1,"pl-10","w-full","p-3","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-primary","focus:border-transparent",3,"ngModel","ngModelChange","input"],[1,"relative"],["fill-rule","evenodd","d","M3 3a1 1 0 011-1h12a1 1 0 011 1v3a1 1 0 01-.293.707L12 11.414V15a1 1 0 01-1 1h-2a1 1 0 01-1-1v-3.586L3.293 6.707A1 1 0 013 6V3z","clip-rule","evenodd"],[1,"h-full","w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","appearance-none","bg-gray-50","text-gray-900","pr-10",3,"ngModel","ngModelChange","change"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-6"],["class","col-span-1",4,"ngFor","ngForOf"],["class","text-center py-10",4,"ngIf"],[3,"value"],[1,"col-span-1"],[3,"training","canEdit","canDelete","edit","delete","addSession"],[1,"text-center","py-10"],[1,"text-gray-500","text-lg"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h1",2),t._uU(3,"Gestion des formations"),t.qZA(),t.TgZ(4,"div",3)(5,"button",4),t.NdJ("click",function(){return o.fetchFormations()}),t.YNc(6,K,1,0,"i",5),t.YNc(7,$,3,0,"svg",6),t._uU(8),t.qZA(),t.TgZ(9,"button",7),t.O4$(),t.TgZ(10,"svg",8),t._UZ(11,"path",9),t.qZA(),t.kcU(),t.TgZ(12,"span"),t._uU(13,"Nouvelle formation"),t.qZA()()()(),t.YNc(14,W,18,5,"div",10),t.qZA()),2&e&&(t.xp6(5),t.Q6J("disabled",o.isLoading),t.xp6(1),t.Q6J("ngIf",!o.isLoading),t.xp6(1),t.Q6J("ngIf",o.isLoading),t.xp6(1),t.hij(" ",o.isLoading?"Actualisation...":"Actualiser"," "),t.xp6(6),t.Q6J("ngIf",!o.isFormOpen))},dependencies:[l.sg,l.O5,p.rH,s.YN,s.Kr,s.Fj,s.EJ,s.JJ,s.On,H.Q],styles:[".animate-fade-in[_ngcontent-%COMP%]{animation:fadeIn .5s ease-in}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}.primary[_ngcontent-%COMP%]{background-color:#4a90e2}.primary-dark[_ngcontent-%COMP%]{background-color:#357abd}.form-input[_ngcontent-%COMP%]{width:100%;border-radius:var(--radius);border-width:1px;--tw-border-opacity: 1;border-color:rgb(209 213 219 / var(--tw-border-opacity, 1));padding:.75rem}.form-input[_ngcontent-%COMP%]:focus{border-color:transparent;--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000);--tw-ring-color: hsl(var(--primary))}"]}),n})();var x=d(7297);function tt(n,r){1&n&&(t.TgZ(0,"div",19),t._uU(1," This field is required "),t.qZA())}function et(n,r){1&n&&(t.O4$(),t.TgZ(0,"svg",20),t._UZ(1,"circle",21)(2,"path",22),t.qZA())}const ot=function(n){return{"border-red-300 focus:ring-red-500 focus:border-red-500":n}};let nt=(()=>{class n{constructor(e,o,i){this.dialogRef=e,this.fb=o,this.data=i,this.groupService=(0,t.f3M)(x.l),this.isLoading=!1}ngOnInit(){this.form=this.fb.group({name:["",s.kI.required]})}onSubmit(){console.log(this.form.value,this.form.valid),this.form.valid&&(this.isLoading=!0,this.groupService.createGroup(this.form.value).subscribe({next:e=>{this.dialogRef.close(e)},error:e=>{console.error(e)},complete:()=>{this.isLoading=!1}}))}onCancel(){this.dialogRef.close()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(m.so),t.Y36(s.qu),t.Y36(m.WI))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-create-group-dialog"]],decls:24,vars:8,consts:[[1,"bg-white","rounded-lg","shadow-xl","max-w-4xl","w-full","mx-auto"],[1,"px-8","py-5","border-b","border-gray-200"],[1,"flex","items-center","justify-between"],[1,"text-2xl","font-semibold","text-gray-900"],[1,"text-gray-400","hover:text-gray-500","transition-colors",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"p-8"],[3,"formGroup","ngSubmit"],[1,"space-y-8"],[1,"grid","grid-cols-1","gap-6"],["for","name",1,"block","text-base","font-medium","text-gray-700","mb-2"],[1,"mt-1"],["type","text","id","name","formControlName","name","placeholder","Enter group name",1,"block","w-full","px-4","py-3","text-base","border","border-gray-300","rounded-md","shadow-sm","focus:ring-2","focus:ring-primary","focus:border-primary","text-black",3,"ngClass"],["class","mt-2 text-sm text-red-600",4,"ngIf"],[1,"mt-8","flex","justify-end","space-x-4"],["type","button",1,"inline-flex","justify-center","px-6","py-3","text-base","font-medium","text-gray-700","bg-white","border","border-gray-300","rounded-md","shadow-sm","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-primary",3,"click"],["type","submit",1,"inline-flex","justify-center","px-6","py-3","text-base","font-medium","text-white","bg-primary","border","border-transparent","rounded-md","shadow-sm","hover:bg-primary-dark","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-primary","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled"],["class","animate-spin -ml-1 mr-3 h-5 w-5 text-white","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",4,"ngIf"],[1,"mt-2","text-sm","text-red-600"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","-ml-1","mr-3","h-5","w-5","text-white"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),t._uU(4,"Create New Group"),t.qZA(),t.TgZ(5,"button",4),t.NdJ("click",function(){return o.onCancel()}),t.O4$(),t.TgZ(6,"svg",5),t._UZ(7,"path",6),t.qZA()()()(),t.kcU(),t.TgZ(8,"div",7)(9,"form",8),t.NdJ("ngSubmit",function(){return o.onSubmit()}),t.TgZ(10,"div",9)(11,"div",10)(12,"div")(13,"label",11),t._uU(14,"Group Name"),t.qZA(),t.TgZ(15,"div",12),t._UZ(16,"input",13),t.YNc(17,tt,2,0,"div",14),t.qZA()()()(),t.TgZ(18,"div",15)(19,"button",16),t.NdJ("click",function(){return o.onCancel()}),t._uU(20," Cancel "),t.qZA(),t.TgZ(21,"button",17),t.YNc(22,et,3,0,"svg",18),t._uU(23),t.qZA()()()()()),2&e){let i,a;t.xp6(9),t.Q6J("formGroup",o.form),t.xp6(7),t.Q6J("ngClass",t.VKq(6,ot,(null==(i=o.form.get("name"))?null:i.invalid)&&(null==(i=o.form.get("name"))?null:i.touched))),t.xp6(1),t.Q6J("ngIf",(null==(a=o.form.get("name"))?null:a.invalid)&&(null==(a=o.form.get("name"))?null:a.touched)),t.xp6(4),t.Q6J("disabled",!o.form.valid||o.isLoading),t.xp6(1),t.Q6J("ngIf",o.isLoading),t.xp6(1),t.hij(" ",o.isLoading?"Creating...":"Create Group"," ")}},dependencies:[l.mk,l.O5,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u],styles:["[_nghost-%COMP%]{display:block}.mat-dialog-container[_ngcontent-%COMP%]{padding:0!important;border-radius:.5rem;overflow:hidden}input[_ngcontent-%COMP%]:focus, button[_ngcontent-%COMP%]:focus{outline:none;box-shadow:0 0 0 2px #6366f133}.transform[_ngcontent-%COMP%]{transition-property:transform;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.2s}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.animate-spin[_ngcontent-%COMP%]{animation:spin 1s linear infinite}.form-checkbox[_ngcontent-%COMP%]{border-color:#d1d5db;border-radius:.25rem;transition:all .2s ease-in-out}.form-checkbox[_ngcontent-%COMP%]:checked{background-color:#2563eb;border-color:#2563eb}.form-checkbox[_ngcontent-%COMP%]:focus{outline:none;box-shadow:0 0 0 3px #2563eb1a}input[type=text][_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{transition:all .2s ease-in-out}input[type=text][_ngcontent-%COMP%]:focus, textarea[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 3px #2563eb1a}input[type=text].border-red-500[_ngcontent-%COMP%], textarea.border-red-500[_ngcontent-%COMP%]{border-color:#ef4444}input[type=text].border-red-500[_ngcontent-%COMP%]:focus, textarea.border-red-500[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 3px #ef44441a}"]}),n})();var _=d(8843);function it(n,r){if(1&n&&(t.TgZ(0,"div",32),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij(" ",e.getErrorMessage("userName")," ")}}function rt(n,r){if(1&n&&(t.TgZ(0,"div",32),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij(" ",e.getErrorMessage("email")," ")}}function at(n,r){if(1&n&&(t.TgZ(0,"div",21),t._UZ(1,"input",33),t.TgZ(2,"label",34),t._uU(3),t.qZA()()),2&n){const e=r.$implicit;t.xp6(1),t.Q6J("value",e)("id","role-"+e),t.xp6(1),t.Q6J("for","role-"+e),t.xp6(1),t.hij(" ",e," ")}}function st(n,r){if(1&n&&(t.TgZ(0,"div",32),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij(" ",e.getErrorMessage("role")," ")}}function ct(n,r){1&n&&(t.O4$(),t.TgZ(0,"svg",35),t._UZ(1,"circle",36)(2,"path",37),t.qZA())}const M=function(n){return{"border-red-300 focus:ring-red-500 focus:border-red-500":n}};let lt=(()=>{class n{constructor(e,o,i,a){this.dialogRef=e,this.fb=o,this.groupService=i,this.data=a,this.isLoading=!1,this.roles=_.p,this.UserRole=_.i}ngOnInit(){this.form=this.fb.group({userName:["",[s.kI.required,s.kI.minLength(3)]],email:["",[s.kI.required,s.kI.email]],role:["",s.kI.required],groupId:[this.data.selectedGroup?.id,s.kI.required]})}onSubmit(){if(this.form.valid){this.isLoading=!0;const e=this.form.value;this.groupService.createUser({username:e.userName,email:e.email,role:e.role,groupId:this.data.selectedGroup.id}).subscribe({next:i=>{this.isLoading=!1,this.dialogRef.close(i)},error:i=>{this.isLoading=!1,console.error("Error creating user:",i)}})}}onCancel(){this.dialogRef.close()}getErrorMessage(e){const o=this.form.get(e);if(!o?.errors)return"";const i=o.errors;return i.required?"This field is required":i.email?"Invalid email address":i.minlength?`Minimum length is ${i.minlength.requiredLength} characters`:"Invalid value"}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(m.so),t.Y36(s.qu),t.Y36(x.l),t.Y36(m.WI))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-create-user-dialog"]],decls:46,vars:15,consts:[[1,"bg-white","rounded-lg","shadow-xl","max-w-4xl","w-full","mx-auto"],[1,"px-8","py-5","border-b","border-gray-200"],[1,"flex","items-center","justify-between"],[1,"text-2xl","font-semibold","text-gray-900"],[1,"text-gray-400","hover:text-gray-500","transition-colors",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"p-8"],[3,"formGroup","ngSubmit"],[1,"space-y-6"],["for","userName",1,"block","text-base","font-medium","text-gray-700","mb-2"],[1,"mt-1"],["type","text","id","userName","formControlName","userName","placeholder","Enter username",1,"block","w-full","px-4","py-3","text-base","border","border-gray-300","rounded-md","shadow-sm","focus:ring-2","focus:ring-primary","focus:border-primary","text-black",3,"ngClass"],["class","mt-2 text-sm text-red-600",4,"ngIf"],["for","email",1,"block","text-base","font-medium","text-gray-700","mb-2"],["type","email","id","email","formControlName","email","placeholder","Enter email",1,"block","w-full","px-4","py-3","text-base","border","border-gray-300","rounded-md","shadow-sm","focus:ring-2","focus:ring-primary","focus:border-primary","text-black",3,"ngClass"],[1,"block","text-base","font-medium","text-gray-700","mb-2"],[1,"mt-1","space-y-2"],[1,"grid","grid-cols-2","gap-4"],["class","flex items-center",4,"ngFor","ngForOf"],[1,"bg-gray-50","p-4","rounded-lg"],[1,"flex","items-center"],[1,"flex-shrink-0"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"h-5","w-5","text-gray-400"],["fill-rule","evenodd","d","M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z","clip-rule","evenodd"],[1,"ml-3"],[1,"text-sm","font-medium","text-gray-900"],[1,"text-sm","text-gray-500"],[1,"mt-8","flex","justify-end","space-x-4"],["type","button",1,"inline-flex","justify-center","px-6","py-3","text-base","font-medium","text-gray-700","bg-white","border","border-gray-300","rounded-md","shadow-sm","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-primary",3,"click"],["type","submit",1,"inline-flex","justify-center","px-6","py-3","text-base","font-medium","text-white","bg-primary","border","border-transparent","rounded-md","shadow-sm","hover:bg-primary-dark","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-primary","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled"],["class","animate-spin -ml-1 mr-3 h-5 w-5 text-white","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",4,"ngIf"],[1,"mt-2","text-sm","text-red-600"],["type","radio","formControlName","role",1,"h-4","w-4","text-primary","border-gray-300","focus:ring-primary",3,"value","id"],[1,"ml-2","text-gray-700",3,"for"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","-ml-1","mr-3","h-5","w-5","text-white"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),t._uU(4,"Create New User"),t.qZA(),t.TgZ(5,"button",4),t.NdJ("click",function(){return o.onCancel()}),t.O4$(),t.TgZ(6,"svg",5),t._UZ(7,"path",6),t.qZA()()()(),t.kcU(),t.TgZ(8,"div",7)(9,"form",8),t.NdJ("ngSubmit",function(){return o.onSubmit()}),t.TgZ(10,"div",9)(11,"div")(12,"label",10),t._uU(13,"Username"),t.qZA(),t.TgZ(14,"div",11),t._UZ(15,"input",12),t.YNc(16,it,2,1,"div",13),t.qZA()(),t.TgZ(17,"div")(18,"label",14),t._uU(19,"Email"),t.qZA(),t.TgZ(20,"div",11),t._UZ(21,"input",15),t.YNc(22,rt,2,1,"div",13),t.qZA()(),t.TgZ(23,"div")(24,"label",16),t._uU(25,"Role"),t.qZA(),t.TgZ(26,"div",17)(27,"div",18),t.YNc(28,at,4,4,"div",19),t.qZA(),t.YNc(29,st,2,1,"div",13),t.qZA()(),t.TgZ(30,"div",20)(31,"div",21)(32,"div",22),t.O4$(),t.TgZ(33,"svg",23),t._UZ(34,"path",24),t.qZA()(),t.kcU(),t.TgZ(35,"div",25)(36,"h3",26),t._uU(37,"Selected Group"),t.qZA(),t.TgZ(38,"p",27),t._uU(39),t.qZA()()()()(),t.TgZ(40,"div",28)(41,"button",29),t.NdJ("click",function(){return o.onCancel()}),t._uU(42," Cancel "),t.qZA(),t.TgZ(43,"button",30),t.YNc(44,ct,3,0,"svg",31),t._uU(45),t.qZA()()()()()),2&e){let i,a,c,u,g;t.xp6(9),t.Q6J("formGroup",o.form),t.xp6(6),t.Q6J("ngClass",t.VKq(11,M,(null==(i=o.form.get("userName"))?null:i.invalid)&&(null==(i=o.form.get("userName"))?null:i.touched))),t.xp6(1),t.Q6J("ngIf",(null==(a=o.form.get("userName"))?null:a.invalid)&&(null==(a=o.form.get("userName"))?null:a.touched)),t.xp6(5),t.Q6J("ngClass",t.VKq(13,M,(null==(c=o.form.get("email"))?null:c.invalid)&&(null==(c=o.form.get("email"))?null:c.touched))),t.xp6(1),t.Q6J("ngIf",(null==(u=o.form.get("email"))?null:u.invalid)&&(null==(u=o.form.get("email"))?null:u.touched)),t.xp6(6),t.Q6J("ngForOf",o.roles),t.xp6(1),t.Q6J("ngIf",(null==(g=o.form.get("role"))?null:g.invalid)&&(null==(g=o.form.get("role"))?null:g.touched)),t.xp6(10),t.Oqu(o.data.selectedGroup.name||"No group selected"),t.xp6(4),t.Q6J("disabled",!o.form.valid||o.isLoading),t.xp6(1),t.Q6J("ngIf",o.isLoading),t.xp6(1),t.hij(" ",o.isLoading?"Creating...":"Create User"," ")}},dependencies:[l.mk,l.sg,l.O5,s._Y,s.Fj,s._,s.JJ,s.JL,s.sg,s.u],styles:["[_nghost-%COMP%]{display:block}.mat-dialog-container[_ngcontent-%COMP%]{padding:0!important;border-radius:.5rem;overflow:hidden}.form-checkbox[_ngcontent-%COMP%]{height:1rem;width:1rem;border-radius:.25rem;--tw-border-opacity: 1;border-color:rgb(209 213 219 / var(--tw-border-opacity, 1));color:hsl(var(--primary));transition:all .2s ease-in-out}.form-checkbox[_ngcontent-%COMP%]:checked{border-color:hsl(var(--primary));background-color:hsl(var(--primary))}.form-checkbox[_ngcontent-%COMP%]:focus{outline:2px solid transparent;outline-offset:2px;--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000);--tw-ring-color: hsl(var(--primary));--tw-ring-opacity: .5}input[_ngcontent-%COMP%]:focus, button[_ngcontent-%COMP%]:focus{outline:none;box-shadow:0 0 0 2px rgba(var(--primary-rgb),.2)}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.animate-spin[_ngcontent-%COMP%]{animation:spin 1s linear infinite}"]}),n})();var dt=d(8386);function ut(n,r){1&n&&(t.O4$(),t.kcU(),t.TgZ(0,"div",12),t._UZ(1,"div",13),t.qZA())}function gt(n,r){if(1&n){const e=t.EpF();t.O4$(),t.kcU(),t.TgZ(0,"div",14)(1,"strong",15),t._uU(2,"Error!"),t.qZA(),t.TgZ(3,"span",16),t._uU(4),t.qZA(),t.TgZ(5,"button",17),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.fetchGroups())}),t.O4$(),t.TgZ(6,"svg",18),t._UZ(7,"path",19),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(4),t.Oqu(e.error)}}function pt(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",26),t.NdJ("click",function(){const a=t.CHM(e).$implicit,c=t.oxw(2);return t.KtG(c.selectGroup(a))}),t.TgZ(1,"div",27)(2,"h3",28),t._uU(3),t.qZA(),t.TgZ(4,"span",29),t._uU(5),t.qZA()()()}if(2&n){const e=r.$implicit,o=t.oxw(2);t.ekj("bg-blue-50",(null==o.selectedGroup?null:o.selectedGroup.id)===e.id),t.xp6(3),t.Oqu(e.name),t.xp6(2),t.hij(" ",e.users.length," users ")}}const mt=function(n,r,e,o,i,a){return{"bg-purple-100 text-purple-800":n,"bg-blue-100 text-blue-800":r,"bg-green-100 text-green-800":e,"bg-yellow-100 text-yellow-800":o,"bg-red-100 text-red-800":i,"bg-gray-100 text-gray-800":a}},_t=function(n,r,e,o,i,a){return{"bg-purple-500":n,"bg-blue-500":r,"bg-green-500":e,"bg-yellow-500":o,"bg-red-500":i,"bg-gray-500":a}},ft=function(n,r){return{"bg-green-100 text-green-800":n,"bg-red-100 text-red-800":r}},ht=function(n,r){return{"bg-green-500":n,"bg-red-500":r}},xt=function(n,r){return{"text-green-600 hover:text-green-900":n,"text-red-600 hover:text-red-900":r}};function bt(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"tr",43)(1,"td",44)(2,"div",45)(3,"div",46),t._uU(4),t.qZA(),t.TgZ(5,"div",47)(6,"div",48),t._uU(7),t.qZA()()()(),t.TgZ(8,"td",44)(9,"div",49),t._uU(10),t.qZA()(),t.TgZ(11,"td",44)(12,"span",50),t._UZ(13,"span",51),t._uU(14),t.qZA()(),t.TgZ(15,"td",44)(16,"span",50),t._UZ(17,"span",51),t._uU(18),t.qZA()(),t.TgZ(19,"td",52)(20,"div",53)(21,"button",54),t.NdJ("click",function(){const a=t.CHM(e).$implicit,c=t.oxw(3);return t.KtG(c.toggleUserStatus(a))}),t.O4$(),t.TgZ(22,"svg",55),t._UZ(23,"path",56),t.qZA()(),t.kcU(),t.TgZ(24,"button",57),t.NdJ("click",function(){const a=t.CHM(e).$implicit,c=t.oxw(3);return t.KtG(c.deleteUser(a))}),t.O4$(),t.TgZ(25,"svg",55),t._UZ(26,"path",58),t.qZA()()()()()}if(2&n){const e=r.$implicit;t.xp6(4),t.hij(" ",e.userName.charAt(0).toUpperCase()," "),t.xp6(3),t.Oqu(e.userName),t.xp6(3),t.Oqu(e.email),t.xp6(2),t.Q6J("ngClass",t.HTZ(11,mt,"Administrator"===(null==e.roles?null:e.roles[0]),"Manager"===(null==e.roles?null:e.roles[0]),"TeamLeader"===(null==e.roles?null:e.roles[0]),"PostLeader"===(null==e.roles?null:e.roles[0]),"QualityAgent"===(null==e.roles?null:e.roles[0]),"Employee"===(null==e.roles?null:e.roles[0]))),t.xp6(1),t.Q6J("ngClass",t.HTZ(18,_t,"Administrator"===(null==e.roles?null:e.roles[0]),"Manager"===(null==e.roles?null:e.roles[0]),"TeamLeader"===(null==e.roles?null:e.roles[0]),"PostLeader"===(null==e.roles?null:e.roles[0]),"QualityAgent"===(null==e.roles?null:e.roles[0]),"Employee"===(null==e.roles?null:e.roles[0]))),t.xp6(1),t.hij(" ",null==e.roles?null:e.roles[0]," "),t.xp6(2),t.Q6J("ngClass",t.WLB(25,ft,e.isActive,!e.isActive)),t.xp6(1),t.Q6J("ngClass",t.WLB(28,ht,e.isActive,!e.isActive)),t.xp6(1),t.hij(" ",e.isActive?"Actif":"Inactif"," "),t.xp6(3),t.Q6J("ngClass",t.WLB(31,xt,!e.isActive,e.isActive)),t.xp6(2),t.uIk("d",e.isActive?"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636":"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z")}}function vt(n,r){1&n&&(t.TgZ(0,"tr")(1,"td",59)(2,"div",60),t.O4$(),t.TgZ(3,"svg",61),t._UZ(4,"path",62),t.qZA(),t.kcU(),t.TgZ(5,"p",63),t._uU(6,"No users in this group"),t.qZA()()()())}function yt(n,r){if(1&n&&(t.TgZ(0,"div",30)(1,"div",31)(2,"div",27)(3,"div")(4,"h2",2),t._uU(5),t.qZA()(),t.TgZ(6,"div",32)(7,"span",33),t._uU(8," Active "),t.qZA(),t.TgZ(9,"span",34),t._uU(10),t.qZA()()()(),t.TgZ(11,"div",35)(12,"div",36)(13,"table",37)(14,"thead",38)(15,"tr")(16,"th",39),t._uU(17," User"),t.qZA(),t.TgZ(18,"th",39),t._uU(19," Email"),t.qZA(),t.TgZ(20,"th",39),t._uU(21," Role"),t.qZA(),t.TgZ(22,"th",39),t._uU(23," Status"),t.qZA(),t.TgZ(24,"th",39),t._uU(25," Actions"),t.qZA()()(),t.TgZ(26,"tbody",40),t.YNc(27,bt,27,34,"tr",41),t.YNc(28,vt,7,0,"tr",42),t.qZA()()()()()),2&n){const e=t.oxw(2);t.xp6(5),t.Oqu(e.selectedGroup.name),t.xp6(5),t.hij(" ",e.selectedGroup.count," Users "),t.xp6(17),t.Q6J("ngForOf",e.selectedGroup.users),t.xp6(1),t.Q6J("ngIf",0===e.selectedGroup.users.length)}}function Ct(n,r){if(1&n&&(t.O4$(),t.kcU(),t.TgZ(0,"div",20)(1,"div",21)(2,"h2",22),t._uU(3,"Groups"),t.qZA(),t.TgZ(4,"div",23),t.YNc(5,pt,6,4,"div",24),t.qZA()(),t.YNc(6,yt,29,4,"div",25),t.qZA()),2&n){const e=t.oxw();t.xp6(5),t.Q6J("ngForOf",e.groups),t.xp6(1),t.Q6J("ngIf",e.selectedGroup)}}let Zt=(()=>{class n{constructor(e,o,i,a){this.groupService=e,this.userService=o,this.dialog=i,this.toaster=a,this.groups=[],this.selectedGroup=null,this.showCreateUserModal=!1,this.loading=!0,this.error=null}ngOnInit(){this.fetchGroups()}fetchGroups(){this.loading=!0,this.error=null,this.groupService.getGroups().subscribe({next:e=>{this.groups=e,e.length>0&&(this.selectedGroup=e[0]),this.loading=!1},error:e=>{this.error="Failed to load groups. Please try again later.",this.loading=!1,console.error("Error fetching groups:",e)}})}selectGroup(e){this.selectedGroup=e}openCreateUserModal(){this.dialog.open(lt,{data:{selectedGroup:this.selectedGroup},width:"1000px"}).afterClosed().subscribe(o=>{o&&(console.log(o),this.groups.find(i=>i.id===this.selectedGroup?.id)?.users.push(o))})}openCreateGroupModal(){this.dialog.open(nt).afterClosed().subscribe(o=>{o&&(this.groups.push(o),this.selectedGroup=o)})}toggleUserStatus(e){confirm(`\xcates-vous s\xfbr de vouloir ${e.isActive?"d\xe9sactiver":"activer"} cet utilisateur ?`)&&(e.isActive?this.userService.disableUser(e.id).subscribe({next:()=>{e.isActive=!1,this.toaster.showSuccess("Succ\xe8s","L'utilisateur a \xe9t\xe9 d\xe9sactiv\xe9 avec succ\xe8s.")},error:a=>{console.error("Erreur lors de la d\xe9sactivation de l'utilisateur:",a),this.toaster.showError("Erreur","Erreur lors de la d\xe9sactivation de l'utilisateur.")}}):this.userService.enableUser(e.id).subscribe({next:()=>{e.isActive=!0,this.toaster.showSuccess("Succ\xe8s","L'utilisateur a \xe9t\xe9 activ\xe9 avec succ\xe8s.")},error:a=>{console.error("Erreur lors de l'activation de l'utilisateur:",a),this.toaster.showError("Erreur","Erreur lors de l'activation de l'utilisateur.")}}))}deleteUser(e){confirm(`\xcates-vous s\xfbr de vouloir supprimer d\xe9finitivement l'utilisateur ${e.userName} ?`)&&this.userService.deleteUser(e.id).subscribe({next:()=>{this.selectedGroup&&(this.selectedGroup.users=this.selectedGroup.users.filter(o=>o.id!==e.id)),this.toaster.showSuccess("Succ\xe8s","L'utilisateur a \xe9t\xe9 supprim\xe9 avec succ\xe8s.")},error:o=>{console.error("Erreur lors de la suppression de l'utilisateur:",o),this.toaster.showError("Erreur","Erreur lors de la suppression de l'utilisateur.")}})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(x.l),t.Y36(dt.K),t.Y36(m.uw),t.Y36(C.M))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-employees"]],decls:16,vars:3,consts:[[1,"container","mx-auto","p-2"],[1,"flex","justify-between","items-center","mb-6"],[1,"text-2xl","font-bold","text-gray-800"],[1,"flex","gap-4"],[1,"px-4","py-2","bg-blue-600","text-white","rounded-lg","hover:bg-blue-700","transition-colors","flex","items-center","gap-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"h-5","w-5"],["d","M8 9a3 3 0 100-6 3 3 0 000 6zM8 11a6 6 0 016 6H2a6 6 0 016-6zM16 7a1 1 0 10-2 0v1h-1a1 1 0 100 2h1v1a1 1 0 102 0v-1h1a1 1 0 100-2h-1V7z"],[1,"px-4","py-2","bg-green-600","text-white","rounded-lg","hover:bg-green-700","transition-colors","flex","items-center","gap-2",3,"click"],["fill-rule","evenodd","d","M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z","clip-rule","evenodd"],["class","flex justify-center items-center h-64",4,"ngIf"],["class","bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded relative","role","alert",4,"ngIf"],["class","grid grid-cols-1 lg:grid-cols-4 gap-6",4,"ngIf"],[1,"flex","justify-center","items-center","h-64"],[1,"animate-spin","rounded-full","h-12","w-12","border-b-2","border-blue-600"],["role","alert",1,"bg-red-50","border","border-red-200","text-red-700","px-4","py-3","rounded","relative"],[1,"font-bold"],[1,"block","sm:inline"],[1,"absolute","top-0","bottom-0","right-0","px-4","py-3",3,"click"],["role","button","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20",1,"fill-current","h-6","w-6","text-red-500"],["d","M14.348 14.849a1.2 1.2 0 0 1-1.697 0L10 11.819l-2.651 3.029a1.2 1.2 0 1 1-1.697-1.697l2.758-3.15-2.759-3.152a1.2 1.2 0 1 1 1.697-1.697L10 8.183l2.651-3.031a1.2 1.2 0 1 1 1.697 1.697l-2.758 3.152 2.758 3.15a1.2 1.2 0 0 1 0 1.698z"],[1,"grid","grid-cols-1","lg:grid-cols-4","gap-6"],[1,"lg:col-span-1","bg-white","rounded-lg","shadow","p-4"],[1,"text-lg","font-semibold","mb-4","text-gray-700"],[1,"space-y-2"],["class","p-3 rounded-lg cursor-pointer hover:bg-gray-50 transition-colors border border-gray-100",3,"bg-blue-50","click",4,"ngFor","ngForOf"],["class","lg:col-span-3 bg-white rounded-lg shadow",4,"ngIf"],[1,"p-3","rounded-lg","cursor-pointer","hover:bg-gray-50","transition-colors","border","border-gray-100",3,"click"],[1,"flex","justify-between","items-center"],[1,"font-medium","text-gray-800"],[1,"px-2","py-1","text-xs","font-semibold","rounded-full","bg-blue-100","text-blue-800"],[1,"lg:col-span-3","bg-white","rounded-lg","shadow"],[1,"p-6","border-b","border-gray-200"],[1,"flex","items-center","gap-2"],[1,"px-3","py-1","text-sm","font-semibold","rounded-full","bg-green-100","text-green-800"],[1,"px-3","py-1","text-sm","font-semibold","rounded-full","bg-blue-100","text-blue-800"],[1,"p-6"],[1,"overflow-x-auto"],[1,"min-w-full","divide-y","divide-gray-200"],[1,"bg-gray-50"],[1,"px-6","py-3","text-left","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"bg-white","divide-y","divide-gray-200"],["class","hover:bg-gray-50",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"hover:bg-gray-50"],[1,"px-6","py-4","whitespace-nowrap"],[1,"flex","items-center"],[1,"h-10","w-10","rounded-full","bg-gray-200","flex","items-center","justify-center","text-gray-600","font-semibold"],[1,"ml-4"],[1,"text-sm","font-medium","text-gray-900"],[1,"text-sm","text-gray-900"],[1,"px-3","py-1.5","inline-flex","items-center","text-xs","leading-4","font-medium","rounded-full",3,"ngClass"],[1,"w-2","h-2","mr-1.5","rounded-full",3,"ngClass"],[1,"px-6","py-4","whitespace-nowrap","text-right","text-sm","font-medium"],[1,"flex","space-x-2"],[1,"px-2","py-1","rounded-md","border","border-gray-300","hover:bg-gray-50",3,"ngClass","click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-4","w-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],[1,"text-red-600","hover:text-red-900","px-2","py-1","rounded-md","border","border-gray-300","hover:bg-gray-50",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],["colspan","3",1,"px-6","py-4","text-center","text-gray-500"],[1,"flex","flex-col","items-center","justify-center","py-8"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-12","w-12","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"],[1,"mt-2","text-sm","font-medium","text-gray-500"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h1",2),t._uU(3,"Groups Management"),t.qZA(),t.TgZ(4,"div",3)(5,"button",4),t.NdJ("click",function(){return o.openCreateUserModal()}),t.O4$(),t.TgZ(6,"svg",5),t._UZ(7,"path",6),t.qZA(),t._uU(8," Create User "),t.qZA(),t.kcU(),t.TgZ(9,"button",7),t.NdJ("click",function(){return o.openCreateGroupModal()}),t.O4$(),t.TgZ(10,"svg",5),t._UZ(11,"path",8),t.qZA(),t._uU(12," Create Group "),t.qZA()()(),t.YNc(13,ut,2,0,"div",9),t.YNc(14,gt,8,1,"div",10),t.YNc(15,Ct,7,2,"div",11),t.qZA()),2&e&&(t.xp6(13),t.Q6J("ngIf",o.loading),t.xp6(1),t.Q6J("ngIf",o.error),t.xp6(1),t.Q6J("ngIf",!o.loading&&!o.error))},dependencies:[l.mk,l.sg,l.O5],styles:[".animate-fade-in[_ngcontent-%COMP%]{animation:fadeIn .5s ease-in}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}.primary[_ngcontent-%COMP%]{background-color:#4a90e2}.primary-dark[_ngcontent-%COMP%]{background-color:#357abd}.form-input[_ngcontent-%COMP%]{width:100%;border-radius:var(--radius);border-width:1px;--tw-border-opacity: 1;border-color:rgb(209 213 219 / var(--tw-border-opacity, 1));padding:.75rem}.form-input[_ngcontent-%COMP%]:focus{border-color:transparent;--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000);--tw-ring-color: hsl(var(--primary))}table[_ngcontent-%COMP%]{min-width:100%}table[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not([hidden]) ~ [_ngcontent-%COMP%]:not([hidden]){--tw-divide-y-reverse: 0;border-top-width:calc(1px * calc(1 - var(--tw-divide-y-reverse)));border-bottom-width:calc(1px * var(--tw-divide-y-reverse));--tw-divide-opacity: 1;border-color:rgb(229 231 235 / var(--tw-divide-opacity, 1))}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:1rem 1.5rem}th[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(249 250 251 / var(--tw-bg-opacity, 1));text-align:left;font-size:.75rem;font-weight:500;text-transform:uppercase;letter-spacing:.05em;--tw-text-opacity: 1;color:rgb(107 114 128 / var(--tw-text-opacity, 1))}tr[_ngcontent-%COMP%]:hover{--tw-bg-opacity: 1;background-color:rgb(249 250 251 / var(--tw-bg-opacity, 1))}td[_ngcontent-%COMP%]{white-space:nowrap;font-size:.875rem;--tw-text-opacity: 1;color:rgb(17 24 39 / var(--tw-text-opacity, 1))}.container[_ngcontent-%COMP%]{padding:20px;max-width:1200px;margin:0 auto}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px;font-weight:700}.header[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;gap:10px}.groups-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:300px 1fr;gap:20px}.groups-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.group-card[_ngcontent-%COMP%]{padding:15px;border:1px solid #e2e8f0;border-radius:8px;cursor:pointer;transition:all .3s ease}.group-card[_ngcontent-%COMP%]:hover{background-color:#f8fafc}.group-card.selected[_ngcontent-%COMP%]{background-color:#e2e8f0;border-color:#94a3b8}.group-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:16px;font-weight:600}.group-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0 0;font-size:14px;color:#64748b}.group-details[_ngcontent-%COMP%]{padding:20px;border:1px solid #e2e8f0;border-radius:8px}.group-details[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 20px;font-size:20px;font-weight:600}.users-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px}.user-card[_ngcontent-%COMP%]{padding:15px;border:1px solid #e2e8f0;border-radius:8px}.user-card[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;font-size:16px;font-weight:600}.user-card[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0;font-size:14px;color:#64748b}.roles[_ngcontent-%COMP%]{display:flex;gap:5px;margin-top:10px}.role-badge[_ngcontent-%COMP%]{padding:2px 8px;background-color:#e2e8f0;border-radius:4px;font-size:12px;color:#475569}.no-users[_ngcontent-%COMP%]{text-align:center;padding:20px;color:#64748b}.modal[_ngcontent-%COMP%]{position:fixed;inset:0;background-color:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background-color:#fff;padding:20px;border-radius:8px;width:100%;max-width:500px}.modal-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 20px;font-size:20px;font-weight:600}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;font-weight:500}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:8px;border:1px solid #e2e8f0;border-radius:4px;font-size:14px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:#94a3b8}.form-group[_ngcontent-%COMP%]   select[multiple][_ngcontent-%COMP%]{height:100px}.modal-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:10px;margin-top:20px}.btn[_ngcontent-%COMP%]{padding:8px 16px;border-radius:4px;font-size:14px;font-weight:500;cursor:pointer;transition:all .3s ease}.btn-primary[_ngcontent-%COMP%]{background-color:#3b82f6;color:#fff;border:none}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#2563eb}.btn-secondary[_ngcontent-%COMP%]{background-color:#e2e8f0;color:#475569;border:none}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:#cbd5e1}"]}),n})();var A=d(4344);function wt(n,r){1&n&&t._UZ(0,"i",13)}function Tt(n,r){1&n&&(t.O4$(),t.TgZ(0,"svg",14),t._UZ(1,"circle",15)(2,"path",16),t.qZA())}function qt(n,r){1&n&&(t.TgZ(0,"span",22),t._uU(1,"\u2713"),t.qZA())}function Mt(n,r){1&n&&(t.TgZ(0,"span",22),t._uU(1,"\u27f3"),t.qZA())}function At(n,r){1&n&&(t.TgZ(0,"span",22),t._uU(1,"\u23f0"),t.qZA())}const Ot=function(n,r,e){return{"text-green-500":n,"text-yellow-500":r,"text-gray-500":e}};function kt(n,r){if(1&n&&(t.TgZ(0,"tr",17)(1,"td",18),t._uU(2),t.qZA(),t.TgZ(3,"td",19),t._uU(4),t.qZA(),t.TgZ(5,"td",19),t._uU(6),t.qZA(),t.TgZ(7,"td",19),t._uU(8),t.qZA(),t.TgZ(9,"td",19),t._uU(10),t.qZA(),t.TgZ(11,"td",19)(12,"span",20),t.YNc(13,qt,2,0,"span",21),t.YNc(14,Mt,2,0,"span",21),t.YNc(15,At,2,0,"span",21),t._uU(16),t.qZA()()()),2&n){const e=r.$implicit,o=t.oxw();t.xp6(2),t.Oqu(e.id),t.xp6(2),t.Oqu(e.title),t.xp6(2),t.Oqu(e.formation.title),t.xp6(2),t.Oqu(o.formatDate(e.startDate)),t.xp6(2),t.Oqu(o.formatDate(e.endDate)),t.xp6(2),t.Q6J("ngClass",t.kEZ(10,Ot,"Termin\xe9e"===e.status,"En cours"===e.status,"Pas encore"===e.status)),t.xp6(1),t.Q6J("ngIf","Termin\xe9e"===e.status),t.xp6(1),t.Q6J("ngIf","En cours"===e.status),t.xp6(1),t.Q6J("ngIf","Pas encore"===e.status),t.xp6(1),t.hij(" ",e.status," ")}}let Ut=(()=>{class n{constructor(e,o,i){this.fb=e,this.sessionService=o,this.dialog=i,this._sessions=[],this.isLoading=!1}ngOnInit(){this.loadSessions()}get sessions(){return this._sessions.sort((e,o)=>e.startDate.getTime()-o.startDate.getTime())}loadSessions(){this.isLoading=!0,this.sessionService.getAll().subscribe({next:e=>{this._sessions=e,this.isLoading=!1},error:e=>{console.error("Error loading sessions:",e),this.isLoading=!1}})}reloadSessions(){this.loadSessions()}formatDate(e){return new Intl.DateTimeFormat("fr",{day:"numeric",month:"short",year:"numeric"}).format(e)}openCreateSessionDialog(){this.dialog.open(v.U,{width:"500px",data:{}}).afterClosed().subscribe(o=>{o&&this.sessions.push(o)})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(s.qu),t.Y36(A.Z),t.Y36(m.uw))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-session"]],decls:29,vars:5,consts:[[1,"animate-fade-in","container","mx-auto","p-6"],[1,"mb-8","flex","justify-between","items-center"],[1,"text-3xl","font-bold","text-gray-800","!mb-0"],[1,"flex","gap-3"],[1,"px-4","py-2","bg-gray-100","text-gray-700","rounded-lg","shadow-sm","text-sm","font-medium","hover:bg-gray-200","transition-colors","flex","items-center","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled","click"],["class","fa-solid fa-rotate-right mr-2",4,"ngIf"],["class","animate-spin h-4 w-4 mr-2","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",4,"ngIf"],[1,"px-4","py-2","bg-primary","text-white","rounded-lg","shadow-sm","text-sm","font-medium","hover:bg-primary/90","transition-colors",3,"click"],[1,"rounded-lg","border","shadow-md"],[1,"w-full"],[1,"bg-gray-100"],[1,"py-4","px-6","text-left","text-sm","font-medium","text-gray-700"],["class","border-t",4,"ngFor","ngForOf"],[1,"fa-solid","fa-rotate-right","mr-2"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","h-4","w-4","mr-2"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],[1,"border-t"],[1,"py-4","px-6","font-medium"],[1,"py-4","px-6"],[1,"flex","items-center",3,"ngClass"],["class","mr-2",4,"ngIf"],[1,"mr-2"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h1",2),t._uU(3,"Sessions de formation"),t.qZA(),t.TgZ(4,"div",3)(5,"button",4),t.NdJ("click",function(){return o.reloadSessions()}),t.YNc(6,wt,1,0,"i",5),t.YNc(7,Tt,3,0,"svg",6),t._uU(8),t.qZA(),t.TgZ(9,"button",7),t.NdJ("click",function(){return o.openCreateSessionDialog()}),t._uU(10," Ajouter une session "),t.qZA()()(),t.TgZ(11,"div",8)(12,"table",9)(13,"thead")(14,"tr",10)(15,"th",11),t._uU(16,"ID"),t.qZA(),t.TgZ(17,"th",11),t._uU(18,"Nom de la session"),t.qZA(),t.TgZ(19,"th",11),t._uU(20,"Formation"),t.qZA(),t.TgZ(21,"th",11),t._uU(22,"Date de d\xe9but"),t.qZA(),t.TgZ(23,"th",11),t._uU(24,"Date de fin"),t.qZA(),t.TgZ(25,"th",11),t._uU(26,"Statut"),t.qZA()()(),t.TgZ(27,"tbody"),t.YNc(28,kt,17,14,"tr",12),t.qZA()()()()),2&e&&(t.xp6(5),t.Q6J("disabled",o.isLoading),t.xp6(1),t.Q6J("ngIf",!o.isLoading),t.xp6(1),t.Q6J("ngIf",o.isLoading),t.xp6(1),t.hij(" ",o.isLoading?"Actualisation...":"Actualiser"," "),t.xp6(20),t.Q6J("ngForOf",o.sessions))},dependencies:[l.mk,l.sg,l.O5],styles:[".animate-fade-in[_ngcontent-%COMP%]{animation:fadeIn .5s ease-in}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}.primary[_ngcontent-%COMP%]{background-color:#4a90e2}.primary-dark[_ngcontent-%COMP%]{background-color:#357abd}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:1rem 1.5rem}th[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(243 244 246 / var(--tw-bg-opacity, 1));text-align:left;font-size:.875rem;font-weight:500;--tw-text-opacity: 1;color:rgb(55 65 81 / var(--tw-text-opacity, 1))}tr[_ngcontent-%COMP%]{border-top-width:1px}td[_ngcontent-%COMP%]{font-size:.875rem;--tw-text-opacity: 1;color:rgb(17 24 39 / var(--tw-text-opacity, 1))}"]}),n})();var f=d(6920);function Pt(n,r){1&n&&t._UZ(0,"i",22)}function Ft(n,r){1&n&&(t.O4$(),t.TgZ(0,"svg",23),t._UZ(1,"circle",24)(2,"path",25),t.qZA())}const zt=function(n){return["/admin/quizs",n]},Qt=function(n){return["/admin/quizs/edit",n]},It=function(n){return["/admin/quizs/comments",n]};function Jt(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"tr",26)(1,"td",27),t._uU(2),t.qZA(),t.TgZ(3,"td",28)(4,"div",29),t._uU(5),t.qZA()(),t.TgZ(6,"td",28)(7,"span",30),t._uU(8),t.qZA()(),t.TgZ(9,"td",31),t._uU(10),t.ALo(11,"date"),t.qZA(),t.TgZ(12,"td",32)(13,"div",33)(14,"button",34),t._UZ(15,"i",35),t.qZA(),t.TgZ(16,"button",34),t._UZ(17,"i",36),t.qZA(),t.TgZ(18,"button",37),t._UZ(19,"i",38),t.qZA(),t.TgZ(20,"button",39),t.NdJ("click",function(){const a=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.deleteQuiz(a))}),t._UZ(21,"i",40),t.qZA()()()()}if(2&n){const e=r.$implicit;t.xp6(2),t.hij(" ",e.id," "),t.xp6(3),t.Oqu(e.title),t.xp6(3),t.hij(" ",e.questions.length," questions "),t.xp6(2),t.hij(" ",t.xi3(11,7,e.createdAt,"dd MMM yyyy")," "),t.xp6(4),t.Q6J("routerLink",t.VKq(10,zt,e.id)),t.xp6(2),t.Q6J("routerLink",t.VKq(12,Qt,e.id)),t.xp6(2),t.Q6J("routerLink",t.VKq(14,It,e.id))}}function Nt(n,r){1&n&&(t.TgZ(0,"tr")(1,"td",41)(2,"div",42),t._UZ(3,"i",43),t.TgZ(4,"p",44),t._uU(5,"Aucun quiz trouv\xe9"),t.qZA()()()())}const Et=function(){return["create"]};let St=(()=>{class n{constructor(e){this.quizService=e,this.quizzes=[],this.isLoading=!1,this.searchTerm=""}ngOnInit(){this.fetchQuizzs()}get filteredQuizzes(){return this.quizzes.filter(e=>e.title.toLowerCase().includes(this.searchTerm.toLowerCase()))}fetchQuizzs(){this.isLoading=!0,this.quizService.getQuizzes().subscribe({next:e=>{this.searchTerm="",this.isLoading=!1,this.quizzes=e}})}openCreateQuizDialog(){}editQuiz(e){}deleteQuiz(e){}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(f.v))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-quizs"]],decls:35,vars:9,consts:[[1,"container","mx-auto","p-6"],[1,"flex","justify-between","items-center","mb-6"],[1,"text-2xl","font-bold","text-gray-800"],[1,"flex","gap-3"],[1,"px-4","py-2","bg-gray-100","text-gray-700","rounded-lg","shadow-sm","text-sm","font-medium","hover:bg-gray-200","transition-colors","flex","items-center","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled","click"],["class","fa-solid fa-rotate-right mr-2",4,"ngIf"],["class","animate-spin h-4 w-4 mr-2","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",4,"ngIf"],[1,"px-4","py-2","bg-primary","text-white","rounded-lg","hover:bg-blue-600","transition-colors","flex","items-center","gap-2",3,"routerLink"],[1,"fas","fa-plus"],[1,"mb-6"],[1,"relative"],[1,"absolute","inset-y-0","left-0","pl-3","flex","items-center","pointer-events-none"],[1,"fas","fa-search","text-gray-400"],["type","text","placeholder","Rechercher un quiz...",1,"block","w-full","pl-10","pr-3","py-2","border","border-gray-300","rounded-md","leading-5","bg-white","placeholder-gray-500","focus:outline-none","focus:placeholder-gray-400","focus:ring-1","focus:ring-blue-500","focus:border-blue-500","sm:text-sm",3,"ngModel","ngModelChange"],[1,"bg-white","shadow","rounded-lg","overflow-hidden"],[1,"overflow-x-auto"],[1,"min-w-full","divide-y","divide-gray-200"],[1,"bg-gray-50"],["scope","col",1,"px-6","py-3","text-left","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"bg-white","divide-y","divide-gray-200"],["class","hover:bg-gray-50",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"fa-solid","fa-rotate-right","mr-2"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","h-4","w-4","mr-2"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],[1,"hover:bg-gray-50"],[1,"px-6","py-4","whitespace-nowrap","text-sm","text-gray-900"],[1,"px-6","py-4","whitespace-nowrap"],[1,"text-sm","font-medium","text-gray-900"],[1,"px-2","inline-flex","text-xs","leading-5","font-semibold","rounded-full","bg-blue-100","text-blue-800"],[1,"px-6","py-4","whitespace-nowrap","text-sm","text-gray-500"],[1,"px-6","py-4","whitespace-nowrap","text-sm","font-medium"],[1,"flex","items-center","space-x-3"],[1,"text-blue-600","hover:text-blue-900",3,"routerLink"],[1,"fa-solid","fa-eye"],[1,"fas","fa-edit"],[1,"text-gray-500","hover:text-gray-600",3,"routerLink"],[1,"fas","fa-comment-dots"],[1,"text-red-600","hover:text-red-900",3,"click"],[1,"fas","fa-trash"],["colspan","5",1,"px-6","py-4","text-center","text-gray-500"],[1,"flex","flex-col","items-center","justify-center","py-8"],[1,"fas","fa-file-alt","text-gray-400","text-4xl","mb-2"],[1,"mt-2","text-sm","font-medium","text-gray-500"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h1",2),t._uU(3,"Gestion des Quiz"),t.qZA(),t.TgZ(4,"div",3)(5,"button",4),t.NdJ("click",function(){return o.fetchQuizzs()}),t.YNc(6,Pt,1,0,"i",5),t.YNc(7,Ft,3,0,"svg",6),t._uU(8),t.qZA(),t.TgZ(9,"button",7),t._UZ(10,"i",8),t._uU(11," Cr\xe9er un quiz "),t.qZA()()(),t.TgZ(12,"div",9)(13,"div",10)(14,"div",11),t._UZ(15,"i",12),t.qZA(),t.TgZ(16,"input",13),t.NdJ("ngModelChange",function(a){return o.searchTerm=a}),t.qZA()()(),t.TgZ(17,"div",14)(18,"div",15)(19,"table",16)(20,"thead",17)(21,"tr")(22,"th",18),t._uU(23," ID "),t.qZA(),t.TgZ(24,"th",18),t._uU(25," Titre "),t.qZA(),t.TgZ(26,"th",18),t._uU(27," Questions "),t.qZA(),t.TgZ(28,"th",18),t._uU(29," Date de cr\xe9ation "),t.qZA(),t.TgZ(30,"th",18),t._uU(31," Actions "),t.qZA()()(),t.TgZ(32,"tbody",19),t.YNc(33,Jt,22,16,"tr",20),t.YNc(34,Nt,6,0,"tr",21),t.qZA()()()()()),2&e&&(t.xp6(5),t.Q6J("disabled",o.isLoading),t.xp6(1),t.Q6J("ngIf",!o.isLoading),t.xp6(1),t.Q6J("ngIf",o.isLoading),t.xp6(1),t.hij(" ",o.isLoading?"Actualisation...":"Actualiser"," "),t.xp6(1),t.Q6J("routerLink",t.DdM(8,Et)),t.xp6(7),t.Q6J("ngModel",o.searchTerm),t.xp6(17),t.Q6J("ngForOf",o.filteredQuizzes),t.xp6(1),t.Q6J("ngIf",0===o.filteredQuizzes.length&&!o.isLoading))},dependencies:[l.sg,l.O5,p.rH,s.Fj,s.JJ,s.On,l.uU]}),n})();function Dt(n,r){1&n&&(t.TgZ(0,"div",16),t._uU(1," Le titre doit contenir au moins 3 caract\xe8res "),t.qZA())}function Yt(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",29),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().index,a=t.oxw();return t.KtG(a.removeQuestion(i))}),t._UZ(1,"i",30),t.qZA()}}function Lt(n,r){1&n&&(t.TgZ(0,"div",16),t._uU(1," Le titre ne peut pas \xeatre vide "),t.qZA())}function Gt(n,r){1&n&&(t.TgZ(0,"div",16),t._uU(1," Le nombre de points doit \xeatre sup\xe9rieur \xe0 0 "),t.qZA())}function jt(n,r){1&n&&(t.TgZ(0,"div",16),t._uU(1," La r\xe9ponse ne peut pas \xeatre vide "),t.qZA())}function Ht(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",29),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().index,a=t.oxw().index,c=t.oxw();return t.KtG(c.removeAnswer(a,i))}),t._UZ(1,"i",30),t.qZA()}}function Kt(n,r){if(1&n&&(t.TgZ(0,"div",31)(1,"div",32),t._UZ(2,"input",33),t.YNc(3,jt,2,0,"div",5),t.qZA(),t.TgZ(4,"div",34),t._UZ(5,"input",35),t.qZA(),t.YNc(6,Ht,2,0,"button",20),t.qZA()),2&n){const e=r.index,o=t.oxw().index,i=t.oxw();let a;t.Q6J("formGroupName",e),t.xp6(2),t.Q6J("placeholder","R\xe9ponse "+(e+1)),t.xp6(1),t.Q6J("ngIf",(null==(a=i.getAnswers(o).at(e).get("text"))?null:a.invalid)&&(null==(a=i.getAnswers(o).at(e).get("text"))?null:a.touched)),t.xp6(3),t.Q6J("ngIf",i.getAnswers(o).length>2)}}function $t(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",17)(1,"div",18)(2,"h4",19),t._uU(3),t.qZA(),t.YNc(4,Yt,2,0,"button",20),t.qZA(),t.TgZ(5,"div",21)(6,"div",22)(7,"label",23),t._uU(8,"Titre de la question"),t.qZA(),t._UZ(9,"input",24),t.YNc(10,Lt,2,0,"div",5),t.qZA(),t.TgZ(11,"div",25)(12,"label",23),t._uU(13,"Points"),t.qZA(),t._UZ(14,"input",26),t.YNc(15,Gt,2,0,"div",5),t.qZA()(),t.TgZ(16,"div",6)(17,"div",7)(18,"h5",19),t._uU(19,"R\xe9ponses"),t.qZA(),t.TgZ(20,"button",9),t.NdJ("click",function(){const a=t.CHM(e).index,c=t.oxw();return t.KtG(c.addAnswer(a))}),t._UZ(21,"i",10),t._uU(22," Ajouter une r\xe9ponse "),t.qZA()(),t.TgZ(23,"div",27),t.YNc(24,Kt,7,4,"div",28),t.qZA()()()}if(2&n){const e=r.index,o=t.oxw();let i,a;t.Q6J("formGroupName",e),t.xp6(3),t.hij("Question ",e+1,""),t.xp6(1),t.Q6J("ngIf",o.questions.length>1),t.xp6(6),t.Q6J("ngIf",(null==(i=o.questions.at(e).get("title"))?null:i.invalid)&&(null==(i=o.questions.at(e).get("title"))?null:i.touched)),t.xp6(5),t.Q6J("ngIf",(null==(a=o.questions.at(e).get("points"))?null:a.invalid)&&(null==(a=o.questions.at(e).get("points"))?null:a.touched)),t.xp6(9),t.Q6J("ngForOf",o.getAnswers(e).controls)}}function Rt(n,r){1&n&&t._UZ(0,"i",36)}let Bt=(()=>{class n{constructor(e,o,i){this.fb=e,this.router=o,this.quizService=i,this.isLoading=!1,this.quizForm=this.fb.group({title:["",[s.kI.required,s.kI.minLength(3)]],questions:this.fb.array([this.createQuestion()])})}ngOnInit(){}get questions(){return this.quizForm.get("questions")}createQuestion(){return this.fb.group({points:[1,[s.kI.required,s.kI.min(1)]],order:[0],title:["",[s.kI.required,s.kI.minLength(6)]],answers:this.fb.array([this.createAnswer(),this.createAnswer()])})}createAnswer(){return this.fb.group({text:["",s.kI.required],isCorrect:[!1]})}addQuestion(){this.questions.push(this.createQuestion())}removeQuestion(e){this.questions.length>1&&this.questions.removeAt(e)}getAnswers(e){return this.questions.at(e).get("answers")}addAnswer(e){this.getAnswers(e).push(this.createAnswer())}removeAnswer(e,o){const i=this.getAnswers(e);i.length>2&&i.removeAt(o)}onSubmit(){this.quizForm.valid&&(this.isLoading=!0,this.quizService.createQuiz(this.quizForm.value).subscribe({next:e=>{console.log("Quiz created successfully:",e),this.isLoading=!1,this.router.navigate(["/admin/quizs"])},error:e=>{console.error("Error creating quiz:",e),this.isLoading=!1}})),console.log(this.quizForm.value)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(s.qu),t.Y36(p.F0),t.Y36(f.v))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-create-quizs"]],decls:20,vars:6,consts:[[1,"max-w-4xl","p-6"],[1,"space-y-6",3,"formGroup","ngSubmit"],[1,"space-y-2"],[1,"block","font-medium","text-gray-700"],["type","text","formControlName","title","placeholder","Entrez le titre du quiz",1,"block","w-full","rounded-md","border-gray-300","shadow-sm","focus:border-blue-500","focus:ring-blue-500","sm:text-sm"],["class","text-red-500 text-sm",4,"ngIf"],[1,"space-y-4"],[1,"flex","items-center","justify-between"],[1,"text-lg","font-medium"],["type","button",1,"inline-flex","items-center","px-3","py-1","border","border-gray-300","shadow-sm","text-sm","leading-4","font-medium","rounded-md","text-gray-700","bg-white","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-blue-500",3,"click"],[1,"fas","fa-plus-circle","mr-2"],["formArrayName","questions",1,"space-y-4"],["class","p-4 border rounded-md space-y-4",3,"formGroupName",4,"ngFor","ngForOf"],[1,"flex","justify-end"],["type","submit",1,"inline-flex","items-center","px-4","py-2.5","text-sm","font-medium","rounded-md","shadow-sm","text-white","bg-primary","hover:bg-blue-600","disabled:bg-primary/50","disabled:cursor-not-allowed",3,"disabled"],["class","fa-solid fa-rotate mr-2 animate-spin",4,"ngIf"],[1,"text-red-500","text-sm"],[1,"p-4","border","rounded-md","space-y-4",3,"formGroupName"],[1,"flex","justify-between","items-center"],[1,"font-medium"],["type","button","class","text-red-500 hover:text-red-700",3,"click",4,"ngIf"],[1,"flex","gap-4"],[1,"space-y-2","w-3/4"],[1,"block","text-sm","font-medium","text-gray-700"],["type","text","formControlName","title","placeholder","Entrez le titre de la question",1,"block","w-full","rounded-md","border-gray-300","shadow-sm","focus:border-blue-500","focus:ring-blue-500","sm:text-sm"],[1,"space-y-2","w-1/4"],["type","number","formControlName","points","min","1",1,"block","w-full","rounded-md","border-gray-300","shadow-sm","focus:border-blue-500","focus:ring-blue-500","sm:text-sm"],["formArrayName","answers",1,"space-y-2"],["class","flex items-start space-x-4",3,"formGroupName",4,"ngFor","ngForOf"],["type","button",1,"text-red-500","hover:text-red-700",3,"click"],[1,"fas","fa-trash"],[1,"flex","items-start","space-x-4",3,"formGroupName"],[1,"flex-1"],["type","text","formControlName","text",1,"block","w-full","rounded-md","border-gray-300","shadow-sm","focus:border-blue-500","focus:ring-blue-500","sm:text-sm",3,"placeholder"],[1,"flex","items-center","h-5"],["type","checkbox","formControlName","isCorrect",1,"h-4","w-4","text-blue-600","focus:ring-blue-500","border-gray-300","rounded"],[1,"fa-solid","fa-rotate","mr-2","animate-spin"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0)(1,"form",1),t.NdJ("ngSubmit",function(){return o.onSubmit()}),t.TgZ(2,"div",2)(3,"label",3),t._uU(4,"Titre du quiz"),t.qZA(),t._UZ(5,"input",4),t.YNc(6,Dt,2,0,"div",5),t.qZA(),t.TgZ(7,"div",6)(8,"div",7)(9,"h3",8),t._uU(10,"Questions"),t.qZA(),t.TgZ(11,"button",9),t.NdJ("click",function(){return o.addQuestion()}),t._UZ(12,"i",10),t._uU(13," Ajouter une question "),t.qZA()(),t.TgZ(14,"div",11),t.YNc(15,$t,25,6,"div",12),t.qZA()(),t.TgZ(16,"div",13)(17,"button",14),t.YNc(18,Rt,1,0,"i",15),t._uU(19),t.qZA()()()()),2&e){let i;t.xp6(1),t.Q6J("formGroup",o.quizForm),t.xp6(5),t.Q6J("ngIf",(null==(i=o.quizForm.get("title"))?null:i.invalid)&&(null==(i=o.quizForm.get("title"))?null:i.touched)),t.xp6(9),t.Q6J("ngForOf",o.questions.controls),t.xp6(2),t.Q6J("disabled",o.quizForm.invalid||o.isLoading),t.xp6(1),t.Q6J("ngIf",o.isLoading),t.xp6(1),t.hij(" ",o.isLoading?"Cr\xe9ation...":"Cr\xe9er le quiz"," ")}},dependencies:[l.sg,l.O5,s._Y,s.Fj,s.wV,s.Wl,s.JJ,s.JL,s.qQ,s.sg,s.u,s.x0,s.CE],styles:[".container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto}input[type=checkbox][_ngcontent-%COMP%]{border:1px solid #e5e7eb;border-radius:.25rem}input[type=checkbox][_ngcontent-%COMP%]:checked{background-color:#3b82f6;border-color:#3b82f6}button[_ngcontent-%COMP%]{transition:all .2s ease-in-out}button[_ngcontent-%COMP%]:hover{transform:translateY(-1px)}input[type=text][_ngcontent-%COMP%]:focus, input[type=number][_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f61a}.space-y-6[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-top:1.5rem}.space-y-4[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-top:1rem}.space-y-2[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-top:.5rem}input[type=text][_ngcontent-%COMP%], input[type=number][_ngcontent-%COMP%]{padding:.5rem;border:1px solid #e5e7eb;border-radius:.375rem;width:100%}.text-red-500[_ngcontent-%COMP%]{color:#ef4444}.border[_ngcontent-%COMP%]{border:1px solid #e5e7eb;border-radius:.375rem;padding:1rem}.fas[_ngcontent-%COMP%]{font-size:1rem}"]}),n})();function Vt(n,r){1&n&&(t.TgZ(0,"div",3),t._UZ(1,"div",4),t.TgZ(2,"p",5),t._uU(3,"Loading your quiz..."),t.qZA()())}function Wt(n,r){1&n&&(t.TgZ(0,"span",19),t.O4$(),t.TgZ(1,"svg",20),t._UZ(2,"path",21),t.qZA(),t._uU(3," Correct "),t.qZA())}function Xt(n,r){if(1&n&&(t.TgZ(0,"div",15)(1,"div",16)(2,"span",17),t._uU(3),t.qZA(),t.YNc(4,Wt,4,0,"span",18),t.qZA()()),2&n){const e=r.$implicit;t.ekj("bg-green-100",e.isCorrect)("border-green-400",e.isCorrect)("bg-gray-100",!e.isCorrect),t.xp6(3),t.Oqu(e.text||"No answer text"),t.xp6(1),t.Q6J("ngIf",e.isCorrect)}}function te(n,r){if(1&n&&(t.TgZ(0,"div",10)(1,"h2",11)(2,"span",12),t._uU(3),t.qZA(),t._uU(4),t.qZA(),t.TgZ(5,"div",13),t.YNc(6,Xt,5,8,"div",14),t.qZA()()),2&n){const e=r.$implicit,o=r.index;t.xp6(3),t.Oqu(o+1),t.xp6(1),t.hij(" ",e.title," "),t.xp6(2),t.Q6J("ngForOf",e.answers)}}function ee(n,r){if(1&n&&(t.TgZ(0,"div",6)(1,"h1",7),t._uU(2),t.qZA(),t.TgZ(3,"p",8),t._uU(4),t.ALo(5,"date"),t.qZA(),t.YNc(6,te,7,3,"div",9),t.qZA()),2&n){const e=t.oxw();t.xp6(2),t.hij(" ",e.quiz.title||"Untitled Quiz"," "),t.xp6(2),t.hij(" Created on: ",t.xi3(5,3,e.quiz.createdAt,"dd MMM yyyy")," "),t.xp6(2),t.Q6J("ngForOf",e.quiz.questions)}}let oe=(()=>{class n{constructor(e,o){this.route=e,this.quizService=o,this.quiz=null,this.isLoading=!0}ngOnInit(){const e=Number(this.route.snapshot.paramMap.get("id"));this.quizService.getQuiz(e).subscribe({next:o=>{this.quiz=o,this.isLoading=!1},error:o=>{console.error("Error fetching quiz:",o),this.isLoading=!1}})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(p.gz),t.Y36(f.v))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-quiz-details"]],decls:3,vars:2,consts:[[1,"max-w-4xl"],["class","text-center py-12 bg-white rounded-2xl shadow-2xl",4,"ngIf"],["class"," rounded-2xl  p-8 transform transition-all duration-300",4,"ngIf"],[1,"text-center","py-12","bg-white","rounded-2xl","shadow-2xl"],[1,"animate-spin","rounded-full","h-16","w-16","border-t-4","border-b-4","border-indigo-600","mx-auto"],[1,"mt-6","text-gray-700","text-lg","font-medium"],[1,"rounded-2xl","p-8","transform","transition-all","duration-300"],[1,"text-4xl","font-extrabold","text-gray-900","mb-4","tracking-tight"],[1,"text-gray-500","mb-8","italic"],["class","mb-6 p-6 bg-gray-50 rounded-xl shadow-inner hover:shadow-md transition-shadow duration-300 border",4,"ngFor","ngForOf"],[1,"mb-6","p-6","bg-gray-50","rounded-xl","shadow-inner","hover:shadow-md","transition-shadow","duration-300","border"],[1,"text-2xl","font-semibold","text-gray-800","mb-4","flex","items-center"],[1,"inline-block","w-8","h-8","bg-primary","text-white","rounded-full","flex","items-center","justify-center","mr-3"],[1,"space-y-4"],["class","p-4 rounded-lg border border-gray-200 hover:border-indigo-300 transition-colors duration-200",3,"bg-green-100","border-green-400","bg-gray-100",4,"ngFor","ngForOf"],[1,"p-4","rounded-lg","border","border-gray-200","hover:border-indigo-300","transition-colors","duration-200"],[1,"flex","items-center","justify-between"],[1,"text-gray-700"],["class","text-green-600 font-medium flex items-center",4,"ngIf"],[1,"text-green-600","font-medium","flex","items-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24","xmlns","http://www.w3.org/2000/svg",1,"w-5","h-5","mr-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.YNc(1,Vt,4,0,"div",1),t.YNc(2,ee,7,6,"div",2),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngIf",o.isLoading),t.xp6(1),t.Q6J("ngIf",o.quiz&&!o.isLoading))},dependencies:[l.sg,l.O5,l.uU],styles:[".loading[_ngcontent-%COMP%]{font-size:1.2em;color:#555;text-align:center;margin-top:20px}.quiz-details[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:20px;background-color:#f9f9f9;border-radius:8px;box-shadow:0 2px 4px #0000001a}.quiz-details[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2em;margin-bottom:10px}.quiz-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1em;color:#666}.question[_ngcontent-%COMP%]{margin-top:20px}.question[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5em;margin-bottom:5px}.question[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style-type:none;padding:0}.question[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{background-color:#fff;padding:10px;margin-bottom:5px;border-radius:4px;box-shadow:0 1px 2px #0000000d}.error[_ngcontent-%COMP%]{font-size:1.2em;color:red;text-align:center;margin-top:20px}"]}),n})();function ne(n,r){1&n&&(t.TgZ(0,"div",16),t._uU(1," Le titre doit contenir au moins 3 caract\xe8res "),t.qZA())}function ie(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",29),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().index,a=t.oxw();return t.KtG(a.removeQuestion(i))}),t._UZ(1,"i",30),t.qZA()}}function re(n,r){1&n&&(t.TgZ(0,"div",16),t._uU(1," Le titre ne peut pas \xeatre vide "),t.qZA())}function ae(n,r){1&n&&(t.TgZ(0,"div",16),t._uU(1," Le nombre de points doit \xeatre sup\xe9rieur \xe0 0 "),t.qZA())}function se(n,r){1&n&&(t.TgZ(0,"div",16),t._uU(1," La r\xe9ponse ne peut pas \xeatre vide "),t.qZA())}function ce(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",29),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().index,a=t.oxw().index,c=t.oxw();return t.KtG(c.removeAnswer(a,i))}),t._UZ(1,"i",30),t.qZA()}}function le(n,r){if(1&n&&(t.TgZ(0,"div",31)(1,"div",32),t._UZ(2,"input",33),t.YNc(3,se,2,0,"div",5),t.qZA(),t.TgZ(4,"div",34),t._UZ(5,"input",35),t.qZA(),t.YNc(6,ce,2,0,"button",20),t.qZA()),2&n){const e=r.index,o=t.oxw().index,i=t.oxw();let a;t.Q6J("formGroupName",e),t.xp6(2),t.Q6J("placeholder","R\xe9ponse "+(e+1)),t.xp6(1),t.Q6J("ngIf",(null==(a=i.getAnswers(o).at(e).get("text"))?null:a.invalid)&&(null==(a=i.getAnswers(o).at(e).get("text"))?null:a.touched)),t.xp6(3),t.Q6J("ngIf",i.getAnswers(o).length>2)}}function de(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",17)(1,"div",18)(2,"h4",19),t._uU(3),t.qZA(),t.YNc(4,ie,2,0,"button",20),t.qZA(),t.TgZ(5,"div",21)(6,"div",22)(7,"label",23),t._uU(8,"Titre de la question"),t.qZA(),t._UZ(9,"input",24),t.YNc(10,re,2,0,"div",5),t.qZA(),t.TgZ(11,"div",25)(12,"label",23),t._uU(13,"Points"),t.qZA(),t._UZ(14,"input",26),t.YNc(15,ae,2,0,"div",5),t.qZA()(),t.TgZ(16,"div",6)(17,"div",7)(18,"h5",19),t._uU(19,"R\xe9ponses"),t.qZA(),t.TgZ(20,"button",9),t.NdJ("click",function(){const a=t.CHM(e).index,c=t.oxw();return t.KtG(c.addAnswer(a))}),t._UZ(21,"i",10),t._uU(22," Ajouter une r\xe9ponse "),t.qZA()(),t.TgZ(23,"div",27),t.YNc(24,le,7,4,"div",28),t.qZA()()()}if(2&n){const e=r.index,o=t.oxw();let i,a;t.Q6J("formGroupName",e),t.xp6(3),t.hij("Question ",e+1,""),t.xp6(1),t.Q6J("ngIf",o.questions.length>1),t.xp6(6),t.Q6J("ngIf",(null==(i=o.questions.at(e).get("title"))?null:i.invalid)&&(null==(i=o.questions.at(e).get("title"))?null:i.touched)),t.xp6(5),t.Q6J("ngIf",(null==(a=o.questions.at(e).get("points"))?null:a.invalid)&&(null==(a=o.questions.at(e).get("points"))?null:a.touched)),t.xp6(9),t.Q6J("ngForOf",o.getAnswers(e).controls)}}function ue(n,r){1&n&&t._UZ(0,"i",36)}let ge=(()=>{class n{constructor(e,o,i,a){this.fb=e,this.router=o,this.route=i,this.quizService=a,this.isLoading=!1,this.quizForm=this.fb.group({title:["",[s.kI.required,s.kI.minLength(3)]],questions:this.fb.array([])});const c=this.route.snapshot.paramMap.get("id");c?this.quizId=Number.parseInt(c):this.router.navigate(["404"])}ngOnInit(){this.loadQuiz()}loadQuiz(){this.isLoading=!0,this.quizService.getQuiz(this.quizId).subscribe({next:e=>{this.quizForm.patchValue(e),e.questions.forEach(o=>{const i=this.createQuestion();i.patchValue(o),this.questions.push(i)}),this.isLoading=!1},error:e=>{console.error("Error loading quiz:",e),this.isLoading=!1}})}get questions(){return this.quizForm.get("questions")}createQuestion(){return this.fb.group({points:[1,[s.kI.required,s.kI.min(1)]],order:[0],title:["",[s.kI.required,s.kI.minLength(6)]],answers:this.fb.array([])})}createAnswer(){return this.fb.group({text:["",s.kI.required],isCorrect:[!1]})}addQuestion(){this.questions.push(this.createQuestion())}removeQuestion(e){this.questions.length>1&&this.questions.removeAt(e)}getAnswers(e){return this.questions.at(e).get("answers")}addAnswer(e){this.getAnswers(e).push(this.createAnswer())}removeAnswer(e,o){const i=this.getAnswers(e);i.length>2&&i.removeAt(o)}onSubmit(){this.quizForm.valid&&(this.isLoading=!0,this.quizService.updateQuiz(this.quizId,this.quizForm.value).subscribe({next:e=>{console.log("Quiz updated successfully:",e),this.isLoading=!1,this.router.navigate(["/admin/quizs"])},error:e=>{console.error("Error updating quiz:",e),this.isLoading=!1}}))}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(s.qu),t.Y36(p.F0),t.Y36(p.gz),t.Y36(f.v))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-update-quizs"]],decls:20,vars:6,consts:[[1,"max-w-4xl","p-6"],[1,"space-y-6",3,"formGroup","ngSubmit"],[1,"space-y-2"],[1,"block","font-medium","text-gray-700"],["type","text","formControlName","title","placeholder","Entrez le titre du quiz",1,"block","w-full","rounded-md","border-gray-300","shadow-sm","focus:border-blue-500","focus:ring-blue-500","sm:text-sm"],["class","text-red-500 text-sm",4,"ngIf"],[1,"space-y-4"],[1,"flex","items-center","justify-between"],[1,"text-lg","font-medium"],["type","button",1,"inline-flex","items-center","px-3","py-1","border","border-gray-300","shadow-sm","text-sm","leading-4","font-medium","rounded-md","text-gray-700","bg-white","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-blue-500",3,"click"],[1,"fas","fa-plus-circle","mr-2"],["formArrayName","questions",1,"space-y-4"],["class","p-4 border rounded-md space-y-4",3,"formGroupName",4,"ngFor","ngForOf"],[1,"flex","justify-end"],["type","submit",1,"inline-flex","items-center","px-4","py-2.5","text-sm","font-medium","rounded-md","shadow-sm","text-white","bg-primary","hover:bg-blue-600","disabled:bg-primary/50","disabled:cursor-not-allowed",3,"disabled"],["class","fa-solid fa-rotate mr-2 animate-spin",4,"ngIf"],[1,"text-red-500","text-sm"],[1,"p-4","border","rounded-md","space-y-4",3,"formGroupName"],[1,"flex","justify-between","items-center"],[1,"font-medium"],["type","button","class","text-red-500 hover:text-red-700",3,"click",4,"ngIf"],[1,"flex","gap-4"],[1,"space-y-2","w-3/4"],[1,"block","text-sm","font-medium","text-gray-700"],["type","text","formControlName","title","placeholder","Entrez le titre de la question",1,"block","w-full","rounded-md","border-gray-300","shadow-sm","focus:border-blue-500","focus:ring-blue-500","sm:text-sm"],[1,"space-y-2","w-1/4"],["type","number","formControlName","points","min","1",1,"block","w-full","rounded-md","border-gray-300","shadow-sm","focus:border-blue-500","focus:ring-blue-500","sm:text-sm"],["formArrayName","answers",1,"space-y-2"],["class","flex items-start space-x-4",3,"formGroupName",4,"ngFor","ngForOf"],["type","button",1,"text-red-500","hover:text-red-700",3,"click"],[1,"fas","fa-trash"],[1,"flex","items-start","space-x-4",3,"formGroupName"],[1,"flex-1"],["type","text","formControlName","text",1,"block","w-full","rounded-md","border-gray-300","shadow-sm","focus:border-blue-500","focus:ring-blue-500","sm:text-sm",3,"placeholder"],[1,"flex","items-center","h-5"],["type","checkbox","formControlName","isCorrect",1,"h-4","w-4","text-blue-600","focus:ring-blue-500","border-gray-300","rounded"],[1,"fa-solid","fa-rotate","mr-2","animate-spin"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0)(1,"form",1),t.NdJ("ngSubmit",function(){return o.onSubmit()}),t.TgZ(2,"div",2)(3,"label",3),t._uU(4,"Titre du quiz"),t.qZA(),t._UZ(5,"input",4),t.YNc(6,ne,2,0,"div",5),t.qZA(),t.TgZ(7,"div",6)(8,"div",7)(9,"h3",8),t._uU(10,"Questions"),t.qZA(),t.TgZ(11,"button",9),t.NdJ("click",function(){return o.addQuestion()}),t._UZ(12,"i",10),t._uU(13," Ajouter une question "),t.qZA()(),t.TgZ(14,"div",11),t.YNc(15,de,25,6,"div",12),t.qZA()(),t.TgZ(16,"div",13)(17,"button",14),t.YNc(18,ue,1,0,"i",15),t._uU(19),t.qZA()()()()),2&e){let i;t.xp6(1),t.Q6J("formGroup",o.quizForm),t.xp6(5),t.Q6J("ngIf",(null==(i=o.quizForm.get("title"))?null:i.invalid)&&(null==(i=o.quizForm.get("title"))?null:i.touched)),t.xp6(9),t.Q6J("ngForOf",o.questions.controls),t.xp6(2),t.Q6J("disabled",o.quizForm.invalid||o.isLoading),t.xp6(1),t.Q6J("ngIf",o.isLoading),t.xp6(1),t.hij(" ",o.isLoading?"Mise \xe0 jour...":"Mettre \xe0 jour le quiz"," ")}},dependencies:[l.sg,l.O5,s._Y,s.Fj,s.wV,s.Wl,s.JJ,s.JL,s.qQ,s.sg,s.u,s.x0,s.CE],styles:[".container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto}input[type=checkbox][_ngcontent-%COMP%]{border:1px solid #e5e7eb;border-radius:.25rem}input[type=checkbox][_ngcontent-%COMP%]:checked{background-color:#3b82f6;border-color:#3b82f6}button[_ngcontent-%COMP%]{transition:all .2s ease-in-out}button[_ngcontent-%COMP%]:hover{transform:translateY(-1px)}input[type=text][_ngcontent-%COMP%]:focus, input[type=number][_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f61a}.space-y-6[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-top:1.5rem}.space-y-4[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-top:1rem}.space-y-2[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-top:.5rem}input[type=text][_ngcontent-%COMP%], input[type=number][_ngcontent-%COMP%]{padding:.5rem;border:1px solid #e5e7eb;border-radius:.375rem;width:100%}.text-red-500[_ngcontent-%COMP%]{color:#ef4444}.border[_ngcontent-%COMP%]{border:1px solid #e5e7eb;border-radius:.375rem;padding:1rem}.fas[_ngcontent-%COMP%]{font-size:1rem}"]}),n})();function pe(n,r){1&n&&(t.TgZ(0,"div",9),t._uU(1," No groups available. Please create one. "),t.qZA())}function me(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",10)(1,"input",11),t.NdJ("change",function(){const a=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.toggleSelection(a.id))}),t.qZA(),t.TgZ(2,"label",12)(3,"div")(4,"div",13),t._uU(5),t.qZA(),t.TgZ(6,"div",14),t._uU(7),t.qZA()()()()}if(2&n){const e=r.$implicit,o=t.oxw();t.xp6(1),t.Q6J("type",o.multiSelect?"checkbox":"radio")("id","group-"+e.id)("checked",o.isSelected(e.id))("name",o.multiSelect?"multi":"single"),t.xp6(1),t.Q6J("for","group-"+e.id),t.xp6(3),t.Oqu(e.name),t.xp6(2),t.hij("",e.count," users")}}let _e=(()=>{class n{constructor(e,o,i){this.groupService=e,this.dialogRef=o,this.data=i,this.groups=[],this.multiSelect=!1,this.selectedGroupIds=[],this.selectedGroupId=null}ngOnInit(){this.multiSelect=this.data.multiSelect??!1,this.data.groups?this.groups=this.data.groups:this.groupService.getGroups().subscribe(e=>{this.groups=e,console.log(this.groups,e)})}isSelected(e){return this.multiSelect?this.selectedGroupIds.includes(e):this.selectedGroupId===e}toggleSelection(e){this.multiSelect?this.selectedGroupIds=this.isSelected(e)?this.selectedGroupIds.filter(o=>o!==e):[...this.selectedGroupIds,e]:this.selectedGroupId=e}confirm(){this.dialogRef.close(this.multiSelect?this.selectedGroupIds:this.selectedGroupId)}cancel(){this.dialogRef.close(null)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(x.l),t.Y36(m.so),t.Y36(m.WI))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-select-group-popup"]],decls:13,vars:4,consts:[[1,"p-6","bg-white","rounded-lg","z-50"],[1,"text-2xl","text-gray-700","font-bold","mb-4"],[1,"text-sm","text-gray-600","mb-6"],[1,"grid","grid-cols-2","gap-4","max-h-96","overflow-y-auto"],["class","text-center text-gray-500 col-span-2",4,"ngIf"],["class","flex !w-full items-center space-x-2",4,"ngFor","ngForOf"],[1,"flex","justify-end","mt-6","space-x-4"],["type","button",1,"px-4","py-2","text-sm","font-medium","text-gray-700","bg-gray-100","rounded-md","hover:bg-gray-200",3,"click"],["type","button",1,"px-4","py-2","text-sm","font-medium","text-white","bg-primary","hover:bg-primary-dark","rounded-md","disabled:opacity-50",3,"disabled","click"],[1,"text-center","text-gray-500","col-span-2"],[1,"flex","!w-full","items-center","space-x-2"],[1,"group-input",3,"type","id","checked","name","change"],[1,"cursor-pointer","group-label",3,"for"],[1,"font-semibold","text-gray-800"],[1,"text-xs","text-gray-500"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"h2",1),t._uU(2,"Select Group"),t.qZA(),t.TgZ(3,"p",2),t._uU(4),t.qZA(),t.TgZ(5,"div",3),t.YNc(6,pe,2,0,"div",4),t.YNc(7,me,8,7,"div",5),t.qZA(),t.TgZ(8,"div",6)(9,"button",7),t.NdJ("click",function(){return o.cancel()}),t._uU(10," Cancel "),t.qZA(),t.TgZ(11,"button",8),t.NdJ("click",function(){return o.confirm()}),t._uU(12," Confirm "),t.qZA()()()),2&e&&(t.xp6(4),t.hij("Choose ",o.multiSelect?"groups":"a group",""),t.xp6(2),t.Q6J("ngIf",0===o.groups.length),t.xp6(1),t.Q6J("ngForOf",o.groups),t.xp6(4),t.Q6J("disabled",o.multiSelect?0===o.selectedGroupIds.length:!o.selectedGroupId))},dependencies:[l.sg,l.O5],styles:[".group-selection-dialog[_ngcontent-%COMP%]{max-width:500px;width:100%}.group-item[_ngcontent-%COMP%]{position:relative;margin-bottom:1rem}.group-input[_ngcontent-%COMP%]{position:absolute;opacity:0;width:0;height:0}.group-input[_ngcontent-%COMP%]:checked + .group-label[_ngcontent-%COMP%]{border-color:var(--primary-color);background-color:rgba(var(--primary-color-rgb),.05)}.group-input[_ngcontent-%COMP%]:checked + .group-label[_ngcontent-%COMP%]   .group-icon[_ngcontent-%COMP%]{opacity:1;transform:scale(1);color:var(--primary-color)}.group-input[_ngcontent-%COMP%]:disabled + .group-label[_ngcontent-%COMP%]{opacity:.5;cursor:not-allowed}.group-label[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:.5rem;border:2px solid #e5e7eb;border-radius:.5rem;cursor:pointer;transition:all .2s ease}.group-label[_ngcontent-%COMP%]:hover{border-color:var(--primary-color);background-color:rgba(var(--primary-color-rgb),.02)}.group-content[_ngcontent-%COMP%]{flex:1}.group-name[_ngcontent-%COMP%]{display:block;font-size:.875rem;font-weight:500;color:#111827}.group-description[_ngcontent-%COMP%]{display:block;font-size:.75rem;color:#6b7280;margin-top:.25rem}.group-icon[_ngcontent-%COMP%]{margin-left:1rem;opacity:0;transform:scale(.8);transition:all .2s ease;color:var(--primary-color)}"]}),n})();function fe(n,r){1&n&&(t.TgZ(0,"div",9),t._uU(1," No quizzes available. create a quiz to start. "),t.qZA())}const he=function(n){return{"opacity-50 cursor-not-allowed":n}};function xe(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",12)(1,"input",13),t.NdJ("ngModelChange",function(i){t.CHM(e);const a=t.oxw(2);return t.KtG(a.selectedQuizId=i)}),t.qZA(),t.TgZ(2,"label",14)(3,"div",15)(4,"span",16),t._uU(5),t.qZA(),t.TgZ(6,"span",17),t._uU(7),t.qZA()(),t.TgZ(8,"div",18),t._UZ(9,"i",19),t.qZA()()()}if(2&n){const e=r.$implicit,o=t.oxw(2);t.xp6(1),t.Q6J("id","quiz-"+e.id)("value",e.id)("ngModel",o.selectedQuizId)("disabled",o.disabledQuizIds.includes(e.id)),t.xp6(1),t.Q6J("for","quiz-"+e.id)("ngClass",t.VKq(8,he,o.disabledQuizIds.includes(e.id))),t.xp6(3),t.Oqu(e.title),t.xp6(2),t.hij("",e.questions.length," questions")}}function be(n,r){if(1&n&&(t.TgZ(0,"div",10),t.YNc(1,xe,10,10,"div",11),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.quizzes)}}let T=(()=>{class n{constructor(e,o,i){this.dialogRef=e,this.data=o,this.quizService=i,this.quizzes=[],this.selectedQuizId=null,this.disabledQuizIds=[],this.disabledQuizIds=o.disabledQuizIds,this.context=o.context,this.selectedQuizId=o.selectedQuizId||null}ngOnInit(){this.quizService.getQuizzes().subscribe(e=>{this.quizzes=e.filter(o=>!this.disabledQuizIds.includes(o.id))})}confirm(){if(this.selectedQuizId){const e=this.quizzes.find(o=>o.id===this.selectedQuizId);this.dialogRef.close(e)}}cancel(){this.dialogRef.close()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(m.so),t.Y36(m.WI),t.Y36(f.v))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-select-quiz"]],decls:13,vars:4,consts:[[1,"quiz-selection-dialog","p-6","bg-white","rounded-lg","shadow-lg"],[1,"text-2xl","text-gray-600","font-bold","mb-4"],[1,"text-sm","text-gray-600","mb-6"],[1,"quiz-list"],["class","text-center text-gray-500",4,"ngIf"],["class","text-center text-gray-500 grid grid-cols-2 gap-4 max-h-96 overflow-y-auto",4,"ngIf"],[1,"flex","justify-end","mt-6","space-x-4"],["type","button",1,"px-4","py-2","text-sm","font-medium","text-gray-700","bg-gray-100","rounded-md","hover:bg-gray-200",3,"click"],["type","button",1,"px-4","py-2","text-sm","font-medium","text-white","bg-primary","hover:bg-primary-dark","rounded-md","disabled:opacity-50",3,"disabled","click"],[1,"text-center","text-gray-500"],[1,"text-center","text-gray-500","grid","grid-cols-2","gap-4","max-h-96","overflow-y-auto"],["class","quiz-item ",4,"ngFor","ngForOf"],[1,"quiz-item"],["type","radio",1,"quiz-radio",3,"id","value","ngModel","disabled","ngModelChange"],[1,"quiz-label",3,"for","ngClass"],[1,"quiz-content"],[1,"quiz-name"],[1,"quiz-description","text-xs","text-gray-500","mt-1"],[1,"quiz-icon"],[1,"fas","fa-check"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"h2",1),t._uU(2,"Select Quiz"),t.qZA(),t.TgZ(3,"p",2),t._uU(4),t.qZA(),t.TgZ(5,"div",3),t.YNc(6,fe,2,0,"div",4),t.YNc(7,be,2,1,"div",5),t.qZA(),t.TgZ(8,"div",6)(9,"button",7),t.NdJ("click",function(){return o.cancel()}),t._uU(10," Cancel "),t.qZA(),t.TgZ(11,"button",8),t.NdJ("click",function(){return o.confirm()}),t._uU(12," Confirm "),t.qZA()()()),2&e&&(t.xp6(4),t.hij("Choose a quiz for ","formation"===o.context?"the formation":"the module",""),t.xp6(2),t.Q6J("ngIf",0===o.quizzes.length),t.xp6(1),t.Q6J("ngIf",o.quizzes.length>0),t.xp6(4),t.Q6J("disabled",!o.selectedQuizId))},dependencies:[l.mk,l.sg,l.O5,s.Fj,s._,s.JJ,s.On],styles:[".quiz-selection-dialog[_ngcontent-%COMP%]{max-width:500px;width:100%}.quiz-item[_ngcontent-%COMP%]{position:relative;margin-bottom:1rem}.quiz-radio[_ngcontent-%COMP%]{position:absolute;opacity:0;width:0;height:0}.quiz-radio[_ngcontent-%COMP%]:checked + .quiz-label[_ngcontent-%COMP%]{border-color:var(--primary-color);background-color:rgba(var(--primary-color-rgb),.05)}.quiz-radio[_ngcontent-%COMP%]:checked + .quiz-label[_ngcontent-%COMP%]   .quiz-icon[_ngcontent-%COMP%]{opacity:1;transform:scale(1);color:var(--primary-color)}.quiz-radio[_ngcontent-%COMP%]:disabled + .quiz-label[_ngcontent-%COMP%]{opacity:.5;cursor:not-allowed}.quiz-label[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:.5rem;border:2px solid #e5e7eb;border-radius:.5rem;cursor:pointer;transition:all .2s ease}.quiz-label[_ngcontent-%COMP%]:hover{border-color:var(--primary-color);background-color:rgba(var(--primary-color-rgb),.02)}.quiz-content[_ngcontent-%COMP%]{flex:1}.quiz-name[_ngcontent-%COMP%]{display:block;font-size:.875rem;font-weight:500;color:#111827}.quiz-description[_ngcontent-%COMP%]{display:block;font-size:.75rem;color:#6b7280;margin-top:.25rem}.quiz-icon[_ngcontent-%COMP%]{margin-left:1rem;opacity:0;transform:scale(.8);transition:all .2s ease;color:var(--primary-color)}"]}),n})();var O=d(7480);function ve(n,r){1&n&&(t.TgZ(0,"div",7)(1,"p",8),t._uU(2,"Chargement..."),t.qZA()())}function ye(n,r){1&n&&(t.TgZ(0,"div",7)(1,"p",8),t._uU(2,"Formation non trouv\xe9e."),t.qZA()())}function Ce(n,r){1&n&&(t.TgZ(0,"span"),t._uU(1,"Le titre est requis."),t.qZA())}function Ze(n,r){1&n&&(t.TgZ(0,"span"),t._uU(1,"Le titre doit contenir au moins 3 caract\xe8res."),t.qZA())}function we(n,r){if(1&n&&(t.TgZ(0,"div",39),t.YNc(1,Ce,2,0,"span",15),t.YNc(2,Ze,2,0,"span",15),t.qZA()),2&n){const e=t.oxw(3);let o,i;t.xp6(1),t.Q6J("ngIf",null==(o=e.formationForm.get("title"))||null==o.errors?null:o.errors.required),t.xp6(1),t.Q6J("ngIf",null==(i=e.formationForm.get("title"))||null==i.errors?null:i.errors.minlength)}}function Te(n,r){1&n&&(t.TgZ(0,"span"),t._uU(1,"La description est requise."),t.qZA())}function qe(n,r){1&n&&(t.TgZ(0,"span"),t._uU(1,"La description doit contenir au moins 10 caract\xe8res."),t.qZA())}function Me(n,r){if(1&n&&(t.TgZ(0,"div",39),t.YNc(1,Te,2,0,"span",15),t.YNc(2,qe,2,0,"span",15),t.qZA()),2&n){const e=t.oxw(3);let o,i;t.xp6(1),t.Q6J("ngIf",null==(o=e.formationForm.get("description"))||null==o.errors?null:o.errors.required),t.xp6(1),t.Q6J("ngIf",null==(i=e.formationForm.get("description"))||null==i.errors?null:i.errors.minlength)}}function Ae(n,r){1&n&&(t.TgZ(0,"span"),t._uU(1,"Le contenu est requis."),t.qZA())}function Oe(n,r){if(1&n&&(t.TgZ(0,"div",39),t.YNc(1,Ae,2,0,"span",15),t.qZA()),2&n){const e=t.oxw(3);let o;t.xp6(1),t.Q6J("ngIf",null==(o=e.formationForm.get("content"))||null==o.errors?null:o.errors.required)}}function ke(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",40)(1,"button",41),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(3);return t.KtG(i.openFinalQuizSelectionDialog())}),t._UZ(2,"i",42),t._uU(3," S\xe9lectionner un quiz final "),t.qZA()()}}function Ue(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",43)(1,"div",32),t._UZ(2,"i",44),t.TgZ(3,"span",45),t._uU(4),t.qZA()(),t.TgZ(5,"div",46)(6,"button",47),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(3);return t.KtG(i.openFinalQuizSelectionDialog())}),t._UZ(7,"i",48),t.qZA(),t.TgZ(8,"button",49),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(3);return t.KtG(i.removeFinalQuiz())}),t._UZ(9,"i",50),t.qZA()()()}if(2&n){const e=t.oxw(3);let o;t.xp6(4),t.Oqu(e.getQuizTitle(null==(o=e.formationForm.get("finalQuizId"))?null:o.value))}}function Pe(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",51)(1,"button",52),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(3);return t.KtG(i.cancel())}),t._uU(2," Annuler "),t.qZA(),t.TgZ(3,"button",53),t._uU(4," Mettre \xe0 jour "),t.qZA()()}if(2&n){const e=t.oxw(3);t.xp6(3),t.Q6J("disabled",e.formationForm.invalid||e.isLoading)}}function Fe(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"form",17),t.NdJ("ngSubmit",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.updateContent())}),t.TgZ(2,"h2",18),t._uU(3,"Informations de base"),t.qZA(),t.TgZ(4,"div",19)(5,"div")(6,"label",20),t._uU(7,"Titre"),t.qZA(),t._UZ(8,"input",21),t.YNc(9,we,3,2,"div",22),t.qZA(),t.TgZ(10,"div")(11,"label",20),t._uU(12,"Description"),t.qZA(),t._UZ(13,"textarea",23),t.YNc(14,Me,3,2,"div",22),t.qZA(),t.TgZ(15,"div")(16,"label",20),t._uU(17,"Contenu"),t.qZA(),t._UZ(18,"textarea",24),t.YNc(19,Oe,2,1,"div",22),t.qZA(),t.TgZ(20,"div",25)(21,"label",26),t._uU(22,"Quiz final"),t.qZA(),t.TgZ(23,"p",27),t._uU(24," Le quiz final est pr\xe9sent\xe9 \xe0 la fin de la formation et d\xe9termine si l'utilisateur a r\xe9ussi la formation. "),t.qZA(),t.TgZ(25,"div",28),t.YNc(26,ke,4,0,"div",29),t.YNc(27,Ue,10,1,"div",30),t.qZA(),t.TgZ(28,"div",31)(29,"div",32)(30,"div",33),t._UZ(31,"input",34),t.qZA(),t.TgZ(32,"div",35)(33,"label",36),t._uU(34," Permettre aux utilisateurs de passer le quiz final sans avoir compl\xe9t\xe9 tous les quiz des modules "),t.qZA(),t.TgZ(35,"p",37),t._uU(36," Si activ\xe9, les utilisateurs pourront acc\xe9der au quiz final m\xeame s'ils n'ont pas r\xe9ussi tous les quiz des modules. "),t.qZA()()()()()(),t.YNc(37,Pe,5,1,"div",38),t.qZA()()}if(2&n){const e=t.oxw(2);let o,i,a,c,u;t.xp6(1),t.Q6J("formGroup",e.formationForm),t.xp6(8),t.Q6J("ngIf",(null==(o=e.formationForm.get("title"))?null:o.invalid)&&(null==(o=e.formationForm.get("title"))?null:o.touched)),t.xp6(5),t.Q6J("ngIf",(null==(i=e.formationForm.get("description"))?null:i.invalid)&&(null==(i=e.formationForm.get("description"))?null:i.touched)),t.xp6(5),t.Q6J("ngIf",(null==(a=e.formationForm.get("content"))?null:a.invalid)&&(null==(a=e.formationForm.get("content"))?null:a.touched)),t.xp6(7),t.Q6J("ngIf",!(null!=(c=e.formationForm.get("finalQuizId"))&&c.value)),t.xp6(1),t.Q6J("ngIf",null==(u=e.formationForm.get("finalQuizId"))?null:u.value),t.xp6(10),t.Q6J("ngIf",e.formationForm.dirty)}}function ze(n,r){1&n&&(t.TgZ(0,"div",60),t._UZ(1,"div",61),t.qZA())}const Qe=function(n,r,e){return{"bg-green-100 text-green-800":n,"bg-yellow-100 text-yellow-800":r,"bg-gray-100 text-gray-800":e}};function Ie(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"td",68)(2,"div",69),t._uU(3),t.qZA()(),t.TgZ(4,"td",68)(5,"div",70),t._uU(6),t.ALo(7,"date"),t.qZA()(),t.TgZ(8,"td",68)(9,"div",70),t._uU(10),t.ALo(11,"date"),t.qZA()(),t.TgZ(12,"td",68)(13,"span",71),t._uU(14),t.qZA()(),t.TgZ(15,"td",72)(16,"button",73),t.NdJ("click",function(){const a=t.CHM(e).$implicit,c=t.oxw(4);return t.KtG(c.editSession(a))}),t._UZ(17,"i",74),t.qZA(),t.TgZ(18,"button",75),t.NdJ("click",function(){const a=t.CHM(e).$implicit,c=t.oxw(4);return t.KtG(c.deleteSession(a))}),t._UZ(19,"i",76),t.qZA()()()}if(2&n){const e=r.$implicit,o=t.oxw(4);t.xp6(3),t.Oqu(e.title),t.xp6(3),t.Oqu(t.lcZ(7,5,e.startDate)),t.xp6(4),t.Oqu(t.lcZ(11,7,e.endDate)),t.xp6(3),t.Q6J("ngClass",t.kEZ(9,Qe,"En cours"===o.getSessionStatus(e),"Pas encore"===o.getSessionStatus(e),"Termin\xe9e"===o.getSessionStatus(e))),t.xp6(1),t.hij(" ",o.getSessionStatus(e)," ")}}function Je(n,r){1&n&&(t.TgZ(0,"tr")(1,"td",77),t._uU(2," Aucune session disponible "),t.qZA()())}function Ne(n,r){if(1&n&&(t.TgZ(0,"div",62)(1,"table",63)(2,"thead",64)(3,"tr")(4,"th",65),t._uU(5," Titre"),t.qZA(),t.TgZ(6,"th",65),t._uU(7," Date de d\xe9but"),t.qZA(),t.TgZ(8,"th",65),t._uU(9," Date de fin"),t.qZA(),t.TgZ(10,"th",65),t._uU(11," Statut"),t.qZA(),t.TgZ(12,"th",65),t._uU(13," Actions"),t.qZA()()(),t.TgZ(14,"tbody",66),t.YNc(15,Ie,20,13,"tr",67),t.YNc(16,Je,3,0,"tr",15),t.qZA()()()),2&n){const e=t.oxw(3);t.xp6(15),t.Q6J("ngForOf",e.formation.sessions),t.xp6(1),t.Q6J("ngIf",0===e.formation.sessions.length)}}function Ee(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"div",54)(2,"h2",55),t._uU(3,"Sessions"),t.qZA(),t.TgZ(4,"button",56),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.openSessionDialog())}),t._UZ(5,"i",57),t._uU(6," Ajouter une session "),t.qZA()(),t.YNc(7,ze,2,0,"div",58),t.YNc(8,Ne,17,2,"div",59),t.qZA()}if(2&n){const e=t.oxw(2);t.xp6(7),t.Q6J("ngIf",e.isLoadingSessions),t.xp6(1),t.Q6J("ngIf",!e.isLoadingSessions)}}function Se(n,r){if(1&n&&(t.TgZ(0,"div",85),t._UZ(1,"input",86),t.TgZ(2,"label",87)(3,"div",88)(4,"span",89),t._uU(5),t.qZA()(),t.TgZ(6,"div",90),t._UZ(7,"i",91),t.qZA()()()),2&n){const e=r.$implicit;t.xp6(1),t.Q6J("id","category-"+e)("value",e),t.xp6(1),t.Q6J("for","category-"+e),t.xp6(3),t.Oqu(e)}}function De(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",92)(1,"button",52),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(3);return t.KtG(i.resetCategory())}),t._uU(2," Annuler "),t.qZA(),t.TgZ(3,"button",53),t._uU(4," Mettre \xe0 jour "),t.qZA()()}if(2&n){const e=t.oxw(3);t.xp6(3),t.Q6J("disabled",e.categoryForm.invalid)}}function Ye(n,r){if(1&n&&(t.TgZ(0,"span",100),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.description)}}function Le(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",93)(1,"input",94),t.NdJ("change",function(){const a=t.CHM(e).$implicit,c=t.oxw(3);return t.KtG(c.toggleGroup(a.id))}),t.qZA(),t.TgZ(2,"label",95)(3,"div",96)(4,"span",97),t._uU(5),t.qZA(),t.YNc(6,Ye,2,1,"span",98),t.qZA(),t.TgZ(7,"div",99),t._UZ(8,"i",91),t.qZA()()()}if(2&n){const e=r.$implicit,o=t.oxw(3);t.xp6(1),t.Q6J("id","group-"+e.id)("checked",o.groupIdsArray.value.includes(e.id)),t.xp6(1),t.Q6J("for","group-"+e.id),t.xp6(3),t.Oqu(e.name),t.xp6(1),t.Q6J("ngIf",e.description)}}function Ge(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",92)(1,"button",52),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(3);return t.KtG(i.resetGroupsForm())}),t._uU(2," Annuler "),t.qZA(),t.TgZ(3,"button",53),t._uU(4," Mettre \xe0 jour "),t.qZA()()}if(2&n){const e=t.oxw(3);t.xp6(3),t.Q6J("disabled",e.groupForm.invalid)}}function je(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",78)(1,"form",17),t.NdJ("ngSubmit",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.updateCategory())}),t.TgZ(2,"div",79)(3,"h3",80),t._uU(4,"Cat\xe9gorie"),t.qZA(),t.TgZ(5,"div",81),t.YNc(6,Se,8,4,"div",82),t.qZA(),t.YNc(7,De,5,1,"div",83),t.qZA()(),t.TgZ(8,"form",17),t.NdJ("ngSubmit",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.updateGroups())}),t.TgZ(9,"div")(10,"h3",80),t._uU(11,"Groupes cibles"),t.qZA(),t.TgZ(12,"div",81),t.YNc(13,Le,9,5,"div",84),t.qZA(),t.YNc(14,Ge,5,1,"div",83),t.qZA()()()}if(2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("formGroup",e.categoryForm),t.xp6(5),t.Q6J("ngForOf",e.categories),t.xp6(1),t.Q6J("ngIf",e.categoryForm.dirty),t.xp6(1),t.Q6J("formGroup",e.groupForm),t.xp6(5),t.Q6J("ngForOf",e.groups),t.xp6(1),t.Q6J("ngIf",e.groupIdsArray.dirty)}}function He(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",40)(1,"button",41),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().index,a=t.oxw(3);return t.KtG(a.openQuizSelectionDialog(i))}),t._UZ(2,"i",42),t._uU(3," S\xe9lectionner un quiz "),t.qZA()()}}function Ke(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",129)(1,"div",32),t._UZ(2,"i",130),t.TgZ(3,"span",45),t._uU(4),t.qZA()(),t.TgZ(5,"div",46)(6,"button",47),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().index,a=t.oxw(3);return t.KtG(a.openQuizSelectionDialog(i))}),t._UZ(7,"i",48),t.qZA(),t.TgZ(8,"button",49),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().index,a=t.oxw(3);return t.KtG(a.removeQuiz(i))}),t._UZ(9,"i",50),t.qZA()()()}if(2&n){const e=t.oxw().$implicit,o=t.oxw(3);let i;t.xp6(4),t.Oqu(o.getQuizTitle(null==(i=e.get("quizId"))?null:i.value))}}function $e(n,r){1&n&&(t.TgZ(0,"div",131)(1,"label",110),t._uU(2," Nombre maximum de tentatives "),t.qZA(),t.TgZ(3,"div",32)(4,"div",132)(5,"div",133),t._UZ(6,"i",134),t.qZA(),t._UZ(7,"input",135),t.qZA()(),t.TgZ(8,"div",136)(9,"div",137),t._UZ(10,"i",138),t.qZA(),t.TgZ(11,"div",139)(12,"p",140),t._uU(13," D\xe9finissez le nombre maximum de tentatives autoris\xe9es pour ce quiz. Utilisez "),t.TgZ(14,"strong"),t._uU(15,"0"),t.qZA(),t._uU(16," pour des tentatives illimit\xe9es. "),t.qZA()()()())}function Re(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",143)(1,"div",32),t._UZ(2,"img",144),t.TgZ(3,"a",145),t._uU(4),t.qZA()(),t.TgZ(5,"button",49),t.NdJ("click",function(){const a=t.CHM(e).$implicit,c=t.oxw(2).index,u=t.oxw(3);return t.KtG(u.deleteAttachment(c,a.id))}),t._UZ(6,"i",76),t.qZA()()}if(2&n){const e=r.$implicit,o=t.oxw(5);t.xp6(2),t.Q6J("src",o.getFileIcon(e.type),t.LSH),t.xp6(1),t.Q6J("href",e.lien,t.LSH),t.xp6(1),t.hij(" ",o.getFileName(e.lien)||"Fichier "+e.type," ")}}function Be(n,r){if(1&n&&(t.TgZ(0,"div",141),t.YNc(1,Re,7,3,"div",142),t.qZA()),2&n){const e=t.oxw().index,o=t.oxw(3);t.xp6(1),t.Q6J("ngForOf",o.getModuleAttachments(e))}}function Ve(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",146)(1,"div",40)(2,"div",32),t._UZ(3,"i",147),t.TgZ(4,"span",45),t._uU(5),t.qZA()(),t.TgZ(6,"span",148),t._uU(7),t.qZA()(),t.TgZ(8,"button",149),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().index,a=t.oxw(3);return t.KtG(a.uploadFile(i))}),t._UZ(9,"i",150),t._uU(10," T\xe9l\xe9charger "),t.qZA()()}if(2&n){const e=t.oxw().index,o=t.oxw(3);t.xp6(5),t.Oqu(o.selectedFiles[e].name),t.xp6(2),t.Oqu(o.formatFileSize(o.selectedFiles[e].size))}}function We(n,r){1&n&&(t.TgZ(0,"div",151)(1,"p",148),t._uU(2," Formats accept\xe9s: PDF, Word, Excel, PowerPoint, images et vid\xe9os "),t.qZA()())}function Xe(n,r){1&n&&(t.TgZ(0,"span"),t._uU(1,"T\xe9l\xe9chargement en cours..."),t.qZA())}function to(n,r){1&n&&(t.TgZ(0,"span",157),t._UZ(1,"i",158),t._uU(2," T\xe9l\xe9chargement r\xe9ussi "),t.qZA())}function eo(n,r){if(1&n&&(t.TgZ(0,"div",151)(1,"div",152)(2,"div",153),t._UZ(3,"div",154),t.qZA()(),t.TgZ(4,"div",155)(5,"span"),t._uU(6),t.qZA(),t.YNc(7,Xe,2,0,"span",15),t.YNc(8,to,3,0,"span",156),t.qZA()()),2&n){const e=t.oxw().index,o=t.oxw(3);t.xp6(3),t.Udp("width",o.uploadProgress[e],"%"),t.xp6(3),t.hij("",o.uploadProgress[e],"% termin\xe9"),t.xp6(1),t.Q6J("ngIf",o.uploadProgress[e]<100),t.xp6(1),t.Q6J("ngIf",100===o.uploadProgress[e])}}function oo(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",106)(1,"div",107)(2,"div",40)(3,"div",108)(4,"div")(5,"label",20),t._uU(6,"Titre"),t.qZA(),t._UZ(7,"input",21),t.qZA(),t.TgZ(8,"div")(9,"label",20),t._uU(10,"Description"),t.qZA(),t._UZ(11,"textarea",109),t.qZA(),t.TgZ(12,"div")(13,"label",110),t._uU(14,"Quiz associ\xe9"),t.qZA(),t.TgZ(15,"div",28),t.YNc(16,He,4,0,"div",29),t.YNc(17,Ke,10,1,"div",111),t.qZA()(),t.YNc(18,$e,17,0,"div",112),t.TgZ(19,"div")(20,"label",110),t._uU(21,"Pi\xe8ces jointes"),t.qZA(),t.YNc(22,Be,2,1,"div",113),t.TgZ(23,"div",114)(24,"input",115,116),t.NdJ("change",function(i){const c=t.CHM(e).index,u=t.oxw(3);return t.KtG(u.onFileSelected(i,c))}),t.qZA(),t.TgZ(26,"label",117),t.NdJ("click",function(){t.CHM(e);const i=t.MAs(25);return t.KtG(i.click())}),t._UZ(27,"i",118),t._uU(28," Ajouter un fichier "),t.qZA(),t.YNc(29,Ve,11,2,"div",119),t.YNc(30,We,3,0,"div",120),t.YNc(31,eo,9,5,"div",120),t.qZA()()()(),t.TgZ(32,"div",121)(33,"div",122),t._UZ(34,"i",123),t.qZA(),t.TgZ(35,"button",124),t.NdJ("click",function(){const a=t.CHM(e).index,c=t.oxw(3);return t.KtG(c.moveModule(a,a-1))}),t._UZ(36,"i",125),t.qZA(),t.TgZ(37,"button",124),t.NdJ("click",function(){const a=t.CHM(e).index,c=t.oxw(3);return t.KtG(c.moveModule(a,a+1))}),t._UZ(38,"i",126),t.qZA(),t.TgZ(39,"button",127),t.NdJ("click",function(){const a=t.CHM(e).index,c=t.oxw(3);return t.KtG(c.removeModule(a))}),t._UZ(40,"i",76),t.qZA()()(),t.TgZ(41,"div",128),t._uU(42),t.qZA()()}if(2&n){const e=r.$implicit,o=r.index,i=t.oxw(3);let a,c,u,g;t.Q6J("formGroupName",o),t.xp6(16),t.Q6J("ngIf",!(null!=(a=e.get("quizId"))&&a.value)),t.xp6(1),t.Q6J("ngIf",null==(c=e.get("quizId"))?null:c.value),t.xp6(1),t.Q6J("ngIf",null==(u=e.get("quizId"))?null:u.value),t.xp6(4),t.Q6J("ngIf",i.getModuleAttachments(o).length>0),t.xp6(4),t.MGl("for","file-upload-",o,""),t.xp6(3),t.Q6J("ngIf",i.selectedFiles[o]),t.xp6(1),t.Q6J("ngIf",!i.selectedFiles[o]&&!i.isUploading[o]),t.xp6(1),t.Q6J("ngIf",i.isUploading[o]),t.xp6(4),t.Q6J("disabled",0===o),t.xp6(2),t.Q6J("disabled",o===i.modules.length-1),t.xp6(5),t.hij(" Position: ",null==(g=e.get("position"))?null:g.value," ")}}function no(n,r){1&n&&(t.TgZ(0,"div",159),t._uU(1,' Aucun module disponible. Cliquez sur "Ajouter un module" pour commencer. '),t.qZA())}function io(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",160)(1,"button",52),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(3);return t.KtG(i.loadData())}),t._uU(2," Annuler "),t.qZA(),t.TgZ(3,"button",161),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(3);return t.KtG(i.updateModules())}),t._uU(4," Enregistrer les modules "),t.qZA()()}}function ro(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"form",101)(2,"div",54)(3,"h2",55),t._uU(4,"Modules"),t.qZA(),t.TgZ(5,"button",56),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.addModule())}),t._UZ(6,"i",57),t._uU(7," Ajouter un module "),t.qZA()(),t.TgZ(8,"div",102),t.YNc(9,oo,43,12,"div",103),t.YNc(10,no,2,0,"div",104),t.qZA(),t.YNc(11,io,5,0,"div",105),t.qZA()()}if(2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("formGroup",e.modulesForm),t.xp6(8),t.Q6J("ngForOf",e.modules.controls),t.xp6(1),t.Q6J("ngIf",0===e.modules.length),t.xp6(1),t.Q6J("ngIf",e.modules.dirty)}}const Z=function(n,r){return{"border-primary text-primary":n,"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300":r}};function ao(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",9)(1,"div",10)(2,"div",11)(3,"nav",12)(4,"button",13),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.setActiveTab("info"))}),t._uU(5," Informations de base "),t.qZA(),t.TgZ(6,"button",13),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.setActiveTab("sessions"))}),t._uU(7," Sessions "),t.qZA(),t.TgZ(8,"button",13),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.setActiveTab("groups"))}),t._uU(9," Groupes et Cat\xe9gorie "),t.qZA(),t.TgZ(10,"button",13),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.setActiveTab("modules"))}),t._uU(11," Modules "),t.qZA()()(),t.TgZ(12,"div",14),t.YNc(13,Fe,38,7,"div",15),t.YNc(14,Ee,9,2,"div",15),t.YNc(15,je,15,6,"div",16),t.YNc(16,ro,12,4,"div",15),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(4),t.Q6J("ngClass",t.WLB(8,Z,"info"===e.activeTab,"info"!==e.activeTab)),t.xp6(2),t.Q6J("ngClass",t.WLB(11,Z,"sessions"===e.activeTab,"sessions"!==e.activeTab)),t.xp6(2),t.Q6J("ngClass",t.WLB(14,Z,"groups"===e.activeTab,"groups"!==e.activeTab)),t.xp6(2),t.Q6J("ngClass",t.WLB(17,Z,"modules"===e.activeTab,"modules"!==e.activeTab)),t.xp6(3),t.Q6J("ngIf","info"===e.activeTab),t.xp6(1),t.Q6J("ngIf","sessions"===e.activeTab),t.xp6(1),t.Q6J("ngIf","groups"===e.activeTab),t.xp6(1),t.Q6J("ngIf","modules"===e.activeTab)}}let so=(()=>{class n{constructor(e,o,i,a,c,u,g,ln,dn,un){this.fb=e,this.formationService=o,this.groupService=i,this.attachmentService=a,this.sessionsService=c,this.quizService=u,this.route=g,this.router=ln,this.toaster=dn,this.dialog=un,this.categories=w.y,this.availableRoles=[_.i.Administrator,_.i.HierarchicalLeader,_.i.TeamLeader,_.i.PostLeader,_.i.QualityAgent,_.i.Manager],this.formation=null,this.groups=[],this.quizzes=[],this.isLoading=!0,this.activeTab="info",this.selectedFiles={},this.uploadProgress={},this.isUploading={},this.scrollPosition=0,this.isLoadingSessions=!1,this.subscriptions=[],this.formationId=+this.route.snapshot.paramMap.get("id"),this.formationForm=this.fb.group({title:["",[s.kI.required,s.kI.minLength(3)]],description:["",[s.kI.required,s.kI.minLength(10)]],content:["",s.kI.required],finalQuizId:[null],canPassFinalWithoutModules:[!1]}),this.categoryForm=this.fb.group({category:["",s.kI.required]}),this.groupForm=this.fb.group({groupIds:this.fb.array([])}),this.modulesForm=this.fb.group({modules:this.fb.array([])})}get groupIdsArray(){return this.groupForm.get("groupIds")}get groupsChanged(){const e=this.groupIdsArray.value,o=this.formation?.groups.map(i=>i.id)||[];return e.length!==o.length||e.some(i=>!o.includes(i))}ngOnInit(){const e=this.route.queryParams.subscribe(o=>{o.tab&&(this.activeTab=o.tab),o.scroll&&(this.scrollPosition=+o.scroll,setTimeout(()=>{window.scrollTo(0,this.scrollPosition)},100))});this.subscriptions.push(e),this.loadData(),this.loadGroups(),this.loadQuizzes(),window.addEventListener("scroll",this.onScroll.bind(this))}loadQuizzes(){this.quizService.getQuizzes().subscribe({next:e=>{this.quizzes=e},error:e=>{console.error("Error loading quizzes:",e),this.toaster.showError("Erreur","Impossible de charger les quiz.")}})}onScroll(){clearTimeout(this.scrollTimeout),this.scrollTimeout=setTimeout(()=>{this.scrollPosition=window.scrollY,this.updateUrlParams()},100)}updateUrlParams(){this.router.navigate([],{relativeTo:this.route,queryParams:{tab:this.activeTab,scroll:Math.round(this.scrollPosition)},queryParamsHandling:"merge",replaceUrl:!0})}setActiveTab(e){this.activeTab=e,this.updateUrlParams()}ngOnDestroy(){window.removeEventListener("scroll",this.onScroll.bind(this)),this.subscriptions.forEach(e=>e.unsubscribe())}openSessionDialog(){this.dialog.open(v.U,{width:"500px",data:{formationId:this.formationId}}).afterClosed().subscribe(o=>{o&&(this.loadData(),this.toaster.showSuccess("Succ\xe8s","Session cr\xe9\xe9e avec succ\xe8s"))})}editSession(e){this.dialog.open(v.U,{width:"500px",data:{formationId:this.formationId,session:e}}).afterClosed().subscribe(i=>{i&&(this.loadData(),this.toaster.showSuccess("Succ\xe8s","Session mise \xe0 jour avec succ\xe8s"))})}deleteSession(e){confirm(`\xcates-vous s\xfbr de vouloir supprimer la session "${e.title}" ? Cette action est irr\xe9versible.`)&&(this.isLoadingSessions=!0,this.sessionsService.deleteSession(e.id).subscribe({next:()=>{this.toaster.showSuccess("Succ\xe8s","Session supprim\xe9e avec succ\xe8s"),this.loadData()},error:o=>{console.error("Error deleting session:",o),this.toaster.handleHttpError(o),this.isLoadingSessions=!1}}))}getSessionStatus(e){const o=new Date,i=new Date(e.startDate);return o>new Date(e.endDate)?"Termin\xe9e":o<i?"Pas encore":"En cours"}loadData(){this.isLoading=!0,this.isLoadingSessions=!0,this.formationService.getFormation(this.formationId).subscribe({next:e=>{this.formation=e,this.populateForm(e),this.categoryForm.patchValue({category:e.category}),this.groupIdsArray.clear(),e.groups.forEach(o=>{this.groupIdsArray.push(this.fb.control(o.id))}),this.modules.clear(),e.modules.forEach(o=>{this.pushModule(o)}),this.isLoading=!1,this.isLoadingSessions=!1},error:e=>{console.error("Error loading formation:",e),this.toaster.showError("Erreur","Impossible de charger la formation."),this.isLoading=!1,this.isLoadingSessions=!1}})}loadGroups(){this.groupService.getGroups().subscribe({next:e=>{this.groups=e},error:e=>{console.error("Error loading groups:",e),this.toaster.showError("Erreur","Impossible de charger les groupes.")}})}populateForm(e){this.formationForm.patchValue({title:e.title,description:e.description,content:e.content,finalQuizId:e.finalQuizId,canPassFinalWithoutModules:e.canPassFinalWithoutModules||!1}),this.formationForm.markAsPristine()}toggleGroup(e){const o=this.groupIdsArray.controls.findIndex(i=>i.value===e);-1!==o?this.groupIdsArray.removeAt(o):this.groupIdsArray.push(this.fb.control(e)),this.groupIdsArray.markAsDirty()}resetGroupsForm(){this.groupIdsArray.clear(),this.formation?.groups.forEach(e=>{this.groupIdsArray.push(this.fb.control(e.id))}),this.groupIdsArray.markAsPristine()}resetCategory(){this.categoryForm.patchValue({category:this.formation?.category})}cancel(){this.router.navigate(["/admin/formations"])}openGroupSelectionDialog(){this.dialog.open(_e,{width:"500px",data:{groups:this.groups,multiSelect:!0}}).afterClosed().subscribe(o=>{o&&console.log(o)})}updateContent(){const e={...this.formationForm.getRawValue()};console.log(e),console.log(this.formationForm.value),this.formationService.updateFormationContent(this.formationId,e).subscribe({next:()=>{this.toaster.showSuccess("Succ\xe8s","Contenu de la formation mis \xe0 jour avec succ\xe8s"),this.loadData()},error:o=>{this.toaster.handleHttpError(o)}})}updateCategory(){this.formationService.updateFormationCategory(this.formationId,this.categoryForm.value).subscribe({next:()=>{this.toaster.showSuccess("Success","Formation category updated successfully"),this.loadData()},error:e=>{this.toaster.handleHttpError(e)}})}updateGroups(){this.formationService.updateFormationGroups(this.formationId,this.groupForm.value).subscribe({next:()=>{this.toaster.showSuccess("Success","Formation groups updated successfully"),this.loadData()},error:e=>{this.toaster.handleHttpError(e)}})}get modules(){return this.modulesForm.get("modules")}createModuleFormGroup(){return this.fb.group({id:[null],formationId:[this.formationId],title:["",[s.kI.required,s.kI.minLength(3)]],description:["",[s.kI.required,s.kI.minLength(10)]],position:[this.modules.length+1,s.kI.required],quizId:[null],maxAttempts:[3,[s.kI.required,s.kI.min(0)]]})}addModule(){this.modules.push(this.createModuleFormGroup()),this.updateModulePositions(),setTimeout(()=>{window.scrollTo({top:document.body.scrollHeight,behavior:"smooth"})},100)}removeModule(e){this.modules.removeAt(e),this.updateModulePositions()}updateModulePositions(){this.modules.controls.forEach((e,o)=>{e.patchValue({position:o+1})})}removeFinalQuiz(){this.formationForm.patchValue({finalQuizId:null}),this.formationForm.markAsDirty()}removeQuiz(e){this.modules.at(e).patchValue({quizId:null}),this.modules.markAsDirty()}moveModule(e,o){const i=this.modules.at(e);this.modules.removeAt(e),this.modules.insert(o,i),this.updateModulePositions()}pushModule(e){this.modules.push(this.fb.group({id:[e.id],formationId:[e.formationId],title:[e.title,[s.kI.required,s.kI.minLength(3)]],description:[e.description,[s.kI.required,s.kI.minLength(10)]],position:[e.position,s.kI.required],quizId:[e.quizId],maxAttempts:[e.maxAttempts||3,[s.kI.required,s.kI.min(0)]]}))}updateModules(){this.modulesForm.valid?this.formationService.updateFormationModules(this.formationId,this.modulesForm.value).subscribe({next:()=>{this.toaster.showSuccess("Succ\xe8s","Modules mis \xe0 jour avec succ\xe8s"),this.loadData()},error:e=>{this.toaster.handleHttpError(e)}}):(this.modulesForm.markAllAsTouched(),this.toaster.showError("Erreur","Veuillez remplir tous les champs requis."))}getModuleAttachments(e){if(!this.formation||!this.formation.modules)return[];const o=this.modules.at(e).get("id")?.value;return o&&this.formation.modules.find(a=>a.id===o)?.attachments||[]}getFileIcon(e){return this.attachmentService.getFileIcon(e)}getFileName(e){return this.attachmentService.getFileName(e)}onFileSelected(e,o){const i=e.target;i.files&&i.files.length>0&&(this.selectedFiles[o]=i.files[0])}formatFileSize(e){return this.attachmentService.formatFileSize(e)}uploadFile(e){const o=this.selectedFiles[e];if(!o)return;const i=this.modules.at(e).get("id")?.value;i?(this.isUploading[e]=!0,this.uploadProgress[e]=0,this.attachmentService.uploadAttachment(i,o).subscribe({next:()=>{this.uploadProgress[e]=100,this.toaster.showSuccess("Succ\xe8s","Fichier t\xe9l\xe9charg\xe9 avec succ\xe8s"),this.loadData(),setTimeout(()=>{delete this.selectedFiles[e],delete this.uploadProgress[e],delete this.isUploading[e]},2e3)},error:a=>{delete this.uploadProgress[e],delete this.isUploading[e],this.toaster.handleHttpError(a)}})):this.toaster.showError("Erreur","Veuillez d'abord enregistrer le module avant d'ajouter des pi\xe8ces jointes.")}deleteAttachment(e,o){!o||confirm("\xcates-vous s\xfbr de vouloir supprimer cette pi\xe8ce jointe ? Cette action est irr\xe9versible.")&&this.attachmentService.deleteAttachment(o).subscribe({next:()=>{this.toaster.showSuccess("Succ\xe8s","Pi\xe8ce jointe supprim\xe9e avec succ\xe8s"),this.loadData()},error:i=>{this.toaster.handleHttpError(i)}})}openQuizSelectionDialog(e){const o=[];this.modules.controls.forEach((c,u)=>{const g=c.get("quizId")?.value;g&&u!==e&&o.push(g)});const i=this.modules.at(e).get("quizId")?.value;this.dialog.open(T,{width:"500px",data:{disabledQuizIds:o,context:"module",selectedQuizId:i}}).afterClosed().subscribe(c=>{c&&(this.modules.at(e).patchValue({quizId:c.id}),this.modules.markAsDirty())})}getQuizTitle(e){if(!e)return"Aucun quiz s\xe9lectionn\xe9";const o=this.quizzes.find(i=>i.id===e);return o?o.title:"Quiz inconnu"}openFinalQuizSelectionDialog(){const e=[];this.modules.controls.forEach(a=>{const c=a.get("quizId")?.value;c&&e.push(c)});const o=this.formationForm.get("finalQuizId")?.value;this.dialog.open(T,{width:"500px",data:{disabledQuizIds:e,context:"formation",selectedQuizId:o}}).afterClosed().subscribe(a=>{a&&(this.formationForm.patchValue({finalQuizId:a.id}),this.formationForm.markAsDirty())})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(s.qu),t.Y36(y.B),t.Y36(x.l),t.Y36(O.L),t.Y36(A.Z),t.Y36(f.v),t.Y36(p.gz),t.Y36(p.F0),t.Y36(C.M),t.Y36(m.uw))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-update-formation"]],decls:10,vars:3,consts:[[1,"max-w-6xl","mx-auto"],[1,"mt-10"],[1,"px-8","py-4"],[1,"text-3xl","font-bold","text-gray-800"],[1,"mt-1","text-sm","text-gray-600"],["class","text-center py-4",4,"ngIf"],["class","p-8",4,"ngIf"],[1,"text-center","py-4"],[1,"text-gray-600"],[1,"p-8"],[1,"bg-white","shadow-md","rounded-lg","overflow-hidden"],[1,"border-b","border-gray-200"],[1,"flex","-mb-px"],[1,"py-4","px-6","font-medium","text-sm","border-b-2","focus:outline-none",3,"ngClass","click"],[1,"p-6"],[4,"ngIf"],["class","space-y-8",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"text-2xl","font-bold","mb-6"],[1,"grid","grid-cols-1","gap-6"],[1,"block","text-sm","font-medium","text-gray-700"],["type","text","formControlName","title",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","focus:border-primary","focus:ring-primary"],["class","text-red-500 text-sm mt-1",4,"ngIf"],["formControlName","description","rows","3",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","focus:border-primary","focus:ring-primary"],["formControlName","content","rows","5",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","focus:border-primary","focus:ring-primary"],[1,"mt-6","p-4","bg-gray-50","rounded-lg"],[1,"block","text-lg","font-medium","text-gray-700","mb-2"],[1,"text-sm","text-gray-500","mb-3"],[1,"flex","items-center","space-x-2"],["class","flex-1",4,"ngIf"],["class","flex-1 flex items-center justify-between bg-white p-3 rounded border border-gray-200",4,"ngIf"],[1,"mt-6","p-3","bg-blue-50","border","border-blue-200","rounded-lg"],[1,"flex","items-center"],[1,"flex","items-center","h-5"],["type","checkbox","id","canPassFinalWithoutModules","formControlName","canPassFinalWithoutModules",1,"h-5","w-5","rounded","border-blue-300","text-blue-600","focus:ring-blue-500"],[1,"ml-3","text-sm"],["for","canPassFinalWithoutModules",1,"font-medium","text-gray-700"],[1,"text-gray-500","mt-1"],["class","flex justify-end space-x-4 mt-8 animate-accordion-down",4,"ngIf"],[1,"text-red-500","text-sm","mt-1"],[1,"flex-1"],["type","button",1,"inline-flex","items-center","px-3","py-2","border","border-gray-300","shadow-sm","text-sm","leading-4","font-medium","rounded-md","text-gray-700","bg-white","hover:bg-gray-50","focus:outline-none",3,"click"],[1,"fas","fa-plus-circle","mr-2","text-primary"],[1,"flex-1","flex","items-center","justify-between","bg-white","p-3","rounded","border","border-gray-200"],[1,"fas","fa-award","text-primary","mr-2"],[1,"text-sm","font-medium"],[1,"flex","space-x-2"],["type","button",1,"text-primary","hover:text-primary-dark",3,"click"],[1,"fas","fa-exchange-alt"],["type","button",1,"text-red-500","hover:text-red-700",3,"click"],[1,"fas","fa-times"],[1,"flex","justify-end","space-x-4","mt-8","animate-accordion-down"],["type","button",1,"px-4","py-2","text-sm","font-medium","text-gray-700","bg-gray-100","rounded-lg","hover:bg-gray-200",3,"click"],["type","submit",1,"px-4","py-2","text-sm","font-medium","text-white","bg-primary","rounded-lg","hover:bg-primary-dark","disabled:opacity-50",3,"disabled"],[1,"flex","justify-between","items-center","mb-6"],[1,"text-2xl","font-bold"],["type","button",1,"inline-flex","items-center","px-4","py-2","border","border-transparent","text-sm","font-medium","rounded-md","text-white","bg-primary","hover:bg-primary-dark",3,"click"],[1,"fas","fa-plus","mr-2"],["class","flex justify-center py-8",4,"ngIf"],["class","overflow-x-auto",4,"ngIf"],[1,"flex","justify-center","py-8"],[1,"animate-spin","rounded-full","h-8","w-8","border-t-2","border-b-2","border-primary"],[1,"overflow-x-auto"],[1,"min-w-full","divide-y","divide-gray-200"],[1,"bg-gray-50"],["scope","col",1,"px-6","py-3","text-left","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"bg-white","divide-y","divide-gray-200"],[4,"ngFor","ngForOf"],[1,"px-6","py-4","whitespace-nowrap"],[1,"text-sm","font-medium","text-gray-900"],[1,"text-sm","text-gray-500"],[1,"px-2","inline-flex","text-xs","leading-5","font-semibold","rounded-full",3,"ngClass"],[1,"px-6","py-4","whitespace-nowrap","text-sm","font-medium"],[1,"text-primary","hover:text-primary-dark","mr-3",3,"click"],[1,"fas","fa-edit"],[1,"text-red-600","hover:text-red-900",3,"click"],[1,"fas","fa-trash"],["colspan","5",1,"px-6","py-4","text-center","text-sm","text-gray-500"],[1,"space-y-8"],[1,"mb-8"],[1,"text-xl","font-bold","mb-4"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4"],["class","category-item",4,"ngFor","ngForOf"],["class","flex justify-end space-x-4 mt-4 animate-accordion-down",4,"ngIf"],["class","group-item",4,"ngFor","ngForOf"],[1,"category-item"],["type","radio","formControlName","category",1,"category-radio",3,"id","value"],[1,"category-label",3,"for"],[1,"category-content"],[1,"category-name"],[1,"category-icon"],[1,"fas","fa-check"],[1,"flex","justify-end","space-x-4","mt-4","animate-accordion-down"],[1,"group-item"],["type","checkbox",1,"group-checkbox",3,"id","checked","change"],[1,"group-label",3,"for"],[1,"group-content"],[1,"group-name"],["class","group-description",4,"ngIf"],[1,"group-icon"],[1,"group-description"],[3,"formGroup"],["formArrayName","modules",1,"space-y-4"],["class","module-item bg-gray-50 p-4 rounded-lg","cdkDrag","",3,"formGroupName",4,"ngFor","ngForOf"],["class","text-center py-8 text-gray-500",4,"ngIf"],["class","flex justify-end space-x-4 mt-6",4,"ngIf"],["cdkDrag","",1,"module-item","bg-gray-50","p-4","rounded-lg",3,"formGroupName"],[1,"flex","items-start","space-x-4"],[1,"grid","grid-cols-1","gap-4"],["formControlName","description","rows","2",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","focus:border-primary","focus:ring-primary"],[1,"block","text-sm","font-medium","text-gray-700","mb-2"],["class","flex-1 flex items-center justify-between bg-gray-50 p-2 rounded",4,"ngIf"],["class","mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",4,"ngIf"],["class","mb-3",4,"ngIf"],[1,"mt-3"],["type","file","accept",".pdf,.doc,.docx,.xls,.xlsx,.ppt,.pptx,.jpg,.jpeg,.png,.gif,.mp4,.avi,.mov",1,"!hidden",3,"change"],["fileInput",""],[1,"cursor-pointer","inline-flex","items-center","px-3","py-2","border","border-gray-300","shadow-sm","text-sm","leading-4","font-medium","rounded-md","text-gray-700","bg-white","hover:bg-gray-50","focus:outline-none",3,"for","click"],[1,"fas","fa-paperclip","mr-2"],["class","flex items-center mt-2 bg-gray-50 p-2 rounded",4,"ngIf"],["class","mt-2",4,"ngIf"],[1,"flex","flex-col","space-y-2"],["cdkDragHandle","",1,"drag-handle","cursor-move"],[1,"fas","fa-grip-vertical","text-gray-400"],["type","button",1,"p-2","text-gray-500","hover:text-gray-700","disabled:opacity-50",3,"disabled","click"],[1,"fas","fa-arrow-up"],[1,"fas","fa-arrow-down"],["type","button",1,"p-2","text-red-500","hover:text-red-700",3,"click"],[1,"mt-2","text-sm","text-gray-500"],[1,"flex-1","flex","items-center","justify-between","bg-gray-50","p-2","rounded"],[1,"fas","fa-question-circle","text-primary","mr-2"],[1,"mt-4","p-3","bg-yellow-50","border","border-yellow-200","rounded-lg"],[1,"relative","rounded-md","shadow-sm","w-full"],[1,"absolute","inset-y-0","left-0","pl-3","flex","items-center","pointer-events-none"],[1,"fas","fa-redo","text-yellow-500"],["type","number","formControlName","maxAttempts","min","0",1,"pl-10","block","w-32","rounded-md","border-yellow-300","shadow-sm","focus:border-yellow-500","focus:ring-yellow-500"],[1,"mt-2","flex","items-start"],[1,"flex-shrink-0"],[1,"fas","fa-info-circle","text-yellow-600"],[1,"ml-2"],[1,"text-sm","text-gray-600"],[1,"mb-3"],["class","flex items-center justify-between p-2 bg-gray-50 rounded mb-2",4,"ngFor","ngForOf"],[1,"flex","items-center","justify-between","p-2","bg-gray-50","rounded","mb-2"],["alt","File Icon",1,"w-6","h-6","mr-2",3,"src"],["target","_blank",1,"text-primary","hover:underline",3,"href"],[1,"flex","items-center","mt-2","bg-gray-50","p-2","rounded"],[1,"fas","fa-file","mr-2","text-primary"],[1,"text-xs","text-gray-500"],["type","button",1,"inline-flex","items-center","px-3","py-1","border","border-transparent","text-sm","leading-4","font-medium","rounded-md","text-white","bg-primary","hover:!bg-primary/80","focus:outline-none",3,"click"],[1,"fas","fa-upload","mr-1"],[1,"mt-2"],[1,"flex","items-center","mb-1"],[1,"w-full","bg-gray-200","rounded-full","h-2"],[1,"bg-primary","h-2","rounded-full","transition-all","duration-300"],[1,"flex","justify-between","items-center","text-xs","text-gray-500"],["class","text-green-600",4,"ngIf"],[1,"text-green-600"],[1,"fas","fa-check-circle","mr-1"],[1,"text-center","py-8","text-gray-500"],[1,"flex","justify-end","space-x-4","mt-6"],["type","button",1,"px-4","py-2","text-sm","font-medium","text-white","bg-primary","rounded-lg","hover:bg-primary-dark",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),t._uU(4,"Modifier la formation"),t.qZA(),t.TgZ(5,"p",4),t._uU(6,"Mettez \xe0 jour les informations de la formation"),t.qZA()(),t.YNc(7,ve,3,0,"div",5),t.YNc(8,ye,3,0,"div",5),t.YNc(9,ao,17,20,"div",6),t.qZA()()),2&e&&(t.xp6(7),t.Q6J("ngIf",o.isLoading),t.xp6(1),t.Q6J("ngIf",!o.formation&&!o.isLoading),t.xp6(1),t.Q6J("ngIf",o.formation&&!o.isLoading))},dependencies:[l.mk,l.sg,l.O5,s._Y,s.Fj,s.wV,s.Wl,s._,s.JJ,s.JL,s.qQ,s.sg,s.u,s.x0,s.CE,l.uU],styles:[".group-checkbox[_ngcontent-%COMP%], .category-checkbox[_ngcontent-%COMP%]{position:absolute;opacity:0;height:0;width:0;cursor:pointer}.group-checkbox[_ngcontent-%COMP%]:checked + .group-label[_ngcontent-%COMP%], .group-checkbox[_ngcontent-%COMP%]:checked + .category-label[_ngcontent-%COMP%], .category-checkbox[_ngcontent-%COMP%]:checked + .group-label[_ngcontent-%COMP%], .category-checkbox[_ngcontent-%COMP%]:checked + .category-label[_ngcontent-%COMP%]{border-color:var(--primary-color);background-color:rgba(var(--primary-color-rgb),.05)}.group-checkbox[_ngcontent-%COMP%]:checked + .group-label[_ngcontent-%COMP%]   .group-icon[_ngcontent-%COMP%], .group-checkbox[_ngcontent-%COMP%]:checked + .group-label[_ngcontent-%COMP%]   .category-icon[_ngcontent-%COMP%], .group-checkbox[_ngcontent-%COMP%]:checked + .category-label[_ngcontent-%COMP%]   .group-icon[_ngcontent-%COMP%], .group-checkbox[_ngcontent-%COMP%]:checked + .category-label[_ngcontent-%COMP%]   .category-icon[_ngcontent-%COMP%], .category-checkbox[_ngcontent-%COMP%]:checked + .group-label[_ngcontent-%COMP%]   .group-icon[_ngcontent-%COMP%], .category-checkbox[_ngcontent-%COMP%]:checked + .group-label[_ngcontent-%COMP%]   .category-icon[_ngcontent-%COMP%], .category-checkbox[_ngcontent-%COMP%]:checked + .category-label[_ngcontent-%COMP%]   .group-icon[_ngcontent-%COMP%], .category-checkbox[_ngcontent-%COMP%]:checked + .category-label[_ngcontent-%COMP%]   .category-icon[_ngcontent-%COMP%]{opacity:1;transform:scale(1);color:var(--primary-color)}.group-label[_ngcontent-%COMP%], .category-label[_ngcontent-%COMP%]{display:flex;align-items:center;padding:1rem;border:2px solid #e5e7eb;border-radius:.5rem;transition:all .2s ease;cursor:pointer}.group-label[_ngcontent-%COMP%]:hover, .category-label[_ngcontent-%COMP%]:hover{border-color:var(--primary-color);background-color:rgba(var(--primary-color-rgb),.02)}.group-content[_ngcontent-%COMP%], .category-content[_ngcontent-%COMP%]{flex:1}.group-name[_ngcontent-%COMP%], .category-name[_ngcontent-%COMP%]{display:block;font-size:.875rem;font-weight:500;color:#111827}.group-description[_ngcontent-%COMP%], .category-description[_ngcontent-%COMP%]{display:block;font-size:.75rem;color:#6b7280;margin-top:.25rem}.group-icon[_ngcontent-%COMP%], .category-icon[_ngcontent-%COMP%]{margin-left:1rem;opacity:0;transform:scale(.8);transition:all .2s ease;color:var(--primary-color)}[_ngcontent-%COMP%]:root{--primary-color: #3b82f6;--primary-color-rgb: 59, 130, 246}@keyframes shimmer{0%{background-position:-1000px 0}to{background-position:1000px 0}}.shimmer[_ngcontent-%COMP%]{overflow:hidden;position:relative}.shimmer-bg[_ngcontent-%COMP%]{animation:shimmer 2s infinite linear;background:linear-gradient(to right,#f6f7f8 8%,#edeef1 18%,#f6f7f8 33%);background-size:1000px 100%;position:relative}.module-item[_ngcontent-%COMP%]{border-radius:var(--radius);border-width:1px;--tw-border-opacity: 1;border-color:rgb(229 231 235 / var(--tw-border-opacity, 1));--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1));padding:1rem;--tw-shadow: 0 1px 2px 0 rgb(0 0 0 / .05);--tw-shadow-colored: 0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow);transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.2s;animation-duration:.2s}.module-item[_ngcontent-%COMP%]:hover{--tw-shadow: 0 4px 6px -1px rgb(0 0 0 / .1), 0 2px 4px -2px rgb(0 0 0 / .1);--tw-shadow-colored: 0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.module-item[_ngcontent-%COMP%]{cursor:move;position:relative}.module-item.dragging[_ngcontent-%COMP%]{opacity:.5;background-color:#f3f4f6}.module-item[_ngcontent-%COMP%]   .drag-handle[_ngcontent-%COMP%]{position:absolute;top:.5rem;right:.5rem;color:#9ca3af;cursor:move}.module-item[_ngcontent-%COMP%]   .drag-handle[_ngcontent-%COMP%]:hover{color:#4f46e5}.module-item[_ngcontent-%COMP%]   .flex-col[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not([hidden]) ~ [_ngcontent-%COMP%]:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.5rem * var(--tw-space-y-reverse))}.module-item[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:calc(var(--radius) - 2px);padding:.5rem;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.2s;animation-duration:.2s}.module-item[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not(:disabled):hover{--tw-bg-opacity: 1;background-color:rgb(243 244 246 / var(--tw-bg-opacity, 1))}.module-item[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]{cursor:not-allowed;opacity:.5}.group-item[_ngcontent-%COMP%], .category-item[_ngcontent-%COMP%]{position:relative;margin-bottom:1rem}.group-checkbox[_ngcontent-%COMP%], .category-checkbox[_ngcontent-%COMP%]{position:absolute;height:0px;width:0px;cursor:pointer;opacity:0}.group-checkbox[_ngcontent-%COMP%]:checked + .group-label[_ngcontent-%COMP%], .group-checkbox[_ngcontent-%COMP%]:checked + .category-label[_ngcontent-%COMP%], .category-checkbox[_ngcontent-%COMP%]:checked + .group-label[_ngcontent-%COMP%], .category-checkbox[_ngcontent-%COMP%]:checked + .category-label[_ngcontent-%COMP%]{border-color:hsl(var(--primary));background-color:hsl(var(--primary) / .05)}.group-checkbox[_ngcontent-%COMP%]:checked + .group-label[_ngcontent-%COMP%]   .group-icon[_ngcontent-%COMP%], .group-checkbox[_ngcontent-%COMP%]:checked + .group-label[_ngcontent-%COMP%]   .category-icon[_ngcontent-%COMP%], .group-checkbox[_ngcontent-%COMP%]:checked + .category-label[_ngcontent-%COMP%]   .group-icon[_ngcontent-%COMP%], .group-checkbox[_ngcontent-%COMP%]:checked + .category-label[_ngcontent-%COMP%]   .category-icon[_ngcontent-%COMP%], .category-checkbox[_ngcontent-%COMP%]:checked + .group-label[_ngcontent-%COMP%]   .group-icon[_ngcontent-%COMP%], .category-checkbox[_ngcontent-%COMP%]:checked + .group-label[_ngcontent-%COMP%]   .category-icon[_ngcontent-%COMP%], .category-checkbox[_ngcontent-%COMP%]:checked + .category-label[_ngcontent-%COMP%]   .group-icon[_ngcontent-%COMP%], .category-checkbox[_ngcontent-%COMP%]:checked + .category-label[_ngcontent-%COMP%]   .category-icon[_ngcontent-%COMP%]{--tw-scale-x: 1;--tw-scale-y: 1;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));color:hsl(var(--primary));opacity:1}.group-label[_ngcontent-%COMP%], .category-label[_ngcontent-%COMP%]{display:flex;cursor:pointer;align-items:center;border-radius:var(--radius);border-width:2px;--tw-border-opacity: 1;border-color:rgb(229 231 235 / var(--tw-border-opacity, 1));padding:1rem;transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.2s;animation-duration:.2s}.group-label[_ngcontent-%COMP%]:hover, .category-label[_ngcontent-%COMP%]:hover{border-color:hsl(var(--primary));background-color:hsl(var(--primary) / .05)}.group-content[_ngcontent-%COMP%], .category-content[_ngcontent-%COMP%]{flex:1 1 0%}.group-name[_ngcontent-%COMP%], .category-name[_ngcontent-%COMP%]{display:block;font-size:.875rem;font-weight:500;--tw-text-opacity: 1;color:rgb(17 24 39 / var(--tw-text-opacity, 1))}.group-description[_ngcontent-%COMP%], .category-description[_ngcontent-%COMP%]{margin-top:.25rem;display:block;font-size:.75rem;--tw-text-opacity: 1;color:rgb(107 114 128 / var(--tw-text-opacity, 1))}.group-icon[_ngcontent-%COMP%], .category-icon[_ngcontent-%COMP%]{margin-left:.5rem;--tw-scale-x: .9;--tw-scale-y: .9;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));color:hsl(var(--primary));opacity:0;transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.2s;animation-duration:.2s}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{margin-top:.25rem;display:block;width:100%;border-radius:calc(var(--radius) - 2px);--tw-border-opacity: 1;border-color:rgb(209 213 219 / var(--tw-border-opacity, 1));--tw-shadow: 0 1px 2px 0 rgb(0 0 0 / .05);--tw-shadow-colored: 0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}input[_ngcontent-%COMP%]:focus, textarea[_ngcontent-%COMP%]:focus{border-color:hsl(var(--primary));--tw-ring-color: hsl(var(--primary))}input[type=text][_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{margin-top:.25rem;display:block;width:100%;border-radius:var(--radius);--tw-border-opacity: 1;border-color:rgb(229 231 235 / var(--tw-border-opacity, 1));--tw-shadow: 0 1px 2px 0 rgb(0 0 0 / .05);--tw-shadow-colored: 0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}input[type=text][_ngcontent-%COMP%]:focus, textarea[_ngcontent-%COMP%]:focus{border-color:hsl(var(--primary));--tw-ring-color: hsl(var(--primary))}input[type=text][_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{padding:.75rem 1rem;background-color:#f9fafb;transition:all .2s ease}input[type=text][_ngcontent-%COMP%]:hover, textarea[_ngcontent-%COMP%]:hover{background-color:#f3f4f6}input[type=text][_ngcontent-%COMP%]:focus, textarea[_ngcontent-%COMP%]:focus{background-color:#fff;box-shadow:0 0 0 3px #4f46e51a}.category-item[_ngcontent-%COMP%]{position:relative;margin-bottom:1rem}.category-radio[_ngcontent-%COMP%]{position:absolute;opacity:0;width:0;height:0}.category-radio[_ngcontent-%COMP%]:checked + .category-label[_ngcontent-%COMP%]{border-color:#4f46e5;background-color:#f3f4f6}.category-radio[_ngcontent-%COMP%]:checked + .category-label[_ngcontent-%COMP%]   .category-icon[_ngcontent-%COMP%]{opacity:1;transform:scale(1)}.category-label[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:1rem;border:2px solid #e5e7eb;border-radius:.5rem;cursor:pointer;transition:all .2s ease}.category-label[_ngcontent-%COMP%]:hover{border-color:#4f46e5;background-color:#f3f4f6}.category-content[_ngcontent-%COMP%]{flex:1}.category-name[_ngcontent-%COMP%]{font-weight:500;color:#374151}.category-icon[_ngcontent-%COMP%]{opacity:0;transform:scale(0);transition:all .2s ease;color:#4f46e5}.roles-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:1rem;margin-top:.5rem}.role-item[_ngcontent-%COMP%]{position:relative;transition:all .2s ease-in-out}.role-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{padding:1rem!important;border:1px solid #e2e8f0;border-radius:.375rem}.role-item[_ngcontent-%COMP%]:hover{background-color:#f8fafc}.role-item[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{position:absolute;opacity:0;cursor:pointer;height:0;width:0}.role-item[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]{border-color:#4f46e5;color:#4f46e5}.role-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;width:100%;padding:.5rem;cursor:pointer;border-radius:.375rem;transition:all .2s ease-in-out}.role-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:hover{background-color:#f8fafc}"]}),n})();var co=d(848),lo=d(3310),uo=d(8690);function go(n,r){1&n&&(t.TgZ(0,"div",10),t._UZ(1,"div",11),t.qZA())}function po(n,r){if(1&n&&(t.TgZ(0,"div",12)(1,"div",13)(2,"strong",14),t._uU(3,"Erreur!"),t.qZA(),t.TgZ(4,"span",15),t._uU(5),t.qZA()()()),2&n){const e=t.oxw();t.xp6(5),t.Oqu(e.error)}}function mo(n,r){if(1&n&&(t.TgZ(0,"div",31)(1,"label",32),t._uU(2,"Quiz final"),t.qZA(),t.TgZ(3,"div",33)(4,"div",34),t._UZ(5,"i",35),t.TgZ(6,"span",36),t._uU(7),t.qZA()()()()),2&n){const e=t.oxw(3);t.xp6(7),t.Oqu(e.getQuizTitle(e.formation.finalQuizId))}}function _o(n,r){if(1&n&&(t.TgZ(0,"div")(1,"h2",24),t._uU(2,"Informations de base"),t.qZA(),t.TgZ(3,"div",25)(4,"div")(5,"label",26),t._uU(6,"Titre"),t.qZA(),t.TgZ(7,"div",27),t._uU(8),t.qZA()(),t.TgZ(9,"div")(10,"label",26),t._uU(11,"Description"),t.qZA(),t.TgZ(12,"div",28),t._uU(13),t.qZA()(),t.TgZ(14,"div")(15,"label",26),t._uU(16,"Contenu"),t.qZA(),t.TgZ(17,"div",29),t._uU(18),t.qZA()(),t.YNc(19,mo,8,1,"div",30),t.qZA()()),2&n){const e=t.oxw(2);t.xp6(8),t.hij(" ",e.formation.title," "),t.xp6(5),t.hij(" ",e.formation.description," "),t.xp6(5),t.hij(" ",e.formation.content," "),t.xp6(1),t.Q6J("ngIf",e.formation.finalQuizId)}}const fo=function(n,r,e){return{"bg-green-100 text-green-800":n,"bg-yellow-100 text-yellow-800":r,"bg-gray-100 text-gray-800":e}};function ho(n,r){if(1&n&&(t.TgZ(0,"tr")(1,"td",45)(2,"div",46),t._uU(3),t.qZA()(),t.TgZ(4,"td",45)(5,"div",47),t._uU(6),t.ALo(7,"date"),t.qZA()(),t.TgZ(8,"td",45)(9,"div",47),t._uU(10),t.ALo(11,"date"),t.qZA()(),t.TgZ(12,"td",45)(13,"span",48),t._uU(14),t.qZA()()()),2&n){const e=r.$implicit,o=t.oxw(3);t.xp6(3),t.Oqu(e.title),t.xp6(3),t.Oqu(t.lcZ(7,5,e.startDate)),t.xp6(4),t.Oqu(t.lcZ(11,7,e.endDate)),t.xp6(3),t.Q6J("ngClass",t.kEZ(9,fo,"En cours"===o.getStatus(e),"Pas encore"===o.getStatus(e),"Termin\xe9e"===o.getStatus(e))),t.xp6(1),t.hij(" ",o.getStatus(e)," ")}}function xo(n,r){1&n&&(t.TgZ(0,"tr")(1,"td",49),t._uU(2," Aucune session disponible "),t.qZA()())}function bo(n,r){if(1&n&&(t.TgZ(0,"div")(1,"div",37)(2,"h2",38),t._uU(3,"Sessions"),t.qZA()(),t.TgZ(4,"div",39)(5,"table",40)(6,"thead",41)(7,"tr")(8,"th",42),t._uU(9," Titre"),t.qZA(),t.TgZ(10,"th",42),t._uU(11," Date de d\xe9but"),t.qZA(),t.TgZ(12,"th",42),t._uU(13," Date de fin"),t.qZA(),t.TgZ(14,"th",42),t._uU(15," Statut"),t.qZA()()(),t.TgZ(16,"tbody",43),t.YNc(17,ho,15,13,"tr",44),t.YNc(18,xo,3,0,"tr",22),t.qZA()()()()),2&n){const e=t.oxw(2);t.xp6(17),t.Q6J("ngForOf",e.formation.sessions),t.xp6(1),t.Q6J("ngIf",0===e.formation.sessions.length)}}function vo(n,r){if(1&n&&(t.TgZ(0,"div",47),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.hij("",e.description," ")}}function yo(n,r){if(1&n&&(t.TgZ(0,"div",53)(1,"div",57),t._uU(2),t.qZA(),t.YNc(3,vo,2,1,"div",58),t.qZA()),2&n){const e=r.$implicit;t.xp6(2),t.Oqu(e.name),t.xp6(1),t.Q6J("ngIf",e.description)}}function Co(n,r){1&n&&(t.TgZ(0,"div",59),t._uU(1," Aucun groupe associ\xe9 \xe0 cette formation "),t.qZA())}function Zo(n,r){if(1&n&&(t.TgZ(0,"div",50)(1,"div",51)(2,"h3",52),t._uU(3,"Cat\xe9gorie"),t.qZA(),t.TgZ(4,"div",53),t._uU(5),t.qZA()(),t.TgZ(6,"div")(7,"h3",52),t._uU(8,"Groupes cibles"),t.qZA(),t.TgZ(9,"div",54),t.YNc(10,yo,4,2,"div",55),t.YNc(11,Co,2,0,"div",56),t.qZA()()()),2&n){const e=t.oxw(2);t.xp6(5),t.hij(" ",e.formation.category," "),t.xp6(5),t.Q6J("ngForOf",e.formation.groups),t.xp6(1),t.Q6J("ngIf",0===e.formation.groups.length)}}function wo(n,r){if(1&n&&(t.TgZ(0,"div",71),t._UZ(1,"i",72),t.TgZ(2,"span",36),t._uU(3),t.qZA()()),2&n){const e=t.oxw().$implicit,o=t.oxw(3);t.xp6(3),t.Oqu(o.getQuizTitle(e.quizId))}}function To(n,r){if(1&n&&(t.TgZ(0,"a",77),t._UZ(1,"img",78),t.TgZ(2,"span",79),t._uU(3),t.qZA()()),2&n){const e=r.$implicit,o=t.oxw(5);t.Q6J("href",e.lien,t.LSH),t.xp6(1),t.Q6J("src",o.getFileIcon(e.type),t.LSH),t.xp6(2),t.Oqu(o.getFileName(e.lien)||"Fichier "+e.type)}}function qo(n,r){if(1&n&&(t.TgZ(0,"div",73)(1,"h4",74),t._uU(2,"Pi\xe8ces jointes"),t.qZA(),t.TgZ(3,"div",75),t.YNc(4,To,4,3,"a",76),t.qZA()()),2&n){const e=t.oxw().$implicit;t.xp6(4),t.Q6J("ngForOf",e.attachments)}}function Mo(n,r){1&n&&(t.TgZ(0,"div",80),t._uU(1," Aucune pi\xe8ce jointe pour ce module "),t.qZA())}function Ao(n,r){if(1&n&&(t.TgZ(0,"div",63)(1,"div",64)(2,"div",65)(3,"h3",66),t._uU(4),t.qZA(),t.TgZ(5,"p",67),t._uU(6),t.qZA(),t.YNc(7,wo,4,1,"div",68),t.YNc(8,qo,5,1,"div",69),t.YNc(9,Mo,2,0,"div",70),t.qZA(),t.TgZ(10,"div",47),t._uU(11),t.qZA()()()),2&n){const e=r.$implicit;t.xp6(4),t.Oqu(e.title),t.xp6(2),t.Oqu(e.description),t.xp6(1),t.Q6J("ngIf",e.quizId),t.xp6(1),t.Q6J("ngIf",e.attachments&&e.attachments.length>0),t.xp6(1),t.Q6J("ngIf",!e.attachments||0===e.attachments.length),t.xp6(2),t.hij(" Position: ",e.position," ")}}function Oo(n,r){1&n&&(t.TgZ(0,"div",81),t._uU(1," Aucun module disponible pour cette formation "),t.qZA())}function ko(n,r){if(1&n&&(t.TgZ(0,"div")(1,"div",37)(2,"h2",38),t._uU(3,"Modules"),t.qZA()(),t.TgZ(4,"div",60),t.YNc(5,Ao,12,6,"div",61),t.YNc(6,Oo,2,0,"div",62),t.qZA()()),2&n){const e=t.oxw(2);t.xp6(5),t.Q6J("ngForOf",e.formation.modules),t.xp6(1),t.Q6J("ngIf",0===e.formation.modules.length)}}function Uo(n,r){if(1&n&&t._UZ(0,"app-quiz-results",83),2&n){const e=t.oxw(3);t.Q6J("formationId",e.formation.id)}}function Po(n,r){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,Uo,1,1,"app-quiz-results",82),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.formation)}}function Fo(n,r){if(1&n&&t._UZ(0,"app-formation-feedbacks",85),2&n){const e=t.oxw(3);t.Q6J("formationId",e.formation.id)("canDelete",!0)}}function zo(n,r){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,Fo,1,2,"app-formation-feedbacks",84),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.formation)}}const b=function(n,r){return{"border-primary text-primary":n,"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300":r}};function Qo(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",16)(1,"div",17)(2,"div",18)(3,"nav",19)(4,"button",20),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.setActiveTab("info"))}),t._uU(5," Informations de base "),t.qZA(),t.TgZ(6,"button",20),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.setActiveTab("sessions"))}),t._uU(7," Sessions "),t.qZA(),t.TgZ(8,"button",20),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.setActiveTab("groups"))}),t._uU(9," Groupes et Cat\xe9gorie "),t.qZA(),t.TgZ(10,"button",20),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.setActiveTab("modules"))}),t._uU(11," Modules "),t.qZA(),t.TgZ(12,"button",20),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.setActiveTab("results"))}),t._uU(13," R\xe9sultats de formation "),t.qZA(),t.TgZ(14,"button",20),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.setActiveTab("feedbacks"))}),t._uU(15," \xc9valuations "),t.qZA()()(),t.TgZ(16,"div",21),t.YNc(17,_o,20,4,"div",22),t.YNc(18,bo,19,2,"div",22),t.YNc(19,Zo,12,3,"div",23),t.YNc(20,ko,7,2,"div",22),t.YNc(21,Po,2,1,"div",22),t.YNc(22,zo,2,1,"div",22),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(4),t.Q6J("ngClass",t.WLB(12,b,"info"===e.activeTab,"info"!==e.activeTab)),t.xp6(2),t.Q6J("ngClass",t.WLB(15,b,"sessions"===e.activeTab,"sessions"!==e.activeTab)),t.xp6(2),t.Q6J("ngClass",t.WLB(18,b,"groups"===e.activeTab,"groups"!==e.activeTab)),t.xp6(2),t.Q6J("ngClass",t.WLB(21,b,"modules"===e.activeTab,"modules"!==e.activeTab)),t.xp6(2),t.Q6J("ngClass",t.WLB(24,b,"results"===e.activeTab,"results"!==e.activeTab)),t.xp6(2),t.Q6J("ngClass",t.WLB(27,b,"feedbacks"===e.activeTab,"feedbacks"!==e.activeTab)),t.xp6(3),t.Q6J("ngIf","info"===e.activeTab),t.xp6(1),t.Q6J("ngIf","sessions"===e.activeTab),t.xp6(1),t.Q6J("ngIf","groups"===e.activeTab),t.xp6(1),t.Q6J("ngIf","modules"===e.activeTab),t.xp6(1),t.Q6J("ngIf","results"===e.activeTab),t.xp6(1),t.Q6J("ngIf","feedbacks"===e.activeTab)}}const Io=function(n){return["/admin/formations/edit",n]};let Jo=(()=>{class n{constructor(e,o,i,a,c){this.formationService=e,this.quizService=o,this.attachmentService=i,this.route=a,this.router=c,this.formation=null,this.loading=!1,this.error=null,this.activeTab="info",this.quizzes=[],this.subscriptions=[]}ngOnInit(){const e=this.route.queryParams.subscribe(i=>{i.tab&&(this.activeTab=i.tab)});this.subscriptions.push(e);const o=Number(this.route.snapshot.paramMap.get("id"));this.loadFormation(o),this.loadQuizzes()}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}loadFormation(e){this.loading=!0,this.formationService.getFormation(e).subscribe({next:o=>{this.formation=o,this.loading=!1,console.log(this.formation.sessions.map(i=>i.status))},error:o=>{this.error=o,this.loading=!1}})}getFileIcon(e){return this.attachmentService.getFileIcon(e)}getFileIconColor(e){return this.attachmentService.getFileIconColor(e)}getFileName(e){return this.attachmentService.getFileName(e)}formatFileSize(e){return this.attachmentService.formatFileSize(e)}getStatus(e){const o=new Date;o.setHours(0,0,0,0);const i=new Date(e.startDate),a=new Date(e.endDate);return i.setHours(0,0,0,0),a.setHours(0,0,0,0),o<i?"Pas encore":o>a?"Termin\xe9e":"En cours"}setActiveTab(e){this.activeTab=e,this.updateUrlParams()}updateUrlParams(){this.router.navigate([],{relativeTo:this.route,queryParams:{tab:this.activeTab},queryParamsHandling:"merge",replaceUrl:!0})}loadQuizzes(){this.quizService.getQuizzes().subscribe({next:e=>{this.quizzes=e},error:e=>{console.error("Error loading quizzes:",e),this.error="Impossible de charger les quiz."}})}getQuizTitle(e){if(!e)return"Aucun quiz s\xe9lectionn\xe9";const o=this.quizzes.find(i=>i.id===e);return o?o.title:"Quiz inconnu"}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(y.B),t.Y36(f.v),t.Y36(O.L),t.Y36(p.gz),t.Y36(p.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-formation-detail"]],decls:12,vars:6,consts:[[1,"max-w-6xl","mx-auto"],[1,"mt-10"],[1,"px-8","py-4"],[1,"text-3xl","font-bold","text-gray-800"],[1,"mt-1","text-sm","text-gray-600"],["class","flex justify-center items-center py-20",4,"ngIf"],["class","p-4 max-w-4xl mx-auto",4,"ngIf"],["class","p-8",4,"ngIf"],[1,"fixed","bottom-8","right-8","bg-primary","text-white","rounded-full","p-4","shadow-lg","hover:bg-primary-dark","transition-colors",3,"routerLink"],[1,"fas","fa-edit","text-xl"],[1,"flex","justify-center","items-center","py-20"],[1,"animate-spin","rounded-full","h-12","w-12","border-t-2","border-b-2","border-primary"],[1,"p-4","max-w-4xl","mx-auto"],["role","alert",1,"bg-red-100","border","border-red-400","text-red-700","px-4","py-3","rounded","relative"],[1,"font-bold"],[1,"block","sm:inline"],[1,"p-8"],[1,"bg-white","shadow-md","rounded-lg","overflow-hidden"],[1,"border-b","border-gray-200"],[1,"flex","-mb-px"],[1,"py-4","px-6","font-medium","text-sm","border-b-2","focus:outline-none",3,"ngClass","click"],[1,"p-6"],[4,"ngIf"],["class","space-y-8",4,"ngIf"],[1,"text-2xl","font-bold","mb-6"],[1,"grid","grid-cols-1","gap-6"],[1,"block","text-sm","font-medium","text-gray-700"],[1,"mt-1","p-2","bg-gray-50","rounded-md","border","border-gray-200"],[1,"mt-1","p-2","bg-gray-50","rounded-md","border","border-gray-200","min-h-[80px]"],[1,"mt-1","p-2","bg-gray-50","rounded-md","border","border-gray-200","min-h-[120px]"],["class","mt-6 p-4 bg-gray-50 rounded-lg",4,"ngIf"],[1,"mt-6","p-4","bg-gray-50","rounded-lg"],[1,"block","text-lg","font-medium","text-gray-700","mb-2"],[1,"flex","items-center","justify-between","bg-white","p-3","rounded","border","border-gray-200"],[1,"flex","items-center"],[1,"fas","fa-award","text-primary","mr-2"],[1,"text-sm","font-medium"],[1,"flex","justify-between","items-center","mb-6"],[1,"text-2xl","font-bold"],[1,"overflow-x-auto"],[1,"min-w-full","divide-y","divide-gray-200"],[1,"bg-gray-50"],["scope","col",1,"px-6","py-3","text-left","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"bg-white","divide-y","divide-gray-200"],[4,"ngFor","ngForOf"],[1,"px-6","py-4","whitespace-nowrap"],[1,"text-sm","font-medium","text-gray-900"],[1,"text-sm","text-gray-500"],[1,"px-2","inline-flex","text-xs","leading-5","font-semibold","rounded-full",3,"ngClass"],["colspan","4",1,"px-6","py-4","text-center","text-sm","text-gray-500"],[1,"space-y-8"],[1,"mb-8"],[1,"text-xl","font-bold","mb-4"],[1,"p-3","bg-gray-50","rounded-md","border","border-gray-200"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4"],["class","p-3 bg-gray-50 rounded-md border border-gray-200",4,"ngFor","ngForOf"],["class","col-span-3 text-center text-gray-500 p-4",4,"ngIf"],[1,"font-medium"],["class","text-sm text-gray-500",4,"ngIf"],[1,"col-span-3","text-center","text-gray-500","p-4"],[1,"space-y-6"],["class","bg-gray-50 p-4 rounded-lg border border-gray-200",4,"ngFor","ngForOf"],["class","text-center py-8 text-gray-500",4,"ngIf"],[1,"bg-gray-50","p-4","rounded-lg","border","border-gray-200"],[1,"flex","items-start","justify-between","mb-4"],[1,"flex-1"],[1,"text-lg","font-semibold"],[1,"text-gray-600","mt-1"],["class","mt-3 p-2 bg-white rounded border border-gray-200 inline-flex items-center",4,"ngIf"],["class","mt-4",4,"ngIf"],["class","mt-4 text-sm text-gray-500",4,"ngIf"],[1,"mt-3","p-2","bg-white","rounded","border","border-gray-200","inline-flex","items-center"],[1,"fas","fa-question-circle","text-primary","mr-2"],[1,"mt-4"],[1,"text-md","font-medium","mb-2"],[1,"grid","grid-cols-1","sm:grid-cols-2","gap-2"],["target","_blank","class","flex items-center p-2 bg-white rounded border border-gray-200 hover:border-primary",3,"href",4,"ngFor","ngForOf"],["target","_blank",1,"flex","items-center","p-2","bg-white","rounded","border","border-gray-200","hover:border-primary",3,"href"],["alt","File Icon",1,"w-6","h-6","mr-2",3,"src"],[1,"text-sm"],[1,"mt-4","text-sm","text-gray-500"],[1,"text-center","py-8","text-gray-500"],[3,"formationId",4,"ngIf"],[3,"formationId"],[3,"formationId","canDelete",4,"ngIf"],[3,"formationId","canDelete"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),t._uU(4,"D\xe9tails de la formation"),t.qZA(),t.TgZ(5,"p",4),t._uU(6,"Consultez les informations de la formation"),t.qZA()(),t.YNc(7,go,2,0,"div",5),t.YNc(8,po,6,1,"div",6),t.YNc(9,Qo,23,30,"div",7),t.TgZ(10,"a",8),t._UZ(11,"i",9),t.qZA()()()),2&e&&(t.xp6(7),t.Q6J("ngIf",o.loading),t.xp6(1),t.Q6J("ngIf",o.error),t.xp6(1),t.Q6J("ngIf",o.formation&&!o.loading),t.xp6(1),t.Q6J("routerLink",t.VKq(4,Io,null==o.formation?null:o.formation.id)))},dependencies:[l.mk,l.sg,l.O5,p.yS,lo.L,uo.e,l.uU],styles:[".nosession-group[_ngcontent-%COMP%]{position:relative;overflow:hidden}.nosession-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:absolute;top:50%;right:-100px;transform:translateY(-50%);transition:right .5s ease-in-out}.nosession-group[_ngcontent-%COMP%]:hover   button[_ngcontent-%COMP%]{right:10px}"]}),n})();var No=d(3555);function Eo(n,r){if(1&n&&(t.TgZ(0,"div",41),t._UZ(1,"input",42),t.TgZ(2,"label",43)(3,"div",44)(4,"span",45),t._uU(5),t.qZA()(),t.TgZ(6,"div",46),t._UZ(7,"i",47),t.qZA()()()),2&n){const e=r.$implicit;t.xp6(1),t.Q6J("id","category-"+e)("value",e),t.xp6(1),t.Q6J("for","category-"+e),t.xp6(3),t.Oqu(e)}}function So(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",48)(1,"input",49),t.NdJ("change",function(){const a=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.toggleRole(a))}),t.qZA(),t.TgZ(2,"label",50)(3,"div",51)(4,"span",52),t._uU(5),t.qZA()(),t.TgZ(6,"div",53),t._UZ(7,"i",47),t.qZA()()()}if(2&n){const e=r.$implicit,o=t.oxw();let i;t.xp6(1),t.Q6J("id","role-"+e)("checked",null==(i=o.formationForm.get("roles"))?null:i.value.includes(e)),t.xp6(1),t.Q6J("for","role-"+e),t.xp6(3),t.Oqu(e)}}function Do(n,r){if(1&n&&(t.TgZ(0,"span",61),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.description)}}function Yo(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",54)(1,"input",55),t.NdJ("change",function(){const a=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.toggleGroup(a.id))}),t.qZA(),t.TgZ(2,"label",56)(3,"div",57)(4,"span",58),t._uU(5),t.qZA(),t.YNc(6,Do,2,1,"span",59),t.qZA(),t.TgZ(7,"div",60),t._UZ(8,"i",47),t.qZA()()()}if(2&n){const e=r.$implicit,o=t.oxw();let i;t.xp6(1),t.Q6J("id","group-"+e.id)("checked",null==(i=o.formationForm.get("groupIds"))?null:i.value.includes(e.id)),t.xp6(1),t.Q6J("for","group-"+e.id),t.xp6(3),t.Oqu(e.name),t.xp6(1),t.Q6J("ngIf",e.description)}}function Lo(n,r){1&n&&(t.TgZ(0,"div",76)(1,"label",77),t._uU(2," Nombre maximum de tentatives "),t.qZA(),t.TgZ(3,"div",24)(4,"div",78)(5,"div",79),t._UZ(6,"i",80),t.qZA(),t._UZ(7,"input",81),t.qZA()(),t.TgZ(8,"div",82)(9,"div",83),t._UZ(10,"i",84),t.qZA(),t.TgZ(11,"div",85)(12,"p",86),t._uU(13," D\xe9finissez le nombre maximum de tentatives autoris\xe9es pour ce quiz. Utilisez "),t.TgZ(14,"strong"),t._uU(15,"0"),t.qZA(),t._uU(16," pour des tentatives illimit\xe9es. "),t.qZA()()()())}function Go(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",62)(1,"div",63)(2,"div",19)(3,"div",64)(4,"div")(5,"label",11),t._uU(6,"Titre"),t.qZA(),t._UZ(7,"input",12),t.qZA(),t.TgZ(8,"div")(9,"label",11),t._uU(10,"Description"),t.qZA(),t._UZ(11,"textarea",65),t.qZA(),t.TgZ(12,"div")(13,"label",11),t._uU(14,"Quiz"),t.qZA(),t.TgZ(15,"div",20)(16,"button",21),t.NdJ("click",function(){const a=t.CHM(e).index,c=t.oxw();return t.KtG(c.openQuizSelectionDialog("module",a))}),t._uU(17),t._UZ(18,"i",22),t.qZA()()(),t.YNc(19,Lo,17,0,"div",66),t.qZA()(),t.TgZ(20,"div",67)(21,"div",68),t._UZ(22,"i",69),t.qZA(),t.TgZ(23,"button",70),t.NdJ("click",function(){const a=t.CHM(e).index,c=t.oxw();return t.KtG(c.moveModule(a,a-1))}),t._UZ(24,"i",71),t.qZA(),t.TgZ(25,"button",70),t.NdJ("click",function(){const a=t.CHM(e).index,c=t.oxw();return t.KtG(c.moveModule(a,a+1))}),t._UZ(26,"i",72),t.qZA(),t.TgZ(27,"button",73),t.NdJ("click",function(){const a=t.CHM(e).index,c=t.oxw();return t.KtG(c.removeModule(a))}),t._UZ(28,"i",74),t.qZA()()(),t.TgZ(29,"div",75),t._uU(30),t.qZA()()}if(2&n){const e=r.$implicit,o=r.index,i=t.oxw();let a,c,u;t.Q6J("formGroupName",o),t.xp6(17),t.hij(" ",i.getQuizTitle(null==(a=e.get("quizId"))?null:a.value)," "),t.xp6(2),t.Q6J("ngIf",null==(c=e.get("quizId"))?null:c.value),t.xp6(4),t.Q6J("disabled",0===o),t.xp6(2),t.Q6J("disabled",o===i.modules.length-1),t.xp6(5),t.hij(" Position: ",null==(u=e.get("position"))?null:u.value," ")}}function jo(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",87)(1,"div",15)(2,"div")(3,"label",11),t._uU(4,"Titre"),t.qZA(),t._UZ(5,"input",12),t.qZA(),t.TgZ(6,"div")(7,"label",11),t._uU(8,"Date de d\xe9but"),t.qZA(),t._UZ(9,"input",88),t.qZA(),t.TgZ(10,"div")(11,"label",11),t._uU(12,"Date de fin"),t.qZA(),t._UZ(13,"input",89),t.qZA()(),t.TgZ(14,"div",90)(15,"button",91),t.NdJ("click",function(){const a=t.CHM(e).index,c=t.oxw();return t.KtG(c.removeSession(a))}),t._UZ(16,"i",74),t.qZA()()()}2&n&&t.Q6J("formGroupName",r.index)}let Ho=(()=>{class n{constructor(e,o,i,a,c,u,g){this.fb=e,this.formationService=o,this.groupService=i,this.quizService=a,this.router=c,this.dialog=u,this.toaster=g,this.groups=[],this.quizzes=[],this.categories=w.y,this.availableRoles=[_.i.Administrator,_.i.HierarchicalLeader,_.i.TeamLeader,_.i.PostLeader,_.i.QualityAgent,_.i.Manager],this.formationForm=this.fb.group({title:["",[s.kI.required,s.kI.minLength(3)]],description:["",[s.kI.required,s.kI.minLength(10)]],content:["",[s.kI.required,s.kI.minLength(20)]],category:["",s.kI.required],groupIds:[[]],roles:[[]],finalQuizId:[null],canPassFinalWithoutModules:[!1],sessions:this.fb.array([]),modules:this.fb.array([])})}ngOnInit(){this.groupService.getGroups().subscribe({next:e=>{this.groups=e},error:e=>{console.error("Error loading groups:",e)}}),this.quizService.getQuizzes().subscribe({next:e=>{this.quizzes=e},error:e=>{console.error("Error loading quizzes:",e)}})}get modules(){return this.formationForm.get("modules")}get sessions(){return this.formationForm.get("sessions")}createModuleFormGroup(){return this.fb.group({title:["",[s.kI.required,s.kI.minLength(3)]],description:["",[s.kI.required,s.kI.minLength(10)]],position:[this.modules.length+1,s.kI.required],quizId:[null],maxAttempts:[3,[s.kI.required,s.kI.min(0)]]})}addModule(){this.modules.push(this.createModuleFormGroup()),this.updateModulePositions(),setTimeout(()=>{window.scrollTo({top:document.body.scrollHeight,behavior:"smooth"})},100)}removeModule(e){this.modules.removeAt(e),this.updateModulePositions()}updateModulePositions(){this.modules.controls.forEach((e,o)=>{e.patchValue({position:o+1})})}moveModule(e,o){const i=this.modules.at(e);this.modules.removeAt(e),this.modules.insert(o,i),this.updateModulePositions()}createSessionFormGroup(){return this.fb.group({title:["",[s.kI.required,s.kI.minLength(3)]],startDate:["",s.kI.required],endDate:["",s.kI.required]})}addSession(){this.sessions.push(this.createSessionFormGroup()),setTimeout(()=>{window.scrollTo({top:document.body.scrollHeight,behavior:"smooth"})},100)}removeSession(e){this.sessions.removeAt(e)}toggleGroup(e){const o=this.formationForm.get("groupIds")?.value;o.includes(e)?this.formationForm.patchValue({groupIds:o.filter(i=>i!==e)}):this.formationForm.patchValue({groupIds:[...o,e]})}toggleRole(e){const o=this.formationForm.get("roles")?.value;o.includes(e)?this.formationForm.patchValue({roles:o.filter(i=>i!==e)}):this.formationForm.patchValue({roles:[...o,e]})}openQuizSelectionDialog(e,o){const i=[];this.modules.controls.forEach((c,u)=>{const g=c.get("quizId")?.value;g&&("module"!==e||u!==o)&&i.push(g)}),"module"===e&&this.formationForm.get("finalQuizId")?.value&&i.push(this.formationForm.get("finalQuizId")?.value),this.dialog.open(T,{width:"500px",data:{disabledQuizIds:i,context:e,selectedQuizId:"formation"===e?this.formationForm.get("finalQuizId")?.value:void 0!==o?this.modules.at(o).get("quizId")?.value:null}}).afterClosed().subscribe(c=>{c&&("formation"===e?this.formationForm.patchValue({finalQuizId:c.id}):void 0!==o&&this.modules.at(o).patchValue({quizId:c.id}))})}getQuizTitle(e){return e&&this.quizzes.find(o=>o.id===e)?.title||"Select a quiz"}onSubmit(){this.formationForm.valid?(console.log(this.formationForm.value),this.formationService.createFormation(this.formationForm.value).subscribe({next:()=>{this.router.navigate(["/admin/formations"])},error:e=>{console.error("Error creating formation:",e),this.toaster.handleHttpError(e.error)}})):(this.formationForm.markAllAsTouched(),this.toaster.showError("Invalid Form","Please fill in all required fields correctly."))}dropModule(e){(0,No.bA)(this.modules.controls,e.previousIndex,e.currentIndex),this.updateModulePositions()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(s.qu),t.Y36(y.B),t.Y36(x.l),t.Y36(f.v),t.Y36(p.F0),t.Y36(m.uw),t.Y36(C.M))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-create-formation"]],decls:82,vars:7,consts:[[1,"container","mx-auto","px-4","py-8"],[1,"max-w-4xl"],[1,"rounded-2xl","overflow-hidden"],[1,"px-8","py-6"],[1,"text-3xl","font-bold"],[1,"mt-1","text-sm","text-gray-600"],[1,"p-8"],[1,"space-y-8",3,"formGroup","ngSubmit"],[1,"bg-white","shadow","rounded-lg","p-6"],[1,"text-2xl","font-bold","mb-6"],[1,"grid","grid-cols-1","gap-6"],[1,"block","text-sm","font-medium","text-gray-700"],["type","text","formControlName","title",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","focus:border-primary","focus:ring-primary"],["formControlName","description","rows","3",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","focus:border-primary","focus:ring-primary"],["formControlName","content","rows","5",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","focus:border-primary","focus:ring-primary"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4"],["class","category-item",4,"ngFor","ngForOf"],["class","role-item",4,"ngFor","ngForOf"],[1,"flex","items-center","space-x-4"],[1,"flex-1"],[1,"mt-1"],["type","button",1,"inline-flex","items-center","px-4","py-2","border","border-gray-300","rounded-md","text-sm","font-medium","text-gray-700","bg-white","hover:bg-gray-50",3,"click"],[1,"fas","fa-chevron-down","ml-2"],[1,"mt-6","p-3","bg-blue-50","border","border-blue-200","rounded-lg"],[1,"flex","items-center"],[1,"flex","items-center","h-5"],["type","checkbox","id","canPassFinalWithoutModules","formControlName","canPassFinalWithoutModules",1,"h-4","w-4","rounded","border-blue-300","text-blue-600","focus:ring-blue-500"],[1,"ml-3","text-sm"],["for","canPassFinalWithoutModules",1,"font-medium","text-gray-700"],[1,"text-gray-500","mt-1"],["class","group-item",4,"ngFor","ngForOf"],[1,"flex","justify-between","items-center","mb-6"],[1,"text-2xl","font-bold"],["type","button",1,"inline-flex","items-center","px-4","py-2","border","border-transparent","text-sm","font-medium","rounded-md","text-white","bg-primary","hover:bg-primary-dark",3,"click"],[1,"fas","fa-plus","mr-2"],["formArrayName","modules",1,"space-y-4"],["class","module-item","cdkDrag","",3,"formGroupName",4,"ngFor","ngForOf"],["formArrayName","sessions",1,"space-y-4"],["class","session-item",3,"formGroupName",4,"ngFor","ngForOf"],[1,"flex","justify-end"],["type","submit",1,"inline-flex","items-center","px-6","py-3","border","border-transparent","text-base","font-medium","rounded-md","text-white","bg-primary","hover:bg-primary-dark","disabled:opacity-50"],[1,"category-item"],["type","radio","formControlName","category",1,"category-radio",3,"id","value"],[1,"category-label",3,"for"],[1,"category-content"],[1,"category-name"],[1,"category-icon"],[1,"fas","fa-check"],[1,"role-item"],["type","checkbox",1,"role-checkbox",3,"id","checked","change"],[1,"role-label",3,"for"],[1,"role-content"],[1,"role-name"],[1,"role-icon"],[1,"group-item"],["type","checkbox",1,"group-checkbox",3,"id","checked","change"],[1,"group-label",3,"for"],[1,"group-content"],[1,"group-name"],["class","group-description",4,"ngIf"],[1,"group-icon"],[1,"group-description"],["cdkDrag","",1,"module-item",3,"formGroupName"],[1,"flex","items-start","space-x-4"],[1,"grid","grid-cols-1","gap-4"],["formControlName","description","rows","2",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","focus:border-primary","focus:ring-primary"],["class","mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",4,"ngIf"],[1,"flex","flex-col","space-y-2"],["cdkDragHandle","",1,"drag-handle"],[1,"fas","fa-grip-vertical"],["type","button",1,"p-2","text-gray-500","hover:text-gray-700","disabled:opacity-50",3,"disabled","click"],[1,"fas","fa-arrow-up"],[1,"fas","fa-arrow-down"],["type","button",1,"p-2","text-red-500","hover:text-red-700",3,"click"],[1,"fas","fa-trash"],[1,"mt-2","text-sm","text-gray-500"],[1,"mt-4","p-3","bg-yellow-50","border","border-yellow-200","rounded-lg"],[1,"block","text-sm","font-medium","text-gray-700","mb-2"],[1,"relative","rounded-md","shadow-sm","w-full"],[1,"absolute","inset-y-0","left-0","pl-3","flex","items-center","pointer-events-none"],[1,"fas","fa-redo","text-yellow-500"],["type","number","formControlName","maxAttempts","min","0",1,"pl-10","block","w-32","rounded-md","border-yellow-300","shadow-sm","focus:border-yellow-500","focus:ring-yellow-500"],[1,"mt-2","flex","items-start"],[1,"flex-shrink-0"],[1,"fas","fa-info-circle","text-yellow-600"],[1,"ml-2"],[1,"text-sm","text-gray-600"],[1,"session-item",3,"formGroupName"],["type","date","formControlName","startDate",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","focus:border-primary","focus:ring-primary"],["type","date","formControlName","endDate",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","focus:border-primary","focus:ring-primary"],[1,"mt-2","flex","justify-end"],["type","button",1,"text-red-500","hover:text-red-700",3,"click"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),t._uU(5,"Cr\xe9er une nouvelle formation"),t.qZA(),t.TgZ(6,"p",5),t._uU(7,"Remplissez les d\xe9tails ci-dessous pour cr\xe9er une nouvelle formation"),t.qZA()(),t.TgZ(8,"div",6)(9,"form",7),t.NdJ("ngSubmit",function(){return o.onSubmit()}),t.TgZ(10,"div",8)(11,"h2",9),t._uU(12,"Informations de base"),t.qZA(),t.TgZ(13,"div",10)(14,"div")(15,"label",11),t._uU(16,"Titre"),t.qZA(),t._UZ(17,"input",12),t.qZA(),t.TgZ(18,"div")(19,"label",11),t._uU(20,"Description"),t.qZA(),t._UZ(21,"textarea",13),t.qZA(),t.TgZ(22,"div")(23,"label",11),t._uU(24,"Contenu"),t.qZA(),t._UZ(25,"textarea",14),t.qZA()()(),t.TgZ(26,"div",8)(27,"h2",9),t._uU(28,"Cat\xe9gorie"),t.qZA(),t.TgZ(29,"div",15),t.YNc(30,Eo,8,4,"div",16),t.qZA()(),t.TgZ(31,"div",8)(32,"h2",9),t._uU(33,"R\xf4les"),t.qZA(),t.TgZ(34,"div",15),t.YNc(35,So,8,4,"div",17),t.qZA()(),t.TgZ(36,"div",8)(37,"h2",9),t._uU(38,"Quiz Final"),t.qZA(),t.TgZ(39,"div",18)(40,"div",19)(41,"label",11),t._uU(42,"S\xe9lectionner un Quiz Final"),t.qZA(),t.TgZ(43,"div",20)(44,"button",21),t.NdJ("click",function(){return o.openQuizSelectionDialog("formation")}),t._uU(45),t._UZ(46,"i",22),t.qZA()()()(),t.TgZ(47,"div",23)(48,"div",24)(49,"div",25),t._UZ(50,"input",26),t.qZA(),t.TgZ(51,"div",27)(52,"label",28),t._uU(53," Permettre aux utilisateurs de passer le quiz final sans avoir compl\xe9t\xe9 tous les quiz des modules "),t.qZA(),t.TgZ(54,"p",29),t._uU(55," Si activ\xe9, les utilisateurs pourront acc\xe9der au quiz final m\xeame s'ils n'ont pas r\xe9ussi tous les quiz des modules. "),t.qZA()()()()(),t.TgZ(56,"div",8)(57,"h2",9),t._uU(58,"Groupes Cibles"),t.qZA(),t.TgZ(59,"div",15),t.YNc(60,Yo,9,5,"div",30),t.qZA()(),t.TgZ(61,"div",8)(62,"div",31)(63,"h2",32),t._uU(64,"Modules"),t.qZA(),t.TgZ(65,"button",33),t.NdJ("click",function(){return o.addModule()}),t._UZ(66,"i",34),t._uU(67," Ajouter un Module "),t.qZA()(),t.TgZ(68,"div",35),t.YNc(69,Go,31,6,"div",36),t.qZA()(),t.TgZ(70,"div",8)(71,"div",31)(72,"h2",32),t._uU(73,"Sessions"),t.qZA(),t.TgZ(74,"button",33),t.NdJ("click",function(){return o.addSession()}),t._UZ(75,"i",34),t._uU(76," Ajouter une Session "),t.qZA()(),t.TgZ(77,"div",37),t.YNc(78,jo,17,1,"div",38),t.qZA()(),t.TgZ(79,"div",39)(80,"button",40),t._uU(81," Cr\xe9er la Formation "),t.qZA()()()()()()()),2&e){let i;t.xp6(9),t.Q6J("formGroup",o.formationForm),t.xp6(21),t.Q6J("ngForOf",o.categories),t.xp6(5),t.Q6J("ngForOf",o.availableRoles),t.xp6(10),t.hij(" ",o.getQuizTitle(null==(i=o.formationForm.get("finalQuizId"))?null:i.value)," "),t.xp6(15),t.Q6J("ngForOf",o.groups),t.xp6(9),t.Q6J("ngForOf",o.modules.controls),t.xp6(9),t.Q6J("ngForOf",o.sessions.controls)}},dependencies:[l.sg,l.O5,s._Y,s.Fj,s.wV,s.Wl,s._,s.JJ,s.JL,s.qQ,s.sg,s.u,s.x0,s.CE],styles:[".group-checkbox[_ngcontent-%COMP%], .category-checkbox[_ngcontent-%COMP%]{position:absolute;opacity:0;height:0;width:0;cursor:pointer}.group-checkbox[_ngcontent-%COMP%]:checked + .group-label[_ngcontent-%COMP%], .group-checkbox[_ngcontent-%COMP%]:checked + .category-label[_ngcontent-%COMP%], .category-checkbox[_ngcontent-%COMP%]:checked + .group-label[_ngcontent-%COMP%], .category-checkbox[_ngcontent-%COMP%]:checked + .category-label[_ngcontent-%COMP%]{border-color:var(--primary-color);background-color:rgba(var(--primary-color-rgb),.05)}.group-checkbox[_ngcontent-%COMP%]:checked + .group-label[_ngcontent-%COMP%]   .group-icon[_ngcontent-%COMP%], .group-checkbox[_ngcontent-%COMP%]:checked + .group-label[_ngcontent-%COMP%]   .category-icon[_ngcontent-%COMP%], .group-checkbox[_ngcontent-%COMP%]:checked + .category-label[_ngcontent-%COMP%]   .group-icon[_ngcontent-%COMP%], .group-checkbox[_ngcontent-%COMP%]:checked + .category-label[_ngcontent-%COMP%]   .category-icon[_ngcontent-%COMP%], .category-checkbox[_ngcontent-%COMP%]:checked + .group-label[_ngcontent-%COMP%]   .group-icon[_ngcontent-%COMP%], .category-checkbox[_ngcontent-%COMP%]:checked + .group-label[_ngcontent-%COMP%]   .category-icon[_ngcontent-%COMP%], .category-checkbox[_ngcontent-%COMP%]:checked + .category-label[_ngcontent-%COMP%]   .group-icon[_ngcontent-%COMP%], .category-checkbox[_ngcontent-%COMP%]:checked + .category-label[_ngcontent-%COMP%]   .category-icon[_ngcontent-%COMP%]{opacity:1;transform:scale(1);color:var(--primary-color)}.group-label[_ngcontent-%COMP%], .category-label[_ngcontent-%COMP%]{display:flex;align-items:center;padding:1rem;border:2px solid #e5e7eb;border-radius:.5rem;transition:all .2s ease;cursor:pointer}.group-label[_ngcontent-%COMP%]:hover, .category-label[_ngcontent-%COMP%]:hover{border-color:var(--primary-color);background-color:rgba(var(--primary-color-rgb),.02)}.group-content[_ngcontent-%COMP%], .category-content[_ngcontent-%COMP%]{flex:1}.group-name[_ngcontent-%COMP%], .category-name[_ngcontent-%COMP%]{display:block;font-size:.875rem;font-weight:500;color:#111827}.group-description[_ngcontent-%COMP%], .category-description[_ngcontent-%COMP%]{display:block;font-size:.75rem;color:#6b7280;margin-top:.25rem}.group-icon[_ngcontent-%COMP%], .category-icon[_ngcontent-%COMP%]{margin-left:1rem;opacity:0;transform:scale(.8);transition:all .2s ease;color:var(--primary-color)}[_ngcontent-%COMP%]:root{--primary-color: #3b82f6;--primary-color-rgb: 59, 130, 246}@keyframes shimmer{0%{background-position:-1000px 0}to{background-position:1000px 0}}.shimmer[_ngcontent-%COMP%]{overflow:hidden;position:relative}.shimmer-bg[_ngcontent-%COMP%]{animation:shimmer 2s infinite linear;background:linear-gradient(to right,#f6f7f8 8%,#edeef1 18%,#f6f7f8 33%);background-size:1000px 100%;position:relative}.module-item[_ngcontent-%COMP%]{border-radius:var(--radius);border-width:1px;--tw-border-opacity: 1;border-color:rgb(229 231 235 / var(--tw-border-opacity, 1));--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1));padding:1rem;--tw-shadow: 0 1px 2px 0 rgb(0 0 0 / .05);--tw-shadow-colored: 0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow);transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.2s;animation-duration:.2s}.module-item[_ngcontent-%COMP%]:hover{--tw-shadow: 0 4px 6px -1px rgb(0 0 0 / .1), 0 2px 4px -2px rgb(0 0 0 / .1);--tw-shadow-colored: 0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.module-item[_ngcontent-%COMP%]{cursor:move;position:relative}.module-item.dragging[_ngcontent-%COMP%]{opacity:.5;background-color:#f3f4f6}.module-item[_ngcontent-%COMP%]   .drag-handle[_ngcontent-%COMP%]{position:absolute;top:.5rem;right:.5rem;color:#9ca3af;cursor:move}.module-item[_ngcontent-%COMP%]   .drag-handle[_ngcontent-%COMP%]:hover{color:#4f46e5}.module-item[_ngcontent-%COMP%]   .flex-col[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not([hidden]) ~ [_ngcontent-%COMP%]:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.5rem * var(--tw-space-y-reverse))}.module-item[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:calc(var(--radius) - 2px);padding:.5rem;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.2s;animation-duration:.2s}.module-item[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not(:disabled):hover{--tw-bg-opacity: 1;background-color:rgb(243 244 246 / var(--tw-bg-opacity, 1))}.module-item[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]{cursor:not-allowed;opacity:.5}.group-item[_ngcontent-%COMP%], .category-item[_ngcontent-%COMP%]{position:relative;margin-bottom:1rem}.group-checkbox[_ngcontent-%COMP%], .category-checkbox[_ngcontent-%COMP%]{position:absolute;height:0px;width:0px;cursor:pointer;opacity:0}.group-checkbox[_ngcontent-%COMP%]:checked + .group-label[_ngcontent-%COMP%], .group-checkbox[_ngcontent-%COMP%]:checked + .category-label[_ngcontent-%COMP%], .category-checkbox[_ngcontent-%COMP%]:checked + .group-label[_ngcontent-%COMP%], .category-checkbox[_ngcontent-%COMP%]:checked + .category-label[_ngcontent-%COMP%]{border-color:hsl(var(--primary));background-color:hsl(var(--primary) / .05)}.group-checkbox[_ngcontent-%COMP%]:checked + .group-label[_ngcontent-%COMP%]   .group-icon[_ngcontent-%COMP%], .group-checkbox[_ngcontent-%COMP%]:checked + .group-label[_ngcontent-%COMP%]   .category-icon[_ngcontent-%COMP%], .group-checkbox[_ngcontent-%COMP%]:checked + .category-label[_ngcontent-%COMP%]   .group-icon[_ngcontent-%COMP%], .group-checkbox[_ngcontent-%COMP%]:checked + .category-label[_ngcontent-%COMP%]   .category-icon[_ngcontent-%COMP%], .category-checkbox[_ngcontent-%COMP%]:checked + .group-label[_ngcontent-%COMP%]   .group-icon[_ngcontent-%COMP%], .category-checkbox[_ngcontent-%COMP%]:checked + .group-label[_ngcontent-%COMP%]   .category-icon[_ngcontent-%COMP%], .category-checkbox[_ngcontent-%COMP%]:checked + .category-label[_ngcontent-%COMP%]   .group-icon[_ngcontent-%COMP%], .category-checkbox[_ngcontent-%COMP%]:checked + .category-label[_ngcontent-%COMP%]   .category-icon[_ngcontent-%COMP%]{--tw-scale-x: 1;--tw-scale-y: 1;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));color:hsl(var(--primary));opacity:1}.group-label[_ngcontent-%COMP%], .category-label[_ngcontent-%COMP%]{display:flex;cursor:pointer;align-items:center;border-radius:var(--radius);border-width:2px;--tw-border-opacity: 1;border-color:rgb(229 231 235 / var(--tw-border-opacity, 1));padding:1rem;transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.2s;animation-duration:.2s}.group-label[_ngcontent-%COMP%]:hover, .category-label[_ngcontent-%COMP%]:hover{border-color:hsl(var(--primary));background-color:hsl(var(--primary) / .05)}.group-content[_ngcontent-%COMP%], .category-content[_ngcontent-%COMP%]{flex:1 1 0%}.group-name[_ngcontent-%COMP%], .category-name[_ngcontent-%COMP%]{display:block;font-size:.875rem;font-weight:500;--tw-text-opacity: 1;color:rgb(17 24 39 / var(--tw-text-opacity, 1))}.group-description[_ngcontent-%COMP%], .category-description[_ngcontent-%COMP%]{margin-top:.25rem;display:block;font-size:.75rem;--tw-text-opacity: 1;color:rgb(107 114 128 / var(--tw-text-opacity, 1))}.group-icon[_ngcontent-%COMP%], .category-icon[_ngcontent-%COMP%]{margin-left:.5rem;--tw-scale-x: .9;--tw-scale-y: .9;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));color:hsl(var(--primary));opacity:0;transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.2s;animation-duration:.2s}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{margin-top:.25rem;display:block;width:100%;border-radius:calc(var(--radius) - 2px);--tw-border-opacity: 1;border-color:rgb(209 213 219 / var(--tw-border-opacity, 1));--tw-shadow: 0 1px 2px 0 rgb(0 0 0 / .05);--tw-shadow-colored: 0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}input[_ngcontent-%COMP%]:focus, textarea[_ngcontent-%COMP%]:focus{border-color:hsl(var(--primary));--tw-ring-color: hsl(var(--primary))}input[type=text][_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{margin-top:.25rem;display:block;width:100%;border-radius:var(--radius);--tw-border-opacity: 1;border-color:rgb(229 231 235 / var(--tw-border-opacity, 1));--tw-shadow: 0 1px 2px 0 rgb(0 0 0 / .05);--tw-shadow-colored: 0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}input[type=text][_ngcontent-%COMP%]:focus, textarea[_ngcontent-%COMP%]:focus{border-color:hsl(var(--primary));--tw-ring-color: hsl(var(--primary))}input[type=text][_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{padding:.75rem 1rem;background-color:#f9fafb;transition:all .2s ease}input[type=text][_ngcontent-%COMP%]:hover, textarea[_ngcontent-%COMP%]:hover{background-color:#f3f4f6}input[type=text][_ngcontent-%COMP%]:focus, textarea[_ngcontent-%COMP%]:focus{background-color:#fff;box-shadow:0 0 0 3px #4f46e51a}.category-item[_ngcontent-%COMP%]{position:relative;margin-bottom:1rem}.category-radio[_ngcontent-%COMP%]{position:absolute;opacity:0;width:0;height:0}.category-radio[_ngcontent-%COMP%]:checked + .category-label[_ngcontent-%COMP%]{border-color:#4f46e5;background-color:#f3f4f6}.category-radio[_ngcontent-%COMP%]:checked + .category-label[_ngcontent-%COMP%]   .category-icon[_ngcontent-%COMP%]{opacity:1;transform:scale(1)}.category-label[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:1rem;border:2px solid #e5e7eb;border-radius:.5rem;cursor:pointer;transition:all .2s ease}.category-label[_ngcontent-%COMP%]:hover{border-color:#4f46e5;background-color:#f3f4f6}.category-content[_ngcontent-%COMP%]{flex:1}.category-name[_ngcontent-%COMP%]{font-weight:500;color:#374151}.category-icon[_ngcontent-%COMP%]{opacity:0;transform:scale(0);transition:all .2s ease;color:#4f46e5}.roles-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:1rem;margin-top:.5rem}.role-item[_ngcontent-%COMP%]{position:relative;transition:all .2s ease-in-out}.role-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{padding:1rem!important;border:1px solid #e2e8f0;border-radius:.375rem}.role-item[_ngcontent-%COMP%]:hover{background-color:#f8fafc}.role-item[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{position:absolute;opacity:0;cursor:pointer;height:0;width:0}.role-item[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]{border-color:#4f46e5;color:#4f46e5}.role-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;width:100%;padding:.5rem;cursor:pointer;border-radius:.375rem;transition:all .2s ease-in-out}.role-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:hover{background-color:#f8fafc}"]}),n})();var Ko=d(1112);function $o(n,r){1&n&&(t.TgZ(0,"div",7),t._UZ(1,"div",8),t.qZA())}function Ro(n,r){if(1&n&&(t.TgZ(0,"div",9)(1,"strong",10),t._uU(2,"Erreur!"),t.qZA(),t.TgZ(3,"span",11),t._uU(4),t.qZA()()),2&n){const e=t.oxw();t.xp6(4),t.Oqu(e.error)}}function Bo(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",12)(1,"div",13)(2,"div",14)(3,"label",15),t._uU(4,"Rechercher"),t.qZA(),t.TgZ(5,"input",16),t.NdJ("ngModelChange",function(i){t.CHM(e);const a=t.oxw();return t.KtG(a.searchTerm=i)})("ngModelChange",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.applyFilters())}),t.qZA()(),t.TgZ(6,"div",17)(7,"input",18),t.NdJ("ngModelChange",function(i){t.CHM(e);const a=t.oxw();return t.KtG(a.showOnlyPassed=i)})("ngModelChange",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.applyFilters())}),t.qZA(),t.TgZ(8,"label",19),t._uU(9,"Afficher uniquement les r\xe9ussites"),t.qZA()()()()}if(2&n){const e=t.oxw();t.xp6(5),t.Q6J("ngModel",e.searchTerm),t.xp6(2),t.Q6J("ngModel",e.showOnlyPassed)}}function Vo(n,r){1&n&&(t.TgZ(0,"div",22)(1,"p",23),t._uU(2,"Aucune certification trouv\xe9e."),t.qZA()())}function Wo(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"tr",30)(1,"td",31)(2,"div",17)(3,"div")(4,"div",32),t._uU(5),t.qZA(),t.TgZ(6,"div",33),t._uU(7),t.qZA()()()(),t.TgZ(8,"td",31)(9,"div",34),t._uU(10),t.qZA()(),t.TgZ(11,"td",31)(12,"div",34),t._uU(13),t.qZA()(),t.TgZ(14,"td",31)(15,"div",34),t._uU(16),t.qZA()(),t.TgZ(17,"td",31)(18,"span",35),t._uU(19),t.qZA()(),t.TgZ(20,"td",31)(21,"span",35),t._uU(22),t.qZA()(),t.TgZ(23,"td",36)(24,"button",37),t.NdJ("click",function(){const a=t.CHM(e).$implicit,c=t.oxw(3);return t.KtG(c.viewCertification(a.id))}),t._uU(25," Voir "),t.qZA()()()}if(2&n){const e=r.$implicit,o=t.oxw(3);t.xp6(5),t.hij(" ",e.user.userName," "),t.xp6(2),t.hij(" ",e.user.email," "),t.xp6(3),t.Oqu(e.session.formation.title),t.xp6(3),t.Oqu(e.session.title),t.xp6(3),t.Oqu(o.formatDate(e.createdAt)),t.xp6(2),t.Q6J("ngClass",o.getScoreClass(e.score)),t.xp6(1),t.hij(" ",e.score.toFixed(1),"% "),t.xp6(2),t.Q6J("ngClass",e.score>=70?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),t.xp6(1),t.hij(" ",o.getPassStatus(e.score)," ")}}function Xo(n,r){if(1&n&&(t.TgZ(0,"div",24)(1,"table",25)(2,"thead",26)(3,"tr")(4,"th",27),t._uU(5," Utilisateur "),t.qZA(),t.TgZ(6,"th",27),t._uU(7," Formation "),t.qZA(),t.TgZ(8,"th",27),t._uU(9," Session "),t.qZA(),t.TgZ(10,"th",27),t._uU(11," Date "),t.qZA(),t.TgZ(12,"th",27),t._uU(13," Score "),t.qZA(),t.TgZ(14,"th",27),t._uU(15," Statut "),t.qZA(),t.TgZ(16,"th",27),t._uU(17," Actions "),t.qZA()()(),t.TgZ(18,"tbody",28),t.YNc(19,Wo,26,9,"tr",29),t.qZA()()()),2&n){const e=t.oxw(2);t.xp6(19),t.Q6J("ngForOf",e.filteredCertifications)}}function tn(n,r){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,Vo,3,0,"div",20),t.YNc(2,Xo,20,1,"div",21),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",0===e.filteredCertifications.length),t.xp6(1),t.Q6J("ngIf",e.filteredCertifications.length>0)}}let en=(()=>{class n{constructor(e,o){this.certificationService=e,this.router=o,this.certifications=[],this.filteredCertifications=[],this.isLoading=!1,this.error=null,this.searchTerm="",this.showOnlyPassed=!1}ngOnInit(){this.loadCertifications()}loadCertifications(){this.isLoading=!0,this.error=null,this.certificationService.getCertifications().subscribe({next:e=>{this.certifications=e,this.applyFilters(),this.isLoading=!1},error:e=>{this.error="Erreur lors du chargement des certifications. Veuillez r\xe9essayer plus tard.",this.isLoading=!1,console.error("Erreur lors du chargement des certifications:",e)}})}applyFilters(){let e=[...this.certifications];if(this.showOnlyPassed&&(e=e.filter(o=>o.score>=70)),this.searchTerm){const o=this.searchTerm.toLowerCase();e=e.filter(i=>i.user.userName.toLowerCase().includes(o)||i.user.email.toLowerCase().includes(o)||i.session.title.toLowerCase().includes(o)||i.session.formation.title.toLowerCase().includes(o)||i.description.toLowerCase().includes(o))}this.filteredCertifications=e}getPassStatus(e){return e>=70?"R\xe9ussi":"\xc9chou\xe9"}getScoreClass(e){return e>=90?"text-green-700 bg-green-100":e>=70?"text-green-600 bg-green-50":e>=50?"text-yellow-600 bg-yellow-50":"text-red-600 bg-red-50"}formatDate(e){if(!e)return"";const o=new Date(e);return`${o.getDate().toString().padStart(2,"0")}/${(o.getMonth()+1).toString().padStart(2,"0")}/${o.getFullYear()}`}viewCertification(e){this.router.navigate(["/admin/certifications",e])}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Ko.n),t.Y36(p.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-admin-certification-list"]],decls:8,vars:4,consts:[[1,"container","mx-auto","px-4","py-6"],[1,"flex","justify-between","items-center","mb-6"],[1,"text-2xl","font-bold","text-gray-800"],["class","flex justify-center items-center py-10",4,"ngIf"],["class","bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative","role","alert",4,"ngIf"],["class","bg-gray-50 p-4 rounded-lg mb-6",4,"ngIf"],[4,"ngIf"],[1,"flex","justify-center","items-center","py-10"],[1,"animate-spin","rounded-full","h-12","w-12","border-t-2","border-b-2","border-primary"],["role","alert",1,"bg-red-100","border","border-red-400","text-red-700","px-4","py-3","rounded","relative"],[1,"font-bold"],[1,"block","sm:inline"],[1,"bg-gray-50","p-4","rounded-lg","mb-6"],[1,"flex","flex-wrap","gap-4","items-center"],[1,"flex-1"],["for","search",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["type","text","id","search","placeholder","Rechercher par nom, email, formation...",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-primary","focus:border-primary",3,"ngModel","ngModelChange"],[1,"flex","items-center"],["type","checkbox","id","showPassed",1,"h-4","w-4","text-primary","focus:ring-primary","border-gray-300","rounded",3,"ngModel","ngModelChange"],["for","showPassed",1,"ml-2","block","text-sm","text-gray-900"],["class","bg-white rounded-lg shadow p-8 text-center",4,"ngIf"],["class","bg-white rounded-lg shadow overflow-hidden",4,"ngIf"],[1,"bg-white","rounded-lg","shadow","p-8","text-center"],[1,"text-gray-500"],[1,"bg-white","rounded-lg","shadow","overflow-hidden"],[1,"min-w-full","divide-y","divide-gray-200"],[1,"bg-gray-50"],["scope","col",1,"px-6","py-3","text-left","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"bg-white","divide-y","divide-gray-200"],["class","hover:bg-gray-50",4,"ngFor","ngForOf"],[1,"hover:bg-gray-50"],[1,"px-6","py-4","whitespace-nowrap"],[1,"text-sm","font-medium","text-gray-900"],[1,"text-sm","text-gray-500"],[1,"text-sm","text-gray-900"],[1,"px-2","py-1","inline-flex","text-xs","leading-5","font-semibold","rounded-full",3,"ngClass"],[1,"px-6","py-4","whitespace-nowrap","text-right","text-sm","font-medium"],[1,"text-primary","hover:text-primary-dark",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h1",2),t._uU(3,"Toutes les certifications"),t.qZA()(),t.YNc(4,$o,2,0,"div",3),t.YNc(5,Ro,5,1,"div",4),t.YNc(6,Bo,10,2,"div",5),t.YNc(7,tn,3,2,"div",6),t.qZA()),2&e&&(t.xp6(4),t.Q6J("ngIf",o.isLoading),t.xp6(1),t.Q6J("ngIf",o.error),t.xp6(1),t.Q6J("ngIf",!o.isLoading&&!o.error),t.xp6(1),t.Q6J("ngIf",!o.isLoading&&!o.error))},dependencies:[l.mk,l.sg,l.O5,s.Fj,s.Wl,s.JJ,s.On]}),n})();var on=d(885);const rn=[{path:"",component:j},{path:"formations",component:X},{path:"formations/create",component:Ho},{path:"formations/:id",component:Jo},{path:"formations/edit/:id",component:so},{path:"employees",component:Zt},{path:"sessions",component:Ut},{path:"settings",component:d(7814).f},{path:"quizs",component:St},{path:"quizs/create",component:Bt},{path:"quizs/:id",component:oe},{path:"quizs/edit/:id",component:ge},{path:"quizs/test/:id",component:co.O},{path:"certifications",component:en},{path:"certifications/:id",component:on.L}];let an=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[p.Bz.forChild(rn),p.Bz]}),n})();var sn=d(6191);let cn=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[l.ez,an,s.UX,m.Is,s.u5,sn.m]}),n})()}}]);