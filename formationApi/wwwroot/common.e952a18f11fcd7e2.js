"use strict";(self.webpackChunkformationApp=self.webpackChunkformationApp||[]).push([[592],{4991:(v,m,r)=>{r.d(m,{k:()=>e});var e=(()=>{return(l=e||(e={}))[l.Info=0]="Info",l[l.Success=1]="Success",l[l.Warning=2]="Warning",l[l.Danger=3]="Danger",e;var l})()},7297:(v,m,r)=>{r.d(m,{l:()=>g});var e=r(2340),l=r(1571),s=r(529);let g=(()=>{class u{constructor(d){this.http=d,this.apiUrl=`${e.N.baseUrl}/group`}getGroups(){return this.http.get(this.apiUrl)}getGroup(d){return this.http.get(`${this.apiUrl}/${d}`)}getSupervisorGroup(){return this.http.get(`${this.apiUrl}/current`)}createGroup(d){return this.http.post(this.apiUrl,d)}createUser(d){return this.http.post(`${e.N.baseUrl}/users/create-user`,d)}}return u.\u0275fac=function(d){return new(d||u)(l.LFG(s.eN))},u.\u0275prov=l.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})()},4344:(v,m,r)=>{r.d(m,{Z:()=>u});var e=r(4004),l=r(2340),s=r(1571),g=r(529);let u=(()=>{class c{constructor(a){this.http=a,this.apiUrl=`${l.N.baseUrl}/session`}getAll(){return this.http.get(this.apiUrl).pipe((0,e.U)(a=>a.map(i=>({...i,startDate:new Date(i.startDate),endDate:new Date(i.endDate),status:this.getSessionStatus(i)}))))}createSession(a){return this.http.post(this.apiUrl,a).pipe((0,e.U)(i=>({...i,startDate:new Date(i.startDate),endDate:new Date(i.endDate),status:this.getSessionStatus(i)})))}updateSession(a){return this.http.put(`${this.apiUrl}/${a.id}`,a).pipe((0,e.U)(i=>({...i,startDate:new Date(i.startDate),endDate:new Date(i.endDate),status:this.getSessionStatus(i)})))}deleteSession(a){return this.http.delete(`${this.apiUrl}/${a}`)}getSessionStatus(a){const i=new Date,D=new Date(a.startDate);return i>new Date(a.endDate)?"Termin\xe9e":i<D?"Pas encore":"En cours"}}return c.\u0275fac=function(a){return new(a||c)(s.LFG(g.eN))},c.\u0275prov=s.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})()},5952:(v,m,r)=>{r.d(m,{U:()=>O});var e=r(1571),l=r(5412),s=r(433),g=r(5061),u=r(4344),c=r(6895);function d(n,p){1&n&&(e.TgZ(0,"div",22),e._uU(1," Title is required "),e.qZA())}function a(n,p){if(1&n&&(e.TgZ(0,"option",23),e._uU(1),e.qZA()),2&n){const o=p.$implicit;e.Q6J("value",o.id),e.xp6(1),e.hij(" ",o.title," ")}}function i(n,p){1&n&&(e.O4$(),e.kcU(),e.TgZ(0,"div",22),e._uU(1," Formation is required "),e.qZA())}function D(n,p){1&n&&(e.TgZ(0,"div",22),e._uU(1," Start date is required "),e.qZA())}function x(n,p){1&n&&(e.TgZ(0,"div",22),e._uU(1," End date is required "),e.qZA())}function P(n,p){1&n&&(e.TgZ(0,"span"),e._UZ(1,"i",24),e._uU(2," Chargement... "),e.qZA())}function C(n,p){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const o=e.oxw();e.xp6(1),e.hij(" ",null!=o.data.session&&o.data.session.id?"Mettre \xe0 jour":"Cr\xe9er la session"," ")}}let O=(()=>{class n{constructor(o,t,f){this.dialogRef=o,this.data=t,this.fb=f,this.formations=[],this.isLoading=!1,this.formationsService=(0,e.f3M)(g.B),this.sessionsService=(0,e.f3M)(u.Z),this.sessionForm=this.fb.group({title:[t.session?.title||"",s.kI.required],startDate:[t.session?.startDate?new Date(t.session.startDate).toISOString().split("T")[0]:"",s.kI.required],endDate:[t.session?.endDate?new Date(t.session.endDate).toISOString().split("T")[0]:"",s.kI.required],formationId:[t.formationId?.toString()||t.session?.formationId?.toString()||"",s.kI.required]}),t.formationId&&this.sessionForm.get("formationId")?.disable()}ngOnInit(){this.data.formationId?this.formationsService.getFormation(this.data.formationId).subscribe({next:o=>{this.formations=[o]},error:o=>{console.error("Error loading formation:",o),this.dialogRef.close()}}):this.formationsService.getFormations().subscribe({next:o=>{this.formations=o},error:o=>{console.error("Error loading formations:",o),this.dialogRef.close()}})}onNoClick(){this.dialogRef.close()}onSubmit(){if(this.sessionForm.valid){this.isLoading=!0;const o={...this.sessionForm.getRawValue()};this.data.session?.id?(o.id=this.data.session.id,this.sessionsService.updateSession(o).subscribe({next:t=>{this.dialogRef.close(t),this.isLoading=!1},error:t=>{console.error("Error updating session:",t),this.isLoading=!1,this.dialogRef.close()}})):this.sessionsService.createSession(o).subscribe({next:t=>{this.dialogRef.close(t),this.isLoading=!1},error:t=>{console.error("Error creating session:",t),this.isLoading=!1,this.dialogRef.close()}})}}}return n.\u0275fac=function(o){return new(o||n)(e.Y36(l.so),e.Y36(l.WI),e.Y36(s.qu))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-session-popup"]],decls:39,vars:10,consts:[[1,"fixed","inset-0","bg-black","bg-opacity-50","flex","items-center","justify-center","z-50"],[1,"bg-white","rounded-lg","p-6","w-full","max-w-md"],[1,"text-xl","font-semibold","text-gray-800","mb-4"],[1,"space-y-4",3,"formGroup"],[1,"space-y-2"],[1,"block","text-sm","font-medium","text-gray-700"],["type","text","formControlName","title","required","",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","bg-gray-50","text-gray-900","placeholder-gray-400"],["class","text-red-500 text-sm",4,"ngIf"],[1,"relative"],["formControlName","formationId","required","",1,"block","w-full","px-3","py-2","border","border-gray-300","bg-white","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-primary","focus:border-primary","text-gray-700","text-sm","appearance-none"],["value","","disabled","","selected","",1,"text-gray-400"],["class","text-gray-900",3,"value",4,"ngFor","ngForOf"],[1,"pointer-events-none","absolute","inset-y-0","right-0","flex","items-center","pr-3"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20",1,"h-4","w-4","text-gray-400"],["d","M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"],[1,"grid","grid-cols-2","gap-4"],["type","date","formControlName","startDate","required","",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","bg-gray-50","text-gray-900"],["type","date","formControlName","endDate","required","",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","bg-gray-50","text-gray-900"],[1,"flex","justify-end","space-x-3","mt-6"],[1,"px-4","py-2","text-sm","font-medium","text-gray-700","bg-white","border","border-gray-300","rounded-md","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-blue-500",3,"click"],[1,"px-4","py-2","text-sm","font-medium","text-white","bg-blue-600","rounded-md","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-blue-500","disabled:bg-blue-500","disabled:cursor-not-allowed",3,"disabled","click"],[4,"ngIf"],[1,"text-red-500","text-sm"],[1,"text-gray-900",3,"value"],[1,"fa-solid","fa-spinner","animate-spin","mr-1"]],template:function(o,t){if(1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h2",2),e._uU(3),e.qZA(),e.TgZ(4,"form",3)(5,"div",4)(6,"label",5),e._uU(7,"Title"),e.qZA(),e._UZ(8,"input",6),e.YNc(9,d,2,0,"div",7),e.qZA(),e.TgZ(10,"div",4)(11,"label",5),e._uU(12,"Formation"),e.qZA(),e.TgZ(13,"div",8)(14,"select",9)(15,"option",10),e._uU(16,"Select a formation"),e.qZA(),e.YNc(17,a,2,2,"option",11),e.qZA(),e.TgZ(18,"div",12),e.O4$(),e.TgZ(19,"svg",13),e._UZ(20,"path",14),e.qZA()()(),e.YNc(21,i,2,0,"div",7),e.qZA(),e.kcU(),e.TgZ(22,"div",15)(23,"div",4)(24,"label",5),e._uU(25,"Start Date"),e.qZA(),e._UZ(26,"input",16),e.YNc(27,D,2,0,"div",7),e.qZA(),e.TgZ(28,"div",4)(29,"label",5),e._uU(30,"End Date"),e.qZA(),e._UZ(31,"input",17),e.YNc(32,x,2,0,"div",7),e.qZA()()(),e.TgZ(33,"div",18)(34,"button",19),e.NdJ("click",function(){return t.onNoClick()}),e._uU(35," Cancel "),e.qZA(),e.TgZ(36,"button",20),e.NdJ("click",function(){return t.onSubmit()}),e.YNc(37,P,3,0,"span",21),e.YNc(38,C,2,1,"span",21),e.qZA()()()()),2&o){let f,_,b,h;e.xp6(3),e.hij(" ",null!=t.data.session&&t.data.session.id?"Modifier la session":"Cr\xe9er une nouvelle session"," "),e.xp6(1),e.Q6J("formGroup",t.sessionForm),e.xp6(5),e.Q6J("ngIf",(null==(f=t.sessionForm.get("title"))?null:f.invalid)&&(null==(f=t.sessionForm.get("title"))?null:f.touched)),e.xp6(8),e.Q6J("ngForOf",t.formations),e.xp6(4),e.Q6J("ngIf",(null==(_=t.sessionForm.get("formationId"))?null:_.invalid)&&(null==(_=t.sessionForm.get("formationId"))?null:_.touched)),e.xp6(6),e.Q6J("ngIf",(null==(b=t.sessionForm.get("startDate"))?null:b.invalid)&&(null==(b=t.sessionForm.get("startDate"))?null:b.touched)),e.xp6(5),e.Q6J("ngIf",(null==(h=t.sessionForm.get("endDate"))?null:h.invalid)&&(null==(h=t.sessionForm.get("endDate"))?null:h.touched)),e.xp6(4),e.Q6J("disabled",t.sessionForm.invalid||t.isLoading),e.xp6(1),e.Q6J("ngIf",t.isLoading),e.xp6(1),e.Q6J("ngIf",!t.isLoading)}},dependencies:[c.sg,c.O5,s._Y,s.YN,s.Kr,s.Fj,s.EJ,s.JJ,s.JL,s.Q7,s.sg,s.u],styles:["[_nghost-%COMP%]{display:block}.popup-container[_ngcontent-%COMP%]{background-color:#fff;border-radius:.5rem;box-shadow:0 4px 6px -1px #0000001a,0 2px 4px -1px #0000000f}input[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{transition:all .2s ease-in-out;background-color:#f9fafb;border-color:#e5e7eb;color:#111827}input[_ngcontent-%COMP%]:hover, select[_ngcontent-%COMP%]:hover{border-color:#d1d5db;background-color:#f3f4f6}input[_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus{border-color:#3b82f6;background-color:#fff;box-shadow:0 0 0 2px #3b82f680}input[_ngcontent-%COMP%]:disabled, select[_ngcontent-%COMP%]:disabled{background-color:#f3f4f6;color:#9ca3af;cursor:not-allowed}input[_ngcontent-%COMP%]::placeholder, select[_ngcontent-%COMP%]::placeholder{color:#9ca3af}select[_ngcontent-%COMP%]{background-image:none;appearance:none;cursor:pointer}select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{padding:.5rem;background-color:#fff}select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]:disabled{color:#9ca3af}input[type=date][_ngcontent-%COMP%]::-webkit-calendar-picker-indicator{cursor:pointer;opacity:.7}input[type=date][_ngcontent-%COMP%]::-webkit-calendar-picker-indicator:hover{opacity:1}.error-message[_ngcontent-%COMP%]{color:#ef4444;font-size:.875rem;margin-top:.25rem}button[_ngcontent-%COMP%]{transition:all .2s ease-in-out}button[_ngcontent-%COMP%]:focus{outline:none;box-shadow:0 0 0 2px #3b82f680}button[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}  .mat-mdc-dialog-container{--mdc-dialog-container-color: white}  .mat-mdc-form-field{width:100%}  .mat-mdc-form-field-subscript-wrapper{display:none}  .mat-mdc-form-field-infix{padding-top:8px!important;padding-bottom:8px!important}  .mat-mdc-text-field-wrapper{background-color:#fff!important}  .mat-mdc-form-field-flex{background-color:#fff!important}  .mat-mdc-form-field-outline{color:#e5e7eb!important}  .mat-mdc-form-field-outline-thick{color:#3b82f6!important}  .mat-mdc-form-field:hover .mat-mdc-form-field-outline{color:#d1d5db!important}  .mat-mdc-form-field.mat-focused .mat-mdc-form-field-outline-thick{color:#3b82f6!important}  .mat-mdc-form-field.mat-focused .mat-mdc-form-field-label{color:#3b82f6!important}  .mat-mdc-form-field-error{color:#ef4444!important}  .mat-mdc-raised-button{--mdc-protected-button-container-color: #3b82f6;--mdc-protected-button-label-text-color: white}  .mat-mdc-raised-button:hover{--mdc-protected-button-container-color: #2563eb}  .mat-mdc-raised-button:disabled{--mdc-protected-button-container-color: #93c5fd;--mdc-protected-button-label-text-color: white}"]}),n})()}}]);