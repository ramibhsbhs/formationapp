"use strict";(self.webpackChunkformationApp=self.webpackChunkformationApp||[]).push([[565],{6565:(J,g,s)=>{s.r(g),s.d(g,{AuthModule:()=>F});var d=s(6895),c=s(7917),p=s(5861),e=s(1571),l=s(433),f=s(4569),x=s(2340);function _(o,n){1&o&&(e.TgZ(0,"div",30)(1,"p",31),e._uU(2,"Votre compte a \xe9t\xe9 d\xe9sactiv\xe9 par un administrateur. Veuillez contacter le support pour plus d'informations."),e.qZA()())}const h=function(o,n){return{"bg-red-100 text-red-700":o,"bg-orange-100 text-orange-700":n}};function b(o,n){if(1&o&&(e.TgZ(0,"div",26),e.O4$(),e.TgZ(1,"svg",27),e._UZ(2,"path",28),e.qZA(),e.kcU(),e.TgZ(3,"div")(4,"span"),e._uU(5),e.qZA(),e.YNc(6,_,3,0,"div",29),e.qZA()()),2&o){const t=e.oxw();e.Q6J("ngClass",e.WLB(3,h,!t.isAccountDisabled,t.isAccountDisabled)),e.xp6(5),e.Oqu(t.error),e.xp6(1),e.Q6J("ngIf",t.isAccountDisabled)}}function v(o,n){1&o&&(e.ynx(0),e.O4$(),e.TgZ(1,"svg",32),e._UZ(2,"circle",33)(3,"path",34),e.qZA(),e._uU(4," Chargement... "),e.BQk())}function w(o,n){1&o&&e._uU(0," Se connecter ")}const m=function(o,n){return{"bg-blue-100 text-blue-800":o,"bg-gray-100 text-gray-800":n}};function y(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"button",52),e.NdJ("click",function(){const a=e.CHM(t).$implicit,u=e.oxw(3);return e.KtG(u.selectRole(a))}),e._uU(1),e.qZA()}if(2&o){const t=n.$implicit,r=e.oxw(3);e.Q6J("ngClass",e.WLB(2,m,r.selectedRole===t,r.selectedRole!==t)),e.xp6(1),e.hij(" ",t," ")}}function Z(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"button",52),e.NdJ("click",function(){const a=e.CHM(t).$implicit,u=e.oxw(3);return e.KtG(u.selectGroup(a))}),e._uU(1),e.qZA()}if(2&o){const t=n.$implicit,r=e.oxw(3);e.Q6J("ngClass",e.WLB(2,m,r.selectedGroup===t,r.selectedGroup!==t)),e.xp6(1),e.hij(" ",t," ")}}function A(o,n){if(1&o&&(e.TgZ(0,"span",69),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.group," ")}}function T(o,n){1&o&&(e.TgZ(0,"span",70),e._uU(1,"-"),e.qZA())}function C(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"tr")(1,"td",62),e._uU(2),e.qZA(),e.TgZ(3,"td",63),e._uU(4),e.qZA(),e.TgZ(5,"td",63)(6,"span",64),e._uU(7),e.qZA()(),e.TgZ(8,"td",63),e.YNc(9,A,2,1,"span",65),e.YNc(10,T,2,0,"span",66),e.qZA(),e.TgZ(11,"td",67)(12,"button",68),e.NdJ("click",function(){const a=e.CHM(t).$implicit,u=e.oxw(3);return e.KtG(u.selectUser(a))}),e._uU(13," S\xe9lectionner "),e.qZA()()()}if(2&o){const t=n.$implicit;e.xp6(2),e.hij(" ",t.username," "),e.xp6(2),e.hij(" ",t.email," "),e.xp6(3),e.hij(" ",t.role," "),e.xp6(2),e.Q6J("ngIf",t.group),e.xp6(1),e.Q6J("ngIf",!t.group)}}function U(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",39)(1,"div",40),e._UZ(2,"div",41),e.TgZ(3,"span",42),e._uU(4,"\u200b"),e.qZA(),e.TgZ(5,"div",43)(6,"div",44)(7,"div",45)(8,"div",46)(9,"h3",47),e._uU(10," S\xe9lectionner un utilisateur "),e.qZA(),e.TgZ(11,"div",48)(12,"div",49)(13,"div")(14,"label",50),e._uU(15,"Filtrer par r\xf4le"),e.qZA(),e.TgZ(16,"div",51)(17,"button",52),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.selectRole(null))}),e._uU(18," Tous "),e.qZA(),e.YNc(19,y,2,5,"button",53),e.qZA()(),e.TgZ(20,"div")(21,"label",50),e._uU(22,"Filtrer par groupe"),e.qZA(),e.TgZ(23,"div",51)(24,"button",52),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.selectGroup(null))}),e._uU(25," Tous "),e.qZA(),e.YNc(26,Z,2,5,"button",53),e.qZA()()(),e.TgZ(27,"div",54)(28,"table",55)(29,"thead",56)(30,"tr")(31,"th",57),e._uU(32," Nom d'utilisateur "),e.qZA(),e.TgZ(33,"th",57),e._uU(34," Email "),e.qZA(),e.TgZ(35,"th",57),e._uU(36," R\xf4le "),e.qZA(),e.TgZ(37,"th",57),e._uU(38," Groupe "),e.qZA(),e.TgZ(39,"th",57),e._uU(40," Action "),e.qZA()()(),e.TgZ(41,"tbody",58),e.YNc(42,C,14,5,"tr",59),e.qZA()()()()()()(),e.TgZ(43,"div",60)(44,"button",61),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.toggleUserSelector())}),e._uU(45," Fermer "),e.qZA()()()()()}if(2&o){const t=e.oxw(2);e.xp6(17),e.Q6J("ngClass",e.WLB(5,m,!t.selectedRole,t.selectedRole)),e.xp6(2),e.Q6J("ngForOf",t.uniqueRoles),e.xp6(5),e.Q6J("ngClass",e.WLB(8,m,!t.selectedGroup,t.selectedGroup)),e.xp6(2),e.Q6J("ngForOf",t.uniqueGroups),e.xp6(16),e.Q6J("ngForOf",t.filteredUsers)}}function q(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",35)(1,"p",36),e._uU(2,"Pour une d\xe9monstration, utilisez :"),e.qZA(),e.TgZ(3,"button",37),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.toggleUserSelector())}),e._uU(4),e.qZA(),e.YNc(5,U,46,11,"div",38),e.qZA()}if(2&o){const t=e.oxw();e.xp6(4),e.hij(" ",t.showUserSelector?"Fermer le s\xe9lecteur":"S\xe9lectionner un utilisateur"," "),e.xp6(1),e.Q6J("ngIf",t.showUserSelector)}}const L=[{path:"login",component:(()=>{class o{constructor(){this.isLoading=!1,this.error="",this.isAccountDisabled=!1,this.inDev=!x.N.production,this.showUserSelector=!1,this.fb=(0,e.f3M)(l.qu),this.router=(0,e.f3M)(c.F0),this.auth=(0,e.f3M)(f.e),this.selectedRole=null,this.selectedGroup=null,this.users=[{username:"admin",email:"admin@gmail.com",password:"Pa$$w0rd",role:"Administrator",group:null},{username:"manager",email:"manager@gmail.com",password:"Pa$$w0rd",role:"Manager",group:null},{username:"hierarchicalleader1",email:"hierarchicalleader1@gmail.com",password:"Pa$$w0rd",role:"HierarchicalLeader",group:"Dev"},{username:"teamleader1",email:"teamleader1@gmail.com",password:"Pa$$w0rd",role:"TeamLeader",group:"Dev"},{username:"postleader1",email:"postleader1@gmail.com",password:"Pa$$w0rd",role:"PostLeader",group:"Dev"},{username:"qualityagent1",email:"qualityagent1@gmail.com",password:"Pa$$w0rd",role:"QualityAgent",group:"Dev"},{username:"hierarchicalleader2",email:"hierarchicalleader2@gmail.com",password:"Pa$$w0rd",role:"HierarchicalLeader",group:"RH"},{username:"teamleader2",email:"teamleader2@gmail.com",password:"Pa$$w0rd",role:"TeamLeader",group:"RH"},{username:"postleader2",email:"postleader2@gmail.com",password:"Pa$$w0rd",role:"PostLeader",group:"RH"},{username:"qualityagent2",email:"qualityagent2@gmail.com",password:"Pa$$w0rd",role:"QualityAgent",group:"RH"},{username:"hierarchicalleader3",email:"hierarchicalleader3@gmail.com",password:"Pa$$w0rd",role:"HierarchicalLeader",group:"Any"},{username:"teamleader3",email:"teamleader3@gmail.com",password:"Pa$$w0rd",role:"TeamLeader",group:"Any"},{username:"postleader3",email:"postleader3@gmail.com",password:"Pa$$w0rd",role:"PostLeader",group:"Any"},{username:"qualityagent3",email:"qualityagent3@gmail.com",password:"Pa$$w0rd",role:"QualityAgent",group:"Any"}]}ngOnInit(){this.initForm()}initForm(){this.loginForm=this.fb.group({email:["",[l.kI.required,l.kI.email]],password:["",[l.kI.required,l.kI.minLength(6)]]})}onSubmit(){var t=this;return(0,p.Z)(function*(){t.error="",t.isLoading=!0,t.auth.login(t.loginForm.value).subscribe({next:r=>{console.log(r),t.isLoading=!1,t.loginForm.reset()},error:r=>{t.error=r.error,t.isLoading=!1,t.isAccountDisabled=!(!t.error||!t.error.includes("d\xe9sactiv\xe9"))}})})()}setLogin(t,r){this.loginForm.patchValue({email:t,password:r})}toggleUserSelector(){this.showUserSelector=!this.showUserSelector}get uniqueRoles(){return[...new Set(this.users.map(t=>t.role))]}get uniqueGroups(){return[...new Set(this.users.map(t=>t.group).filter(Boolean))]}get filteredUsers(){return this.users.filter(t=>!(this.selectedRole&&t.role!==this.selectedRole||this.selectedGroup&&t.group!==this.selectedGroup))}selectRole(t){this.selectedRole=t}selectGroup(t){this.selectedGroup=t}selectUser(t){this.setLogin(t.email,t.password),this.showUserSelector=!1}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-login"]],decls:36,vars:6,consts:[[1,"min-h-screen","flex","flex-col","items-center","justify-center","bg-gray-50","p-4"],[1,"w-full","max-w-md"],[1,"mb-8","text-center"],[1,"inline-flex","items-center","justify-center","h-16","w-16","bg-primary","rounded-full","mb-4"],[1,"fas","fa-solid","fa-graduation-cap","text-3xl","text-white"],[1,"text-3xl","font-bold","text-gray-800"],[1,"text-gray-600","mt-2"],[1,"bg-white","p-8","rounded-lg","shadow-md"],[1,"text-2xl","font-bold","text-gray-800","mb-6"],["class","flex items-start","class","px-4 py-3 rounded mb-6",3,"ngClass",4,"ngIf"],[1,"space-y-6",3,"formGroup","ngSubmit"],[1,"space-y-2"],["for","email",1,"block","text-sm","font-medium","text-gray-700"],[1,"relative"],[1,"absolute","inset-y-0","left-0","flex","items-center","pl-3","pointer-events-none"],[1,"fa-solid","fa-envelope","h-5","w-5","text-gray-300"],["type","email","id","email","formControlName","email","placeholder","votre.email@example.com","required","",1,"w-full","pl-10","px-3","py-2","border","rounded-lg","shadow-sm","focus:outline-none","focus:ring","focus:border-blue-300"],[1,"flex","justify-between","items-center"],["for","password",1,"block","text-sm","font-medium","text-gray-700"],["routerLink","/reset-password",1,"text-sm","text-blue-600","hover:text-blue-400"],[1,"fa-solid","fas","fa-key","h-5","w-5","text-gray-300"],["type","password","id","password","formControlName","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022","required","",1,"w-full","pl-10","px-3","py-2","border","rounded-lg","shadow-sm","focus:outline-none","focus:ring","focus:border-primary"],["type","submit",1,"w-full","bg-primary","text-primary-foreground","py-2","px-4","rounded","hover:bg-primary/90","flex","items-center","justify-center",3,"disabled"],[4,"ngIf","ngIfElse"],["notLoading",""],["class","mt-6 text-center",4,"ngIf"],[1,"px-4","py-3","rounded","mb-6",3,"ngClass"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-5","w-5","mr-2","mt-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01M5.636 5.636l12.728 12.728M6.343 17.657L17.657 6.343"],["class","mt-2",4,"ngIf"],[1,"mt-2"],[1,"text-sm"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","-ml-1","mr-3","h-5","w-5","text-white"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z",1,"opacity-75"],[1,"mt-6","text-center"],[1,"text-sm","text-gray-600","mb-3"],[1,"px-4","py-2","text-sm","font-medium","text-white","bg-blue-600","rounded-md","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:ring-offset-2","transition-colors",3,"click"],["class","fixed inset-0 z-50 overflow-y-auto","aria-labelledby","modal-title","role","dialog","aria-modal","true",4,"ngIf"],["aria-labelledby","modal-title","role","dialog","aria-modal","true",1,"fixed","inset-0","z-50","overflow-y-auto"],[1,"flex","items-end","justify-center","min-h-screen","pt-4","px-4","pb-20","text-center","sm:block","sm:p-0"],["aria-hidden","true",1,"fixed","inset-0","bg-gray-500","bg-opacity-75","transition-opacity"],["aria-hidden","true",1,"hidden","sm:inline-block","sm:align-middle","sm:h-screen"],[1,"inline-block","align-bottom","bg-white","rounded-lg","text-left","overflow-hidden","shadow-xl","transform","transition-all","sm:my-8","sm:align-middle","sm:max-w-3xl","sm:w-full"],[1,"bg-white","px-4","pt-5","pb-4","sm:p-6","sm:pb-4"],[1,"sm:flex","sm:items-start"],[1,"mt-3","text-center","sm:mt-0","sm:ml-4","sm:text-left","w-full"],["id","modal-title",1,"text-lg","leading-6","font-medium","text-gray-900"],[1,"mt-4"],[1,"flex","flex-wrap","gap-4","mb-4"],[1,"block","text-sm","font-medium","text-gray-700","mb-1"],[1,"flex","flex-wrap","gap-2"],[1,"px-3","py-1","text-xs","rounded-full",3,"ngClass","click"],["class","px-3 py-1 text-xs rounded-full",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"mt-4","max-h-96","overflow-y-auto"],[1,"min-w-full","divide-y","divide-gray-200"],[1,"bg-gray-50"],["scope","col",1,"px-6","py-3","text-left","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"bg-white","divide-y","divide-gray-200"],[4,"ngFor","ngForOf"],[1,"bg-gray-50","px-4","py-3","sm:px-6","sm:flex","sm:flex-row-reverse"],["type","button",1,"mt-3","w-full","inline-flex","justify-center","rounded-md","border","border-gray-300","shadow-sm","px-4","py-2","bg-white","text-base","font-medium","text-gray-700","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-blue-500","sm:mt-0","sm:ml-3","sm:w-auto","sm:text-sm",3,"click"],[1,"px-6","py-4","whitespace-nowrap","text-sm","font-medium","text-gray-900"],[1,"px-6","py-4","whitespace-nowrap","text-sm","text-gray-500"],[1,"px-2","inline-flex","text-xs","leading-5","font-semibold","rounded-full","bg-blue-100","text-blue-800"],["class","px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",4,"ngIf"],["class","text-gray-400",4,"ngIf"],[1,"px-6","py-4","whitespace-nowrap","text-right","text-sm","font-medium"],[1,"text-blue-600","hover:text-blue-900","px-3","py-1","bg-blue-50","rounded-md","hover:bg-blue-100","transition-colors",3,"click"],[1,"px-2","inline-flex","text-xs","leading-5","font-semibold","rounded-full","bg-green-100","text-green-800"],[1,"text-gray-400"]],template:function(t,r){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e._UZ(4,"i",4),e.qZA(),e.TgZ(5,"h1",5),e._uU(6,"FormationPilot"),e.qZA(),e.TgZ(7,"p",6),e._uU(8,"SUMITOMO ELECTRIC BORDNETZE SE"),e.qZA()(),e.TgZ(9,"div",7)(10,"h2",8),e._uU(11,"Connexion"),e.qZA(),e.YNc(12,b,7,6,"div",9),e.TgZ(13,"form",10),e.NdJ("ngSubmit",function(){return r.onSubmit()}),e.TgZ(14,"div",11)(15,"label",12),e._uU(16,"Email"),e.qZA(),e.TgZ(17,"div",13)(18,"div",14),e._UZ(19,"i",15),e.qZA(),e._UZ(20,"input",16),e.qZA()(),e.TgZ(21,"div",11)(22,"div",17)(23,"label",18),e._uU(24,"Mot de passe"),e.qZA(),e.TgZ(25,"a",19),e._uU(26,"Mot de passe oubli\xe9 ?"),e.qZA()(),e.TgZ(27,"div",13)(28,"div",14),e._UZ(29,"i",20),e.qZA(),e._UZ(30,"input",21),e.qZA()(),e.TgZ(31,"button",22),e.YNc(32,v,5,0,"ng-container",23),e.YNc(33,w,1,0,"ng-template",null,24,e.W1O),e.qZA()()(),e.YNc(35,q,6,2,"div",25),e.qZA()()),2&t){const i=e.MAs(34);e.xp6(12),e.Q6J("ngIf",r.error),e.xp6(1),e.Q6J("formGroup",r.loginForm),e.xp6(18),e.Q6J("disabled",r.isLoading),e.xp6(1),e.Q6J("ngIf",r.isLoading)("ngIfElse",i),e.xp6(3),e.Q6J("ngIf",r.inDev)}},dependencies:[d.mk,d.sg,d.O5,c.yS,l._Y,l.Fj,l.JJ,l.JL,l.Q7,l.sg,l.u]}),o})()}];let $=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[c.Bz.forChild(L),c.Bz]}),o})();var k=s(6191);let F=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[d.ez,$,l.UX,k.m]}),o})()}}]);