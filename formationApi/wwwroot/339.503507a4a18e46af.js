"use strict";(self.webpackChunkformationApp=self.webpackChunkformationApp||[]).push([[339],{3039:(Q,b,c)=>{c.d(b,{T:()=>t});var n=c(2340),f=c(1571),_=c(529);let t=(()=>{class v{constructor(p){this.http=p,this.apiUrl=`${n.N.baseUrl}/feedback`}getAllFeedbacks(){return this.http.get(`${this.apiUrl}`)}getAllByAdmin(){return this.http.get(`${this.apiUrl}/admin`)}getUserFeedbacks(){return this.http.get(`${this.apiUrl}/user`)}getFeedback(p){return this.http.get(`${this.apiUrl}/${p}`)}getFeedbacksByFormation(p){return this.http.get(`${this.apiUrl}/formation/${p}`)}createFeedback(p){return this.http.post(`${this.apiUrl}`,p)}deleteFeedback(p){return this.http.delete(`${this.apiUrl}/${p}`)}}return v.\u0275fac=function(p){return new(p||v)(f.LFG(_.eN))},v.\u0275prov=f.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"}),v})()},339:(Q,b,c)=>{c.r(b),c.d(b,{ManagerModule:()=>zt});var n=c(6895),f=c(7917),_=c(5080),t=c(1571),v=c(5332);const T=["categoryChart"],p=["attemptsChart"],C=["ratingsChart"],A=["topFormationsChart"];function q(i,a){1&i&&(t.TgZ(0,"div",53),t._UZ(1,"i",54),t.TgZ(2,"p"),t._uU(3,"Aucune donn\xe9e disponible pour le moment."),t.qZA()())}function F(i,a){1&i&&(t.TgZ(0,"div",55),t._UZ(1,"canvas",null,56),t.qZA())}function w(i,a){1&i&&(t.TgZ(0,"div",53),t._UZ(1,"i",57),t.TgZ(2,"p"),t._uU(3,"Aucune donn\xe9e disponible pour le moment."),t.qZA()())}function U(i,a){1&i&&(t.TgZ(0,"div",55),t._UZ(1,"canvas",null,58),t.qZA())}function D(i,a){1&i&&(t.TgZ(0,"div",53),t._UZ(1,"i",59),t.TgZ(2,"p"),t._uU(3,"Aucune \xe9valuation disponible pour le moment."),t.qZA()())}function k(i,a){1&i&&(t.TgZ(0,"div",55),t._UZ(1,"canvas",null,60),t.qZA())}function I(i,a){1&i&&(t.TgZ(0,"div",53),t._UZ(1,"i",61),t.TgZ(2,"p"),t._uU(3,"Aucune formation n'a encore \xe9t\xe9 tent\xe9e."),t.qZA()())}function M(i,a){1&i&&(t.TgZ(0,"div",55),t._UZ(1,"canvas",null,62),t.qZA())}function J(i,a){1&i&&(t.TgZ(0,"div",63),t._UZ(1,"div",64),t.qZA())}function O(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",65)(1,"strong",66),t._uU(2,"Erreur!"),t.qZA(),t.TgZ(3,"span",67),t._uU(4," Impossible de charger les donn\xe9es du tableau de bord."),t.qZA(),t.TgZ(5,"button",68),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.refreshData())}),t._uU(6,"R\xe9essayer"),t.qZA()()}}_.kL.register(..._.zX);let d=(()=>{class i{constructor(e,o){this.dashboardService=e,this.router=o,this.loading=!0,this.error=!1}ngOnInit(){this.loadDashboardData()}loadDashboardData(){this.loading=!0,this.error=!1,this.dashboardService.getManagerDashboardData().subscribe({next:e=>{this.dashboardData=e,this.loading=!1,setTimeout(()=>{this.initCharts()},100)},error:e=>{console.error("Erreur lors du chargement des donn\xe9es du tableau de bord",e),this.loading=!1,this.error=!0}})}initCharts(){this.initCategoryChart(),this.initAttemptsChart(),this.initRatingsChart(),this.initTopFormationsChart()}initCategoryChart(){if(this.categoryChartCanvas&&this.dashboardData?.formationsByCategory?.length>0){const e=this.categoryChartCanvas.nativeElement.getContext("2d");this.categoryChart&&this.categoryChart.destroy(),this.categoryChart=new _.kL(e,{type:"pie",data:{labels:this.dashboardData.formationsByCategory.map(o=>o.category),datasets:[{data:this.dashboardData.formationsByCategory.map(o=>o.count),backgroundColor:["#4F46E5","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#06B6D4","#84CC16","#F97316","#6366F1"],borderWidth:1}]},options:{responsive:!0,plugins:{legend:{position:"right"},title:{display:!0,text:"Formations par cat\xe9gorie"}}}})}}initAttemptsChart(){if(this.attemptsChartCanvas&&this.dashboardData?.quizAttemptsOverTime?.length>0){const e=this.attemptsChartCanvas.nativeElement.getContext("2d");this.attemptsChart&&this.attemptsChart.destroy(),this.attemptsChart=new _.kL(e,{type:"line",data:{labels:this.dashboardData.quizAttemptsOverTime.map(o=>o.month),datasets:[{label:"Tentatives de quiz",data:this.dashboardData.quizAttemptsOverTime.map(o=>o.count),borderColor:"#4F46E5",backgroundColor:"rgba(79, 70, 229, 0.1)",borderWidth:2,fill:!0,tension:.4}]},options:{responsive:!0,plugins:{title:{display:!0,text:"Tentatives de quiz par mois"}},scales:{y:{beginAtZero:!0}}}})}}initRatingsChart(){if(this.ratingsChartCanvas&&this.dashboardData?.feedbackRatings?.length>0){const e=this.ratingsChartCanvas.nativeElement.getContext("2d");this.ratingsChart&&this.ratingsChart.destroy(),this.ratingsChart=new _.kL(e,{type:"bar",data:{labels:this.dashboardData.feedbackRatings.map(o=>`${o.rating.toFixed(1)} \xe9toiles`),datasets:[{label:"Nombre d'\xe9valuations",data:this.dashboardData.feedbackRatings.map(o=>o.count),backgroundColor:"#10B981",borderWidth:0,borderRadius:4}]},options:{responsive:!0,plugins:{title:{display:!0,text:"Distribution des \xe9valuations"}},scales:{y:{beginAtZero:!0}}}})}}initTopFormationsChart(){if(this.topFormationsChartCanvas&&this.dashboardData?.topFormations?.length>0){const e=this.topFormationsChartCanvas.nativeElement.getContext("2d");this.topFormationsChart&&this.topFormationsChart.destroy(),this.topFormationsChart=new _.kL(e,{type:"bar",data:{labels:this.dashboardData.topFormations.map(o=>this.truncateTitle(o.title)),datasets:[{label:"Nombre de tentatives",data:this.dashboardData.topFormations.map(o=>o.count),backgroundColor:"#F59E0B",borderWidth:0,borderRadius:4}]},options:{indexAxis:"y",responsive:!0,plugins:{title:{display:!0,text:"Formations les plus populaires"}},scales:{x:{beginAtZero:!0}}}})}}truncateTitle(e){return e.length>25?e.substring(0,22)+"...":e}refreshData(){this.loadDashboardData()}navigateTo(e){this.router.navigate([e])}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(v.s),t.Y36(f.F0))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-home"]],viewQuery:function(e,o){if(1&e&&(t.Gf(T,5),t.Gf(p,5),t.Gf(C,5),t.Gf(A,5)),2&e){let r;t.iGM(r=t.CRH())&&(o.categoryChartCanvas=r.first),t.iGM(r=t.CRH())&&(o.attemptsChartCanvas=r.first),t.iGM(r=t.CRH())&&(o.ratingsChartCanvas=r.first),t.iGM(r=t.CRH())&&(o.topFormationsChartCanvas=r.first)}},decls:139,vars:17,consts:[[1,"container","mx-auto","px-4","py-8"],[1,"flex","justify-between","items-center","mb-8"],[1,"text-3xl","font-bold","text-gray-800"],[1,"text-gray-600","mt-2"],[1,"px-4","py-2","bg-primary","text-white","rounded-md","flex","items-center",3,"click"],[1,"fas","fa-sync-alt","mr-2"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-4","gap-6","mb-8"],[1,"stat-card"],[1,"flex","justify-between","items-center","mb-2"],[1,"text-lg","font-semibold","text-gray-700"],[1,"p-2","bg-blue-100","rounded-full"],[1,"fas","fa-users","text-blue-600"],[1,"stat-value","text-blue-600"],[1,"stat-label"],[1,"p-2","bg-green-100","rounded-full"],[1,"fas","fa-graduation-cap","text-green-600"],[1,"stat-value","text-green-600"],[1,"p-2","bg-purple-100","rounded-full"],[1,"fas","fa-calendar-alt","text-purple-600"],[1,"stat-value","text-purple-600"],[1,"p-2","bg-yellow-100","rounded-full"],[1,"fas","fa-certificate","text-yellow-600"],[1,"stat-value","text-yellow-600"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-6","mb-8"],[1,"p-2","bg-indigo-100","rounded-full"],[1,"fas","fa-book","text-indigo-600"],[1,"stat-value","text-indigo-600"],[1,"p-2","bg-red-100","rounded-full"],[1,"fas","fa-question-circle","text-red-600"],[1,"stat-value","text-red-600"],[1,"p-2","bg-teal-100","rounded-full"],[1,"fas","fa-tasks","text-teal-600"],[1,"stat-value","text-teal-600"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-8","mb-8"],[1,"bg-white","p-6","rounded-lg","shadow-md"],[1,"text-lg","font-semibold","text-gray-700","mb-4"],["class","text-center py-8 text-gray-500",4,"ngIf"],["class","h-64",4,"ngIf"],[1,"bg-white","p-6","rounded-lg","shadow-md","hover:shadow-lg","transition-shadow"],[1,"flex","items-center","mb-4"],[1,"p-3","bg-blue-100","rounded-full","mr-4"],[1,"fas","fa-graduation-cap","text-blue-600","text-xl"],[1,"text-lg","font-semibold","text-gray-800"],[1,"text-gray-600"],[1,"w-full","px-4","py-2","bg-blue-600","text-white","rounded-md","hover:bg-blue-700","transition-colors",3,"click"],[1,"p-3","bg-purple-100","rounded-full","mr-4"],[1,"fas","fa-certificate","text-purple-600","text-xl"],[1,"w-full","px-4","py-2","bg-purple-600","text-white","rounded-md","hover:bg-purple-700","transition-colors",3,"click"],[1,"p-3","bg-yellow-100","rounded-full","mr-4"],[1,"fas","fa-calendar-alt","text-yellow-600","text-xl"],[1,"w-full","px-4","py-2","bg-yellow-600","text-white","rounded-md","hover:bg-yellow-700","transition-colors",3,"click"],["class","flex justify-center items-center py-12",4,"ngIf"],["class","bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-8",4,"ngIf"],[1,"text-center","py-8","text-gray-500"],[1,"fas","fa-chart-pie","text-2xl","mb-2"],[1,"h-64"],["categoryChart",""],[1,"fas","fa-chart-line","text-2xl","mb-2"],["attemptsChart",""],[1,"fas","fa-star","text-2xl","mb-2"],["ratingsChart",""],[1,"fas","fa-graduation-cap","text-2xl","mb-2"],["topFormationsChart",""],[1,"flex","justify-center","items-center","py-12"],[1,"animate-spin","rounded-full","h-12","w-12","border-t-2","border-b-2","border-primary"],[1,"bg-red-100","border","border-red-400","text-red-700","px-4","py-3","rounded","relative","mb-8"],[1,"font-bold"],[1,"block","sm:inline"],[1,"underline","ml-2",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div")(3,"h1",2),t._uU(4,"Tableau de bord manager"),t.qZA(),t.TgZ(5,"p",3),t._uU(6,"Aper\xe7u global des formations, utilisateurs et activit\xe9s"),t.qZA()(),t.TgZ(7,"button",4),t.NdJ("click",function(){return o.refreshData()}),t._UZ(8,"i",5),t._uU(9," Actualiser "),t.qZA()(),t.TgZ(10,"div",6)(11,"div",7)(12,"div",8)(13,"h3",9),t._uU(14,"Utilisateurs"),t.qZA(),t.TgZ(15,"div",10),t._UZ(16,"i",11),t.qZA()(),t.TgZ(17,"p",12),t._uU(18),t.qZA(),t.TgZ(19,"p",13),t._uU(20,"Utilisateurs inscrits"),t.qZA()(),t.TgZ(21,"div",7)(22,"div",8)(23,"h3",9),t._uU(24,"Formations"),t.qZA(),t.TgZ(25,"div",14),t._UZ(26,"i",15),t.qZA()(),t.TgZ(27,"p",16),t._uU(28),t.qZA(),t.TgZ(29,"p",13),t._uU(30,"Formations disponibles"),t.qZA()(),t.TgZ(31,"div",7)(32,"div",8)(33,"h3",9),t._uU(34,"Sessions"),t.qZA(),t.TgZ(35,"div",17),t._UZ(36,"i",18),t.qZA()(),t.TgZ(37,"p",19),t._uU(38),t.qZA(),t.TgZ(39,"p",13),t._uU(40,"Sessions planifi\xe9es"),t.qZA()(),t.TgZ(41,"div",7)(42,"div",8)(43,"h3",9),t._uU(44,"Certifications"),t.qZA(),t.TgZ(45,"div",20),t._UZ(46,"i",21),t.qZA()(),t.TgZ(47,"p",22),t._uU(48),t.qZA(),t.TgZ(49,"p",13),t._uU(50,"Certifications d\xe9livr\xe9es"),t.qZA()()(),t.TgZ(51,"div",23)(52,"div",7)(53,"div",8)(54,"h3",9),t._uU(55,"Modules"),t.qZA(),t.TgZ(56,"div",24),t._UZ(57,"i",25),t.qZA()(),t.TgZ(58,"p",26),t._uU(59),t.qZA(),t.TgZ(60,"p",13),t._uU(61,"Modules de formation"),t.qZA()(),t.TgZ(62,"div",7)(63,"div",8)(64,"h3",9),t._uU(65,"Quizs"),t.qZA(),t.TgZ(66,"div",27),t._UZ(67,"i",28),t.qZA()(),t.TgZ(68,"p",29),t._uU(69),t.qZA(),t.TgZ(70,"p",13),t._uU(71,"Quizs cr\xe9\xe9s"),t.qZA()(),t.TgZ(72,"div",7)(73,"div",8)(74,"h3",9),t._uU(75,"Tentatives"),t.qZA(),t.TgZ(76,"div",30),t._UZ(77,"i",31),t.qZA()(),t.TgZ(78,"p",32),t._uU(79),t.qZA(),t.TgZ(80,"p",13),t._uU(81,"Tentatives de quiz"),t.qZA()()(),t.TgZ(82,"div",33)(83,"div",34)(84,"h3",35),t._uU(85,"Formations par cat\xe9gorie"),t.qZA(),t.YNc(86,q,4,0,"div",36),t.YNc(87,F,3,0,"div",37),t.qZA(),t.TgZ(88,"div",34)(89,"h3",35),t._uU(90,"Tentatives de quiz par mois"),t.qZA(),t.YNc(91,w,4,0,"div",36),t.YNc(92,U,3,0,"div",37),t.qZA(),t.TgZ(93,"div",34)(94,"h3",35),t._uU(95,"Distribution des \xe9valuations"),t.qZA(),t.YNc(96,D,4,0,"div",36),t.YNc(97,k,3,0,"div",37),t.qZA(),t.TgZ(98,"div",34)(99,"h3",35),t._uU(100,"Formations les plus populaires"),t.qZA(),t.YNc(101,I,4,0,"div",36),t.YNc(102,M,3,0,"div",37),t.qZA()(),t.TgZ(103,"div",23)(104,"div",38)(105,"div",39)(106,"div",40),t._UZ(107,"i",41),t.qZA(),t.TgZ(108,"div")(109,"h3",42),t._uU(110,"Formations"),t.qZA(),t.TgZ(111,"p",43),t._uU(112,"G\xe9rez les formations et leur contenu"),t.qZA()()(),t.TgZ(113,"button",44),t.NdJ("click",function(){return o.navigateTo("/manager/formations")}),t._uU(114," Voir les formations "),t.qZA()(),t.TgZ(115,"div",38)(116,"div",39)(117,"div",45),t._UZ(118,"i",46),t.qZA(),t.TgZ(119,"div")(120,"h3",42),t._uU(121,"Certifications"),t.qZA(),t.TgZ(122,"p",43),t._uU(123,"Consultez les certifications d\xe9livr\xe9es"),t.qZA()()(),t.TgZ(124,"button",47),t.NdJ("click",function(){return o.navigateTo("/manager/certifications")}),t._uU(125," Voir les certifications "),t.qZA()(),t.TgZ(126,"div",38)(127,"div",39)(128,"div",48),t._UZ(129,"i",49),t.qZA(),t.TgZ(130,"div")(131,"h3",42),t._uU(132,"Sessions"),t.qZA(),t.TgZ(133,"p",43),t._uU(134,"G\xe9rez les sessions de formation"),t.qZA()()(),t.TgZ(135,"button",50),t.NdJ("click",function(){return o.navigateTo("/manager/sessions")}),t._uU(136," Voir les sessions "),t.qZA()()(),t.YNc(137,J,2,0,"div",51),t.YNc(138,O,7,0,"div",52),t.qZA()),2&e&&(t.xp6(18),t.Oqu(o.dashboardData&&o.dashboardData.totalUsers||0),t.xp6(10),t.Oqu(o.dashboardData&&o.dashboardData.totalFormations||0),t.xp6(10),t.Oqu(o.dashboardData&&o.dashboardData.totalSessions||0),t.xp6(10),t.Oqu(o.dashboardData&&o.dashboardData.totalCertifications||0),t.xp6(11),t.Oqu(o.dashboardData&&o.dashboardData.totalModules||0),t.xp6(10),t.Oqu(o.dashboardData&&o.dashboardData.totalQuizzes||0),t.xp6(10),t.Oqu(o.dashboardData&&o.dashboardData.totalQuizAttempts||0),t.xp6(7),t.Q6J("ngIf",!o.dashboardData||!o.dashboardData.formationsByCategory||0===o.dashboardData.formationsByCategory.length),t.xp6(1),t.Q6J("ngIf",o.dashboardData&&o.dashboardData.formationsByCategory&&o.dashboardData.formationsByCategory.length>0),t.xp6(4),t.Q6J("ngIf",!o.dashboardData||!o.dashboardData.quizAttemptsOverTime||0===o.dashboardData.quizAttemptsOverTime.length),t.xp6(1),t.Q6J("ngIf",o.dashboardData&&o.dashboardData.quizAttemptsOverTime&&o.dashboardData.quizAttemptsOverTime.length>0),t.xp6(4),t.Q6J("ngIf",!o.dashboardData||!o.dashboardData.feedbackRatings||0===o.dashboardData.feedbackRatings.length),t.xp6(1),t.Q6J("ngIf",o.dashboardData&&o.dashboardData.feedbackRatings&&o.dashboardData.feedbackRatings.length>0),t.xp6(4),t.Q6J("ngIf",!o.dashboardData||!o.dashboardData.topFormations||0===o.dashboardData.topFormations.length),t.xp6(1),t.Q6J("ngIf",o.dashboardData&&o.dashboardData.topFormations&&o.dashboardData.topFormations.length>0),t.xp6(35),t.Q6J("ngIf",o.loading),t.xp6(1),t.Q6J("ngIf",o.error))},dependencies:[n.O5]}),i})();var u=c(5412),s=c(7798),l=c(5061),h=c(5952),x=c(7334),m=c(433);function N(i,a){1&i&&t._UZ(0,"i",8)}function E(i,a){1&i&&(t.O4$(),t.TgZ(0,"svg",9),t._UZ(1,"circle",10)(2,"path",11),t.qZA())}function S(i,a){if(1&i&&(t.TgZ(0,"option",27),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e)}}function Y(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",28)(1,"app-training-card",29),t.NdJ("edit",function(r){t.CHM(e);const g=t.oxw(2);return t.KtG(g.handleDeleteTraining(r))})("delete",function(r){t.CHM(e);const g=t.oxw(2);return t.KtG(g.handleDeleteTraining(r))})("addSession",function(r){t.CHM(e);const g=t.oxw(2);return t.KtG(g.handleAddSession(r))}),t.qZA()()}if(2&i){const e=a.$implicit;t.xp6(1),t.Q6J("training",e)}}function L(i,a){1&i&&(t.TgZ(0,"div",30)(1,"p",31),t._uU(2,"Aucune formation ne correspond \xe0 votre recherche."),t.qZA()())}function z(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",12)(1,"div",13)(2,"div",14)(3,"div",15),t.O4$(),t.TgZ(4,"svg",16),t._UZ(5,"path",17),t.qZA()(),t.kcU(),t.TgZ(6,"input",18),t.NdJ("ngModelChange",function(r){t.CHM(e);const g=t.oxw();return t.KtG(g.searchTerm=r)})("input",function(r){t.CHM(e);const g=t.oxw();return t.KtG(g.onSearch(r))}),t.qZA()(),t.TgZ(7,"div",19)(8,"div",15),t.O4$(),t.TgZ(9,"svg",16),t._UZ(10,"path",20),t.qZA()(),t.kcU(),t.TgZ(11,"select",21),t.NdJ("ngModelChange",function(r){t.CHM(e);const g=t.oxw();return t.KtG(g.filterCategory=r)})("change",function(r){t.CHM(e);const g=t.oxw();return t.KtG(g.onFilterCategory(r))}),t.TgZ(12,"option",22),t._uU(13,"Toutes les cat\xe9gories"),t.qZA(),t.YNc(14,S,2,2,"option",23),t.qZA()()(),t.TgZ(15,"div",24),t.YNc(16,Y,2,1,"div",25),t.qZA(),t.YNc(17,L,3,0,"div",26),t.qZA()}if(2&i){const e=t.oxw();t.xp6(6),t.Q6J("ngModel",e.searchTerm),t.xp6(5),t.Q6J("ngModel",e.filterCategory),t.xp6(3),t.Q6J("ngForOf",e.categories),t.xp6(2),t.Q6J("ngForOf",e.filteredTrainings),t.xp6(1),t.Q6J("ngIf",0===e.filteredTrainings.length&&!e.isLoading)}}let H=(()=>{class i{constructor(){this.categories=s.y,this.trainings=[],this.searchTerm="",this.isFormOpen=!1,this.currentTraining=null,this.filterCategory="",this.isLoading=!1,this.formationService=(0,t.f3M)(l.B),this.dialog=(0,t.f3M)(u.uw)}handleDeleteTraining(e){throw new Error("Method not implemented.")}ngOnInit(){this.fetchFormations()}handleAddSession(e){this.dialog.open(h.U,{data:{formationId:e}}).afterClosed().subscribe(r=>{r&&this.fetchFormations()})}onSearch(e){this.searchTerm=e.target.value}get filteredTrainings(){return this.trainings.filter(e=>e.title.toLowerCase().includes(this.searchTerm.toLowerCase())&&(""===this.filterCategory||e.category===this.filterCategory))}onFilterCategory(e){this.filterCategory=e.target.value}fetchFormations(){this.isLoading=!0,this.formationService.getFormations().subscribe(e=>{this.trainings=e,this.isLoading=!1},e=>{this.isLoading=!1,console.error("Erreur lors de la r\xe9cup\xe9ration des formations",e)})}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-formation"]],decls:10,vars:5,consts:[[1,"animate-fade-in","container","mx-auto","p-6"],[1,"flex","justify-between","items-center","mb-8"],[1,"text-3xl","font-bold","text-gray-800"],[1,"flex","gap-3"],[1,"px-4","py-2","bg-gray-100","text-gray-700","rounded-lg","shadow-sm","text-sm","font-medium","hover:bg-gray-200","transition-colors","flex","items-center","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled","click"],["class","fa-solid fa-rotate-right mr-2",4,"ngIf"],["class","animate-spin h-4 w-4 mr-2","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",4,"ngIf"],["class","space-y-6",4,"ngIf"],[1,"fa-solid","fa-rotate-right","mr-2"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","h-4","w-4","mr-2"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],[1,"space-y-6"],[1,"flex","flex-col","md:flex-row","space-y-3","md:space-y-0","md:space-x-4"],[1,"relative","flex-grow"],[1,"absolute","inset-y-0","left-0","pl-3","flex","items-center","pointer-events-none"],["fill","currentColor","viewBox","0 0 20 20",1,"w-5","h-5","text-gray-400"],["fill-rule","evenodd","d","M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z","clip-rule","evenodd"],["type","text","placeholder","Rechercher une formation...",1,"pl-10","w-full","p-3","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-primary","focus:border-transparent",3,"ngModel","ngModelChange","input"],[1,"relative"],["fill-rule","evenodd","d","M3 3a1 1 0 011-1h12a1 1 0 011 1v3a1 1 0 01-.293.707L12 11.414V15a1 1 0 01-1 1h-2a1 1 0 01-1-1v-3.586L3.293 6.707A1 1 0 013 6V3z","clip-rule","evenodd"],[1,"h-full","w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","appearance-none","bg-gray-50","text-gray-900","pr-10",3,"ngModel","ngModelChange","change"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-6"],["class","col-span-1",4,"ngFor","ngForOf"],["class","text-center py-10",4,"ngIf"],[3,"value"],[1,"col-span-1"],[3,"training","edit","delete","addSession"],[1,"text-center","py-10"],[1,"text-gray-500","text-lg"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h1",2),t._uU(3,"Gestion des formations"),t.qZA(),t.TgZ(4,"div",3)(5,"button",4),t.NdJ("click",function(){return o.fetchFormations()}),t.YNc(6,N,1,0,"i",5),t.YNc(7,E,3,0,"svg",6),t._uU(8),t.qZA()()(),t.YNc(9,z,18,5,"div",7),t.qZA()),2&e&&(t.xp6(5),t.Q6J("disabled",o.isLoading),t.xp6(1),t.Q6J("ngIf",!o.isLoading),t.xp6(1),t.Q6J("ngIf",o.isLoading),t.xp6(1),t.hij(" ",o.isLoading?"Actualisation...":"Actualiser"," "),t.xp6(1),t.Q6J("ngIf",!o.isFormOpen))},dependencies:[n.sg,n.O5,x.Q,m.YN,m.Kr,m.Fj,m.EJ,m.JJ,m.On]}),i})();var P=c(4344);function j(i,a){1&i&&t._UZ(0,"i",13)}function B(i,a){1&i&&(t.O4$(),t.TgZ(0,"svg",14),t._UZ(1,"circle",15)(2,"path",16),t.qZA())}function $(i,a){1&i&&(t.TgZ(0,"span",22),t._uU(1,"\u2713"),t.qZA())}function R(i,a){1&i&&(t.TgZ(0,"span",22),t._uU(1,"\u27f3"),t.qZA())}function G(i,a){1&i&&(t.TgZ(0,"span",22),t._uU(1,"\u23f0"),t.qZA())}const K=function(i,a,e){return{"text-green-500":i,"text-yellow-500":a,"text-gray-500":e}};function W(i,a){if(1&i&&(t.TgZ(0,"tr",17)(1,"td",18),t._uU(2),t.qZA(),t.TgZ(3,"td",19),t._uU(4),t.qZA(),t.TgZ(5,"td",19),t._uU(6),t.qZA(),t.TgZ(7,"td",19),t._uU(8),t.qZA(),t.TgZ(9,"td",19),t._uU(10),t.qZA(),t.TgZ(11,"td",19)(12,"span",20),t.YNc(13,$,2,0,"span",21),t.YNc(14,R,2,0,"span",21),t.YNc(15,G,2,0,"span",21),t._uU(16),t.qZA()()()),2&i){const e=a.$implicit,o=t.oxw();t.xp6(2),t.Oqu(e.id),t.xp6(2),t.Oqu(e.title),t.xp6(2),t.Oqu(e.formation.title),t.xp6(2),t.Oqu(o.formatDate(e.startDate)),t.xp6(2),t.Oqu(o.formatDate(e.endDate)),t.xp6(2),t.Q6J("ngClass",t.kEZ(10,K,"Termin\xe9e"===e.status,"En cours"===e.status,"Pas encore"===e.status)),t.xp6(1),t.Q6J("ngIf","Termin\xe9e"===e.status),t.xp6(1),t.Q6J("ngIf","En cours"===e.status),t.xp6(1),t.Q6J("ngIf","Pas encore"===e.status),t.xp6(1),t.hij(" ",e.status," ")}}let V=(()=>{class i{constructor(e,o,r){this.fb=e,this.sessionService=o,this.dialog=r,this._sessions=[],this.isLoading=!1}ngOnInit(){this.loadSessions()}get sessions(){return this._sessions.sort((e,o)=>e.startDate.getTime()-o.startDate.getTime())}loadSessions(){this.isLoading=!0,this.sessionService.getAll().subscribe({next:e=>{this._sessions=e,this.isLoading=!1},error:e=>{console.error("Error loading sessions:",e),this.isLoading=!1}})}reloadSessions(){this.loadSessions()}formatDate(e){return new Intl.DateTimeFormat("fr",{day:"numeric",month:"short",year:"numeric"}).format(e)}openCreateSessionDialog(){this.dialog.open(h.U,{width:"500px",data:{}}).afterClosed().subscribe(o=>{o&&this.sessions.push(o)})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(m.qu),t.Y36(P.Z),t.Y36(u.uw))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-session"]],decls:29,vars:5,consts:[[1,"animate-fade-in","container","mx-auto","p-6"],[1,"mb-8","flex","justify-between","items-center"],[1,"text-3xl","font-bold","text-gray-800","!mb-0"],[1,"flex","gap-3"],[1,"px-4","py-2","bg-gray-100","text-gray-700","rounded-lg","shadow-sm","text-sm","font-medium","hover:bg-gray-200","transition-colors","flex","items-center","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled","click"],["class","fa-solid fa-rotate-right mr-2",4,"ngIf"],["class","animate-spin h-4 w-4 mr-2","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",4,"ngIf"],[1,"px-4","py-2","bg-primary","text-white","rounded-lg","shadow-sm","text-sm","font-medium","hover:bg-primary/90","transition-colors",3,"click"],[1,"rounded-lg","border","shadow-md"],[1,"w-full"],[1,"bg-gray-100"],[1,"py-4","px-6","text-left","text-sm","font-medium","text-gray-700"],["class","border-t",4,"ngFor","ngForOf"],[1,"fa-solid","fa-rotate-right","mr-2"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","h-4","w-4","mr-2"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],[1,"border-t"],[1,"py-4","px-6","font-medium"],[1,"py-4","px-6"],[1,"flex","items-center",3,"ngClass"],["class","mr-2",4,"ngIf"],[1,"mr-2"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h1",2),t._uU(3,"Sessions de formation"),t.qZA(),t.TgZ(4,"div",3)(5,"button",4),t.NdJ("click",function(){return o.reloadSessions()}),t.YNc(6,j,1,0,"i",5),t.YNc(7,B,3,0,"svg",6),t._uU(8),t.qZA(),t.TgZ(9,"button",7),t.NdJ("click",function(){return o.openCreateSessionDialog()}),t._uU(10," Ajouter une session "),t.qZA()()(),t.TgZ(11,"div",8)(12,"table",9)(13,"thead")(14,"tr",10)(15,"th",11),t._uU(16,"ID"),t.qZA(),t.TgZ(17,"th",11),t._uU(18,"Nom de la session"),t.qZA(),t.TgZ(19,"th",11),t._uU(20,"Formation"),t.qZA(),t.TgZ(21,"th",11),t._uU(22,"Date de d\xe9but"),t.qZA(),t.TgZ(23,"th",11),t._uU(24,"Date de fin"),t.qZA(),t.TgZ(25,"th",11),t._uU(26,"Statut"),t.qZA()()(),t.TgZ(27,"tbody"),t.YNc(28,W,17,14,"tr",12),t.qZA()()()()),2&e&&(t.xp6(5),t.Q6J("disabled",o.isLoading),t.xp6(1),t.Q6J("ngIf",!o.isLoading),t.xp6(1),t.Q6J("ngIf",o.isLoading),t.xp6(1),t.hij(" ",o.isLoading?"Actualisation...":"Actualiser"," "),t.xp6(20),t.Q6J("ngForOf",o.sessions))},dependencies:[n.mk,n.sg,n.O5],styles:[".animate-fade-in[_ngcontent-%COMP%]{animation:fadeIn .5s ease-in}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}.primary[_ngcontent-%COMP%]{background-color:#4a90e2}.primary-dark[_ngcontent-%COMP%]{background-color:#357abd}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:1rem 1.5rem}th[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(243 244 246 / var(--tw-bg-opacity, 1));text-align:left;font-size:.875rem;font-weight:500;--tw-text-opacity: 1;color:rgb(55 65 81 / var(--tw-text-opacity, 1))}tr[_ngcontent-%COMP%]{border-top-width:1px}td[_ngcontent-%COMP%]{font-size:.875rem;--tw-text-opacity: 1;color:rgb(17 24 39 / var(--tw-text-opacity, 1))}"]}),i})();var X=c(6920),tt=c(7480),et=c(3310),it=c(8690);function ot(i,a){1&i&&(t.TgZ(0,"div",8),t._UZ(1,"div",9),t.qZA())}function nt(i,a){if(1&i&&(t.TgZ(0,"div",10)(1,"div",11)(2,"strong",12),t._uU(3,"Erreur!"),t.qZA(),t.TgZ(4,"span",13),t._uU(5),t.qZA()()()),2&i){const e=t.oxw();t.xp6(5),t.Oqu(e.error)}}function at(i,a){if(1&i&&(t.TgZ(0,"div",29)(1,"label",30),t._uU(2,"Quiz final"),t.qZA(),t.TgZ(3,"div",31)(4,"div",32),t._UZ(5,"i",33),t.TgZ(6,"span",34),t._uU(7),t.qZA()()()()),2&i){const e=t.oxw(3);t.xp6(7),t.Oqu(e.getQuizTitle(e.formation.finalQuizId))}}function rt(i,a){if(1&i&&(t.TgZ(0,"div")(1,"h2",22),t._uU(2,"Informations de base"),t.qZA(),t.TgZ(3,"div",23)(4,"div")(5,"label",24),t._uU(6,"Titre"),t.qZA(),t.TgZ(7,"div",25),t._uU(8),t.qZA()(),t.TgZ(9,"div")(10,"label",24),t._uU(11,"Description"),t.qZA(),t.TgZ(12,"div",26),t._uU(13),t.qZA()(),t.TgZ(14,"div")(15,"label",24),t._uU(16,"Contenu"),t.qZA(),t.TgZ(17,"div",27),t._uU(18),t.qZA()(),t.YNc(19,at,8,1,"div",28),t.qZA()()),2&i){const e=t.oxw(2);t.xp6(8),t.hij(" ",e.formation.title," "),t.xp6(5),t.hij(" ",e.formation.description," "),t.xp6(5),t.hij(" ",e.formation.content," "),t.xp6(1),t.Q6J("ngIf",e.formation.finalQuizId)}}const st=function(i,a,e){return{"bg-green-100 text-green-800":i,"bg-yellow-100 text-yellow-800":a,"bg-gray-100 text-gray-800":e}};function dt(i,a){if(1&i&&(t.TgZ(0,"tr")(1,"td",43)(2,"div",44),t._uU(3),t.qZA()(),t.TgZ(4,"td",43)(5,"div",45),t._uU(6),t.ALo(7,"date"),t.qZA()(),t.TgZ(8,"td",43)(9,"div",45),t._uU(10),t.ALo(11,"date"),t.qZA()(),t.TgZ(12,"td",43)(13,"span",46),t._uU(14),t.qZA()()()),2&i){const e=a.$implicit,o=t.oxw(3);t.xp6(3),t.Oqu(e.title),t.xp6(3),t.Oqu(t.lcZ(7,5,e.startDate)),t.xp6(4),t.Oqu(t.lcZ(11,7,e.endDate)),t.xp6(3),t.Q6J("ngClass",t.kEZ(9,st,"En cours"===o.getStatus(e),"Pas encore"===o.getStatus(e),"Termin\xe9e"===o.getStatus(e))),t.xp6(1),t.hij(" ",o.getStatus(e)," ")}}function lt(i,a){1&i&&(t.TgZ(0,"tr")(1,"td",47),t._uU(2," Aucune session disponible "),t.qZA()())}function ct(i,a){if(1&i&&(t.TgZ(0,"div")(1,"div",35)(2,"h2",36),t._uU(3,"Sessions"),t.qZA()(),t.TgZ(4,"div",37)(5,"table",38)(6,"thead",39)(7,"tr")(8,"th",40),t._uU(9," Titre"),t.qZA(),t.TgZ(10,"th",40),t._uU(11," Date de d\xe9but"),t.qZA(),t.TgZ(12,"th",40),t._uU(13," Date de fin"),t.qZA(),t.TgZ(14,"th",40),t._uU(15," Statut"),t.qZA()()(),t.TgZ(16,"tbody",41),t.YNc(17,dt,15,13,"tr",42),t.YNc(18,lt,3,0,"tr",20),t.qZA()()()()),2&i){const e=t.oxw(2);t.xp6(17),t.Q6J("ngForOf",e.formation.sessions),t.xp6(1),t.Q6J("ngIf",0===e.formation.sessions.length)}}function gt(i,a){if(1&i&&(t.TgZ(0,"div",45),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.hij("",e.description," ")}}function ut(i,a){if(1&i&&(t.TgZ(0,"div",51)(1,"div",55),t._uU(2),t.qZA(),t.YNc(3,gt,2,1,"div",56),t.qZA()),2&i){const e=a.$implicit;t.xp6(2),t.Oqu(e.name),t.xp6(1),t.Q6J("ngIf",e.description)}}function pt(i,a){1&i&&(t.TgZ(0,"div",57),t._uU(1," Aucun groupe associ\xe9 \xe0 cette formation "),t.qZA())}function mt(i,a){if(1&i&&(t.TgZ(0,"div",48)(1,"div",49)(2,"h3",50),t._uU(3,"Cat\xe9gorie"),t.qZA(),t.TgZ(4,"div",51),t._uU(5),t.qZA()(),t.TgZ(6,"div")(7,"h3",50),t._uU(8,"Groupes cibles"),t.qZA(),t.TgZ(9,"div",52),t.YNc(10,ut,4,2,"div",53),t.YNc(11,pt,2,0,"div",54),t.qZA()()()),2&i){const e=t.oxw(2);t.xp6(5),t.hij(" ",e.formation.category," "),t.xp6(5),t.Q6J("ngForOf",e.formation.groups),t.xp6(1),t.Q6J("ngIf",0===e.formation.groups.length)}}function ft(i,a){if(1&i&&(t.TgZ(0,"div",69),t._UZ(1,"i",70),t.TgZ(2,"span",34),t._uU(3),t.qZA()()),2&i){const e=t.oxw().$implicit,o=t.oxw(3);t.xp6(3),t.Oqu(o.getQuizTitle(e.quizId))}}function _t(i,a){if(1&i&&(t.TgZ(0,"a",75),t._UZ(1,"img",76),t.TgZ(2,"span",77),t._uU(3),t.qZA()()),2&i){const e=a.$implicit,o=t.oxw(5);t.Q6J("href",e.lien,t.LSH),t.xp6(1),t.Q6J("src",o.getFileIcon(e.type),t.LSH),t.xp6(2),t.Oqu(o.getFileName(e.lien)||"Fichier "+e.type)}}function ht(i,a){if(1&i&&(t.TgZ(0,"div",71)(1,"h4",72),t._uU(2,"Pi\xe8ces jointes"),t.qZA(),t.TgZ(3,"div",73),t.YNc(4,_t,4,3,"a",74),t.qZA()()),2&i){const e=t.oxw().$implicit;t.xp6(4),t.Q6J("ngForOf",e.attachments)}}function vt(i,a){1&i&&(t.TgZ(0,"div",78),t._uU(1," Aucune pi\xe8ce jointe pour ce module "),t.qZA())}function xt(i,a){if(1&i&&(t.TgZ(0,"div",61)(1,"div",62)(2,"div",63)(3,"h3",64),t._uU(4),t.qZA(),t.TgZ(5,"p",65),t._uU(6),t.qZA(),t.YNc(7,ft,4,1,"div",66),t.YNc(8,ht,5,1,"div",67),t.YNc(9,vt,2,0,"div",68),t.qZA(),t.TgZ(10,"div",45),t._uU(11),t.qZA()()()),2&i){const e=a.$implicit;t.xp6(4),t.Oqu(e.title),t.xp6(2),t.Oqu(e.description),t.xp6(1),t.Q6J("ngIf",e.quizId),t.xp6(1),t.Q6J("ngIf",e.attachments&&e.attachments.length>0),t.xp6(1),t.Q6J("ngIf",!e.attachments||0===e.attachments.length),t.xp6(2),t.hij(" Position: ",e.position," ")}}function bt(i,a){1&i&&(t.TgZ(0,"div",79),t._uU(1," Aucun module disponible pour cette formation "),t.qZA())}function Zt(i,a){if(1&i&&(t.TgZ(0,"div")(1,"div",35)(2,"h2",36),t._uU(3,"Modules"),t.qZA()(),t.TgZ(4,"div",58),t.YNc(5,xt,12,6,"div",59),t.YNc(6,bt,2,0,"div",60),t.qZA()()),2&i){const e=t.oxw(2);t.xp6(5),t.Q6J("ngForOf",e.formation.modules),t.xp6(1),t.Q6J("ngIf",0===e.formation.modules.length)}}function Tt(i,a){if(1&i&&t._UZ(0,"app-quiz-results",81),2&i){const e=t.oxw(3);t.Q6J("formationId",e.formation.id)}}function yt(i,a){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,Tt,1,1,"app-quiz-results",80),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.formation)}}function Ct(i,a){if(1&i&&t._UZ(0,"app-formation-feedbacks",83),2&i){const e=t.oxw(3);t.Q6J("formationId",e.formation.id)("canDelete",!1)}}function At(i,a){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,Ct,1,2,"app-formation-feedbacks",82),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.formation)}}const Z=function(i,a){return{"border-primary text-primary":i,"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300":a}};function qt(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",14)(1,"div",15)(2,"div",16)(3,"nav",17)(4,"button",18),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.setActiveTab("info"))}),t._uU(5," Informations de base "),t.qZA(),t.TgZ(6,"button",18),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.setActiveTab("sessions"))}),t._uU(7," Sessions "),t.qZA(),t.TgZ(8,"button",18),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.setActiveTab("groups"))}),t._uU(9," Groupes et Cat\xe9gorie "),t.qZA(),t.TgZ(10,"button",18),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.setActiveTab("modules"))}),t._uU(11," Modules "),t.qZA(),t.TgZ(12,"button",18),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.setActiveTab("results"))}),t._uU(13," R\xe9sultats de formation "),t.qZA(),t.TgZ(14,"button",18),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.setActiveTab("feedbacks"))}),t._uU(15," \xc9valuations "),t.qZA()()(),t.TgZ(16,"div",19),t.YNc(17,rt,20,4,"div",20),t.YNc(18,ct,19,2,"div",20),t.YNc(19,mt,12,3,"div",21),t.YNc(20,Zt,7,2,"div",20),t.YNc(21,yt,2,1,"div",20),t.YNc(22,At,2,1,"div",20),t.qZA()()()}if(2&i){const e=t.oxw();t.xp6(4),t.Q6J("ngClass",t.WLB(12,Z,"info"===e.activeTab,"info"!==e.activeTab)),t.xp6(2),t.Q6J("ngClass",t.WLB(15,Z,"sessions"===e.activeTab,"sessions"!==e.activeTab)),t.xp6(2),t.Q6J("ngClass",t.WLB(18,Z,"groups"===e.activeTab,"groups"!==e.activeTab)),t.xp6(2),t.Q6J("ngClass",t.WLB(21,Z,"modules"===e.activeTab,"modules"!==e.activeTab)),t.xp6(2),t.Q6J("ngClass",t.WLB(24,Z,"results"===e.activeTab,"results"!==e.activeTab)),t.xp6(2),t.Q6J("ngClass",t.WLB(27,Z,"feedbacks"===e.activeTab,"feedbacks"!==e.activeTab)),t.xp6(3),t.Q6J("ngIf","info"===e.activeTab),t.xp6(1),t.Q6J("ngIf","sessions"===e.activeTab),t.xp6(1),t.Q6J("ngIf","groups"===e.activeTab),t.xp6(1),t.Q6J("ngIf","modules"===e.activeTab),t.xp6(1),t.Q6J("ngIf","results"===e.activeTab),t.xp6(1),t.Q6J("ngIf","feedbacks"===e.activeTab)}}let Ft=(()=>{class i{constructor(e,o,r,g,y){this.formationService=e,this.quizService=o,this.attachmentService=r,this.route=g,this.router=y,this.formation=null,this.loading=!1,this.error=null,this.activeTab="info",this.quizzes=[],this.subscriptions=[]}ngOnInit(){const e=this.route.queryParams.subscribe(r=>{r.tab&&(this.activeTab=r.tab)});this.subscriptions.push(e);const o=Number(this.route.snapshot.paramMap.get("id"));this.loadFormation(o),this.loadQuizzes()}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}loadFormation(e){this.loading=!0,this.formationService.getFormation(e).subscribe({next:o=>{this.formation=o,this.loading=!1,console.log(this.formation.sessions.map(r=>r.status))},error:o=>{this.error=o,this.loading=!1}})}getFileIcon(e){return this.attachmentService.getFileIcon(e)}getFileIconColor(e){return this.attachmentService.getFileIconColor(e)}getFileName(e){return this.attachmentService.getFileName(e)}formatFileSize(e){return this.attachmentService.formatFileSize(e)}getStatus(e){const o=new Date;o.setHours(0,0,0,0);const r=new Date(e.startDate),g=new Date(e.endDate);return r.setHours(0,0,0,0),g.setHours(0,0,0,0),o<r?"Pas encore":o>g?"Termin\xe9e":"En cours"}setActiveTab(e){this.activeTab=e,this.updateUrlParams()}updateUrlParams(){this.router.navigate([],{relativeTo:this.route,queryParams:{tab:this.activeTab},queryParamsHandling:"merge",replaceUrl:!0})}loadQuizzes(){this.quizService.getQuizzes().subscribe({next:e=>{this.quizzes=e},error:e=>{console.error("Error loading quizzes:",e),this.error="Impossible de charger les quiz."}})}getQuizTitle(e){if(!e)return"Aucun quiz s\xe9lectionn\xe9";const o=this.quizzes.find(r=>r.id===e);return o?o.title:"Quiz inconnu"}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.B),t.Y36(X.v),t.Y36(tt.L),t.Y36(f.gz),t.Y36(f.F0))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-formation-detail"]],decls:10,vars:3,consts:[[1,"max-w-6xl","mx-auto"],[1,"mt-10"],[1,"px-8","py-4"],[1,"text-3xl","font-bold","text-gray-800"],[1,"mt-1","text-sm","text-gray-600"],["class","flex justify-center items-center py-20",4,"ngIf"],["class","p-4 max-w-4xl mx-auto",4,"ngIf"],["class","p-8",4,"ngIf"],[1,"flex","justify-center","items-center","py-20"],[1,"animate-spin","rounded-full","h-12","w-12","border-t-2","border-b-2","border-primary"],[1,"p-4","max-w-4xl","mx-auto"],["role","alert",1,"bg-red-100","border","border-red-400","text-red-700","px-4","py-3","rounded","relative"],[1,"font-bold"],[1,"block","sm:inline"],[1,"p-8"],[1,"bg-white","shadow-md","rounded-lg","overflow-hidden"],[1,"border-b","border-gray-200"],[1,"flex","-mb-px"],[1,"py-4","px-6","font-medium","text-sm","border-b-2","focus:outline-none",3,"ngClass","click"],[1,"p-6"],[4,"ngIf"],["class","space-y-8",4,"ngIf"],[1,"text-2xl","font-bold","mb-6"],[1,"grid","grid-cols-1","gap-6"],[1,"block","text-sm","font-medium","text-gray-700"],[1,"mt-1","p-2","bg-gray-50","rounded-md","border","border-gray-200"],[1,"mt-1","p-2","bg-gray-50","rounded-md","border","border-gray-200","min-h-[80px]"],[1,"mt-1","p-2","bg-gray-50","rounded-md","border","border-gray-200","min-h-[120px]"],["class","mt-6 p-4 bg-gray-50 rounded-lg",4,"ngIf"],[1,"mt-6","p-4","bg-gray-50","rounded-lg"],[1,"block","text-lg","font-medium","text-gray-700","mb-2"],[1,"flex","items-center","justify-between","bg-white","p-3","rounded","border","border-gray-200"],[1,"flex","items-center"],[1,"fas","fa-award","text-primary","mr-2"],[1,"text-sm","font-medium"],[1,"flex","justify-between","items-center","mb-6"],[1,"text-2xl","font-bold"],[1,"overflow-x-auto"],[1,"min-w-full","divide-y","divide-gray-200"],[1,"bg-gray-50"],["scope","col",1,"px-6","py-3","text-left","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"bg-white","divide-y","divide-gray-200"],[4,"ngFor","ngForOf"],[1,"px-6","py-4","whitespace-nowrap"],[1,"text-sm","font-medium","text-gray-900"],[1,"text-sm","text-gray-500"],[1,"px-2","inline-flex","text-xs","leading-5","font-semibold","rounded-full",3,"ngClass"],["colspan","4",1,"px-6","py-4","text-center","text-sm","text-gray-500"],[1,"space-y-8"],[1,"mb-8"],[1,"text-xl","font-bold","mb-4"],[1,"p-3","bg-gray-50","rounded-md","border","border-gray-200"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4"],["class","p-3 bg-gray-50 rounded-md border border-gray-200",4,"ngFor","ngForOf"],["class","col-span-3 text-center text-gray-500 p-4",4,"ngIf"],[1,"font-medium"],["class","text-sm text-gray-500",4,"ngIf"],[1,"col-span-3","text-center","text-gray-500","p-4"],[1,"space-y-6"],["class","bg-gray-50 p-4 rounded-lg border border-gray-200",4,"ngFor","ngForOf"],["class","text-center py-8 text-gray-500",4,"ngIf"],[1,"bg-gray-50","p-4","rounded-lg","border","border-gray-200"],[1,"flex","items-start","justify-between","mb-4"],[1,"flex-1"],[1,"text-lg","font-semibold"],[1,"text-gray-600","mt-1"],["class","mt-3 p-2 bg-white rounded border border-gray-200 inline-flex items-center",4,"ngIf"],["class","mt-4",4,"ngIf"],["class","mt-4 text-sm text-gray-500",4,"ngIf"],[1,"mt-3","p-2","bg-white","rounded","border","border-gray-200","inline-flex","items-center"],[1,"fas","fa-question-circle","text-primary","mr-2"],[1,"mt-4"],[1,"text-md","font-medium","mb-2"],[1,"grid","grid-cols-1","sm:grid-cols-2","gap-2"],["target","_blank","class","flex items-center p-2 bg-white rounded border border-gray-200 hover:border-primary",3,"href",4,"ngFor","ngForOf"],["target","_blank",1,"flex","items-center","p-2","bg-white","rounded","border","border-gray-200","hover:border-primary",3,"href"],["alt","File Icon",1,"w-6","h-6","mr-2",3,"src"],[1,"text-sm"],[1,"mt-4","text-sm","text-gray-500"],[1,"text-center","py-8","text-gray-500"],[3,"formationId",4,"ngIf"],[3,"formationId"],[3,"formationId","canDelete",4,"ngIf"],[3,"formationId","canDelete"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),t._uU(4,"D\xe9tails de la formation"),t.qZA(),t.TgZ(5,"p",4),t._uU(6,"Consultez les informations de la formation"),t.qZA()(),t.YNc(7,ot,2,0,"div",5),t.YNc(8,nt,6,1,"div",6),t.YNc(9,qt,23,30,"div",7),t.qZA()()),2&e&&(t.xp6(7),t.Q6J("ngIf",o.loading),t.xp6(1),t.Q6J("ngIf",o.error),t.xp6(1),t.Q6J("ngIf",o.formation&&!o.loading))},dependencies:[n.mk,n.sg,n.O5,et.L,it.e,n.uU],styles:[".nosession-group[_ngcontent-%COMP%]{position:relative;overflow:hidden}.nosession-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:absolute;top:50%;right:-100px;transform:translateY(-50%);transition:right .5s ease-in-out}.nosession-group[_ngcontent-%COMP%]:hover   button[_ngcontent-%COMP%]{right:10px}"]}),i})();var wt=c(1112);function Ut(i,a){1&i&&(t.TgZ(0,"div",7),t._UZ(1,"div",8),t.qZA())}function Dt(i,a){if(1&i&&(t.TgZ(0,"div",9)(1,"strong",10),t._uU(2,"Erreur!"),t.qZA(),t.TgZ(3,"span",11),t._uU(4),t.qZA()()),2&i){const e=t.oxw();t.xp6(4),t.Oqu(e.error)}}function kt(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",12)(1,"div",13)(2,"div",14)(3,"label",15),t._uU(4,"Rechercher"),t.qZA(),t.TgZ(5,"input",16),t.NdJ("ngModelChange",function(r){t.CHM(e);const g=t.oxw();return t.KtG(g.searchTerm=r)})("ngModelChange",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.applyFilters())}),t.qZA()(),t.TgZ(6,"div",17)(7,"input",18),t.NdJ("ngModelChange",function(r){t.CHM(e);const g=t.oxw();return t.KtG(g.showOnlyPassed=r)})("ngModelChange",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.applyFilters())}),t.qZA(),t.TgZ(8,"label",19),t._uU(9,"Afficher uniquement les r\xe9ussites"),t.qZA()()()()}if(2&i){const e=t.oxw();t.xp6(5),t.Q6J("ngModel",e.searchTerm),t.xp6(2),t.Q6J("ngModel",e.showOnlyPassed)}}function It(i,a){1&i&&(t.TgZ(0,"div",22)(1,"p",23),t._uU(2,"Aucune certification trouv\xe9e."),t.qZA()())}function Mt(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"tr",30)(1,"td",31)(2,"div",17)(3,"div")(4,"div",32),t._uU(5),t.qZA(),t.TgZ(6,"div",33),t._uU(7),t.qZA()()()(),t.TgZ(8,"td",31)(9,"div",34),t._uU(10),t.qZA()(),t.TgZ(11,"td",31)(12,"div",34),t._uU(13),t.qZA()(),t.TgZ(14,"td",31)(15,"div",34),t._uU(16),t.qZA()(),t.TgZ(17,"td",31)(18,"span",35),t._uU(19),t.qZA()(),t.TgZ(20,"td",31)(21,"span",35),t._uU(22),t.qZA()(),t.TgZ(23,"td",36)(24,"button",37),t.NdJ("click",function(){const g=t.CHM(e).$implicit,y=t.oxw(3);return t.KtG(y.viewCertification(g.id))}),t._uU(25," Voir "),t.qZA()()()}if(2&i){const e=a.$implicit,o=t.oxw(3);t.xp6(5),t.hij(" ",e.user.userName," "),t.xp6(2),t.hij(" ",e.user.email," "),t.xp6(3),t.Oqu(e.session.formation.title),t.xp6(3),t.Oqu(e.session.title),t.xp6(3),t.Oqu(o.formatDate(e.createdAt)),t.xp6(2),t.Q6J("ngClass",o.getScoreClass(e.score)),t.xp6(1),t.hij(" ",e.score.toFixed(1),"% "),t.xp6(2),t.Q6J("ngClass",e.score>=70?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),t.xp6(1),t.hij(" ",o.getPassStatus(e.score)," ")}}function Jt(i,a){if(1&i&&(t.TgZ(0,"div",24)(1,"table",25)(2,"thead",26)(3,"tr")(4,"th",27),t._uU(5," Utilisateur "),t.qZA(),t.TgZ(6,"th",27),t._uU(7," Formation "),t.qZA(),t.TgZ(8,"th",27),t._uU(9," Session "),t.qZA(),t.TgZ(10,"th",27),t._uU(11," Date "),t.qZA(),t.TgZ(12,"th",27),t._uU(13," Score "),t.qZA(),t.TgZ(14,"th",27),t._uU(15," Statut "),t.qZA(),t.TgZ(16,"th",27),t._uU(17," Actions "),t.qZA()()(),t.TgZ(18,"tbody",28),t.YNc(19,Mt,26,9,"tr",29),t.qZA()()()),2&i){const e=t.oxw(2);t.xp6(19),t.Q6J("ngForOf",e.filteredCertifications)}}function Ot(i,a){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,It,3,0,"div",20),t.YNc(2,Jt,20,1,"div",21),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",0===e.filteredCertifications.length),t.xp6(1),t.Q6J("ngIf",e.filteredCertifications.length>0)}}let Qt=(()=>{class i{constructor(e,o){this.certificationService=e,this.router=o,this.certifications=[],this.filteredCertifications=[],this.isLoading=!1,this.error=null,this.searchTerm="",this.showOnlyPassed=!1}ngOnInit(){this.loadCertifications()}loadCertifications(){this.isLoading=!0,this.error=null,this.certificationService.getCertifications().subscribe({next:e=>{this.certifications=e,this.applyFilters(),this.isLoading=!1},error:e=>{this.error="Erreur lors du chargement des certifications. Veuillez r\xe9essayer plus tard.",this.isLoading=!1,console.error("Erreur lors du chargement des certifications:",e)}})}applyFilters(){let e=[...this.certifications];if(this.showOnlyPassed&&(e=e.filter(o=>o.score>=70)),this.searchTerm){const o=this.searchTerm.toLowerCase();e=e.filter(r=>r.user.userName.toLowerCase().includes(o)||r.user.email.toLowerCase().includes(o)||r.session.title.toLowerCase().includes(o)||r.session.formation.title.toLowerCase().includes(o)||r.description.toLowerCase().includes(o))}this.filteredCertifications=e}getPassStatus(e){return e>=70?"R\xe9ussi":"\xc9chou\xe9"}getScoreClass(e){return e>=90?"text-green-700 bg-green-100":e>=70?"text-green-600 bg-green-50":e>=50?"text-yellow-600 bg-yellow-50":"text-red-600 bg-red-50"}formatDate(e){if(!e)return"";const o=new Date(e);return`${o.getDate().toString().padStart(2,"0")}/${(o.getMonth()+1).toString().padStart(2,"0")}/${o.getFullYear()}`}viewCertification(e){this.router.navigate(["/manager/certifications",e])}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(wt.n),t.Y36(f.F0))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-manager-certification-list"]],decls:8,vars:4,consts:[[1,"container","mx-auto","px-4","py-6"],[1,"flex","justify-between","items-center","mb-6"],[1,"text-2xl","font-bold","text-gray-800"],["class","flex justify-center items-center py-10",4,"ngIf"],["class","bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative","role","alert",4,"ngIf"],["class","bg-gray-50 p-4 rounded-lg mb-6",4,"ngIf"],[4,"ngIf"],[1,"flex","justify-center","items-center","py-10"],[1,"animate-spin","rounded-full","h-12","w-12","border-t-2","border-b-2","border-primary"],["role","alert",1,"bg-red-100","border","border-red-400","text-red-700","px-4","py-3","rounded","relative"],[1,"font-bold"],[1,"block","sm:inline"],[1,"bg-gray-50","p-4","rounded-lg","mb-6"],[1,"flex","flex-wrap","gap-4","items-center"],[1,"flex-1"],["for","search",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["type","text","id","search","placeholder","Rechercher par nom, email, formation...",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-primary","focus:border-primary",3,"ngModel","ngModelChange"],[1,"flex","items-center"],["type","checkbox","id","showPassed",1,"h-4","w-4","text-primary","focus:ring-primary","border-gray-300","rounded",3,"ngModel","ngModelChange"],["for","showPassed",1,"ml-2","block","text-sm","text-gray-900"],["class","bg-white rounded-lg shadow p-8 text-center",4,"ngIf"],["class","bg-white rounded-lg shadow overflow-hidden",4,"ngIf"],[1,"bg-white","rounded-lg","shadow","p-8","text-center"],[1,"text-gray-500"],[1,"bg-white","rounded-lg","shadow","overflow-hidden"],[1,"min-w-full","divide-y","divide-gray-200"],[1,"bg-gray-50"],["scope","col",1,"px-6","py-3","text-left","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"bg-white","divide-y","divide-gray-200"],["class","hover:bg-gray-50",4,"ngFor","ngForOf"],[1,"hover:bg-gray-50"],[1,"px-6","py-4","whitespace-nowrap"],[1,"text-sm","font-medium","text-gray-900"],[1,"text-sm","text-gray-500"],[1,"text-sm","text-gray-900"],[1,"px-2","py-1","inline-flex","text-xs","leading-5","font-semibold","rounded-full",3,"ngClass"],[1,"px-6","py-4","whitespace-nowrap","text-right","text-sm","font-medium"],[1,"text-primary","hover:text-primary-dark",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h1",2),t._uU(3,"Toutes les certifications"),t.qZA()(),t.YNc(4,Ut,2,0,"div",3),t.YNc(5,Dt,5,1,"div",4),t.YNc(6,kt,10,2,"div",5),t.YNc(7,Ot,3,2,"div",6),t.qZA()),2&e&&(t.xp6(4),t.Q6J("ngIf",o.isLoading),t.xp6(1),t.Q6J("ngIf",o.error),t.xp6(1),t.Q6J("ngIf",!o.isLoading&&!o.error),t.xp6(1),t.Q6J("ngIf",!o.isLoading&&!o.error))},dependencies:[n.mk,n.sg,n.O5,m.Fj,m.Wl,m.JJ,m.On]}),i})();var Nt=c(885),Et=c(7814);const St=[{path:"",component:d},{path:"formations",component:H},{path:"formations/:id",component:Ft},{path:"sessions",component:V},{path:"certifications",component:Qt},{path:"certifications/:id",component:Nt.L},{path:"settings",component:Et.f}];let Yt=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[f.Bz.forChild(St),f.Bz]}),i})();var Lt=c(6191);let zt=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[n.ez,Yt,Lt.m,m.u5]}),i})()},8690:(Q,b,c)=>{c.d(b,{e:()=>O});var n=c(1571),f=c(3039),_=c(6895);function t(d,u){1&d&&(n.TgZ(0,"div",6),n._UZ(1,"div",7),n.qZA())}function v(d,u){if(1&d&&(n.TgZ(0,"div",8)(1,"strong",9),n._uU(2,"Erreur!"),n.qZA(),n.TgZ(3,"span",10),n._uU(4),n.qZA()()),2&d){const s=n.oxw();n.xp6(4),n.Oqu(s.error)}}function T(d,u){1&d&&n._UZ(0,"i",23)}function p(d,u){1&d&&n._UZ(0,"i",24)}function C(d,u){1&d&&n._UZ(0,"i",25)}function A(d,u){if(1&d&&(n.ynx(0),n.YNc(1,T,1,0,"i",20),n.YNc(2,p,1,0,"i",21),n.YNc(3,C,1,0,"i",22),n.BQk()),2&d){const s=u.$implicit;n.xp6(1),n.Q6J("ngIf",2===s),n.xp6(1),n.Q6J("ngIf",1===s),n.xp6(1),n.Q6J("ngIf",0===s)}}function q(d,u){if(1&d&&(n.TgZ(0,"div",11)(1,"div",12)(2,"h2",13),n._uU(3,"R\xe9sum\xe9 des \xe9valuations"),n.qZA(),n.TgZ(4,"div",14)(5,"div",15),n.YNc(6,A,4,3,"ng-container",16),n.qZA(),n.TgZ(7,"span",17),n._uU(8),n.qZA()()(),n.TgZ(9,"div",18)(10,"p"),n._uU(11,"Nombre total d'\xe9valuations: "),n.TgZ(12,"span",19),n._uU(13),n.qZA()()()()),2&d){const s=n.oxw();n.xp6(6),n.Q6J("ngForOf",s.getStarsArray(s.getAverageRating())),n.xp6(2),n.hij("",(5*s.getAverageRating()).toFixed(1),"/5"),n.xp6(5),n.Oqu(s.feedbacks.length)}}function F(d,u){1&d&&(n.TgZ(0,"div",26)(1,"div",27),n._UZ(2,"i",28),n.TgZ(3,"h2",29),n._uU(4,"Aucun feedback"),n.qZA(),n.TgZ(5,"p",30),n._uU(6,"Cette formation n'a pas encore re\xe7u d'\xe9valuations."),n.qZA()()())}function w(d,u){1&d&&n._UZ(0,"i",46)}function U(d,u){1&d&&n._UZ(0,"i",47)}function D(d,u){1&d&&n._UZ(0,"i",48)}function k(d,u){if(1&d&&(n.ynx(0),n.YNc(1,w,1,0,"i",43),n.YNc(2,U,1,0,"i",44),n.YNc(3,D,1,0,"i",45),n.BQk()),2&d){const s=u.$implicit;n.xp6(1),n.Q6J("ngIf",2===s),n.xp6(1),n.Q6J("ngIf",1===s),n.xp6(1),n.Q6J("ngIf",0===s)}}function I(d,u){if(1&d){const s=n.EpF();n.TgZ(0,"button",49),n.NdJ("click",function(){n.CHM(s);const h=n.oxw().$implicit,x=n.oxw(2);return n.KtG(x.deleteFeedback(h.id))}),n._UZ(1,"i",50),n.qZA()}}function M(d,u){if(1&d&&(n.TgZ(0,"div",34)(1,"div",35)(2,"div")(3,"div",36)(4,"div",15),n.YNc(5,k,4,3,"ng-container",16),n.qZA(),n.TgZ(6,"span",37),n._uU(7),n.qZA()(),n.TgZ(8,"div",14),n._UZ(9,"i",38),n.TgZ(10,"span",39),n._uU(11),n.qZA(),n.TgZ(12,"span",40),n._uU(13),n.qZA()()(),n.TgZ(14,"div",14)(15,"span",41),n._uU(16),n.qZA(),n.YNc(17,I,2,0,"button",42),n.qZA()(),n.TgZ(18,"p",18),n._uU(19),n.qZA()()),2&d){const s=u.$implicit,l=n.oxw(2);n.xp6(5),n.Q6J("ngForOf",l.getStarsArray(s.value)),n.xp6(2),n.hij("",(5*s.value).toFixed(1),"/5"),n.xp6(4),n.Oqu(s.user.userName),n.xp6(2),n.hij("(",s.user.email,")"),n.xp6(3),n.Oqu(l.formatDate(s.createdAt)),n.xp6(1),n.Q6J("ngIf",l.canDelete),n.xp6(2),n.Oqu(s.description)}}function J(d,u){if(1&d&&(n.TgZ(0,"div",31)(1,"h2",32),n._uU(2,"Tous les feedbacks"),n.qZA(),n.YNc(3,M,20,7,"div",33),n.qZA()),2&d){const s=n.oxw();n.xp6(3),n.Q6J("ngForOf",s.feedbacks)}}let O=(()=>{class d{constructor(s){this.feedbackService=s,this.canDelete=!1,this.feedbacks=[],this.loading=!1,this.error=null}ngOnInit(){this.loadFeedbacks()}loadFeedbacks(){this.formationId?(this.loading=!0,this.feedbackService.getFeedbacksByFormation(this.formationId).subscribe({next:s=>{this.feedbacks=s,this.loading=!1},error:s=>{this.error=s.message||"Erreur lors du chargement des feedbacks",this.loading=!1}})):this.error="ID de formation non sp\xe9cifi\xe9"}getStarsArray(s){const l=[],h=5*s;for(let x=0;x<5;x++)x<Math.floor(h)?l.push(2):x<Math.floor(h+.5)?l.push(1):l.push(0);return l}getAverageRating(){return 0===this.feedbacks.length?0:this.feedbacks.reduce((l,h)=>l+h.value,0)/this.feedbacks.length}deleteFeedback(s){confirm("\xcates-vous s\xfbr de vouloir supprimer ce feedback ?")&&this.feedbackService.deleteFeedback(s).subscribe({next:()=>{this.feedbacks=this.feedbacks.filter(l=>l.id!==s)},error:l=>{this.error=l.message||"Erreur lors de la suppression du feedback"}})}formatDate(s){if(!s)return"";const l=new Date(s);return`${l.getDate().toString().padStart(2,"0")}/${(l.getMonth()+1).toString().padStart(2,"0")}/${l.getFullYear()}`}}return d.\u0275fac=function(s){return new(s||d)(n.Y36(f.T))},d.\u0275cmp=n.Xpm({type:d,selectors:[["app-formation-feedbacks"]],inputs:{formationId:"formationId",canDelete:"canDelete"},decls:6,vars:5,consts:[[1,"space-y-6"],["class","flex justify-center items-center py-10",4,"ngIf"],["class","bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative","role","alert",4,"ngIf"],["class","bg-white rounded-lg shadow p-6",4,"ngIf"],["class","bg-white rounded-lg shadow p-8 text-center",4,"ngIf"],["class","space-y-4",4,"ngIf"],[1,"flex","justify-center","items-center","py-10"],[1,"animate-spin","rounded-full","h-12","w-12","border-t-2","border-b-2","border-primary"],["role","alert",1,"bg-red-100","border","border-red-400","text-red-700","px-4","py-3","rounded","relative"],[1,"font-bold"],[1,"block","sm:inline"],[1,"bg-white","rounded-lg","shadow","p-6"],[1,"flex","items-center","justify-between","mb-4"],[1,"text-xl","font-semibold","text-gray-800"],[1,"flex","items-center"],[1,"flex"],[4,"ngFor","ngForOf"],[1,"ml-2","text-lg","font-medium"],[1,"text-gray-600"],[1,"font-medium"],["class","fas fa-star text-yellow-400 text-xl mr-1",4,"ngIf"],["class","fas fa-star-half-alt text-yellow-400 text-xl mr-1",4,"ngIf"],["class","far fa-star text-yellow-400 text-xl mr-1",4,"ngIf"],[1,"fas","fa-star","text-yellow-400","text-xl","mr-1"],[1,"fas","fa-star-half-alt","text-yellow-400","text-xl","mr-1"],[1,"far","fa-star","text-yellow-400","text-xl","mr-1"],[1,"bg-white","rounded-lg","shadow","p-8","text-center"],[1,"flex","flex-col","items-center"],[1,"fas","fa-comment-slash","text-gray-400","mb-4","text-5xl"],[1,"text-xl","font-semibold","text-gray-700","mb-2"],[1,"text-gray-500"],[1,"space-y-4"],[1,"text-xl","font-semibold","text-gray-800","mb-4"],["class","bg-white rounded-lg shadow p-5 transition-all hover:shadow-lg",4,"ngFor","ngForOf"],[1,"bg-white","rounded-lg","shadow","p-5","transition-all","hover:shadow-lg"],[1,"flex","justify-between","items-start","mb-3"],[1,"flex","items-center","mb-2"],[1,"ml-2","text-sm","text-gray-500"],[1,"fas","fa-user-circle","text-gray-400","mr-2"],[1,"font-medium","text-gray-700"],[1,"text-xs","text-gray-500","ml-2"],[1,"text-sm","text-gray-500"],["class","ml-3 text-red-500 hover:text-red-700",3,"click",4,"ngIf"],["class","fas fa-star text-yellow-400 mr-1",4,"ngIf"],["class","fas fa-star-half-alt text-yellow-400 mr-1",4,"ngIf"],["class","far fa-star text-yellow-400 mr-1",4,"ngIf"],[1,"fas","fa-star","text-yellow-400","mr-1"],[1,"fas","fa-star-half-alt","text-yellow-400","mr-1"],[1,"far","fa-star","text-yellow-400","mr-1"],[1,"ml-3","text-red-500","hover:text-red-700",3,"click"],[1,"fas","fa-trash-alt"]],template:function(s,l){1&s&&(n.TgZ(0,"div",0),n.YNc(1,t,2,0,"div",1),n.YNc(2,v,5,1,"div",2),n.YNc(3,q,14,3,"div",3),n.YNc(4,F,7,0,"div",4),n.YNc(5,J,4,1,"div",5),n.qZA()),2&s&&(n.xp6(1),n.Q6J("ngIf",l.loading),n.xp6(1),n.Q6J("ngIf",l.error),n.xp6(1),n.Q6J("ngIf",!l.loading&&!l.error&&l.feedbacks.length>0),n.xp6(1),n.Q6J("ngIf",!l.loading&&!l.error&&0===l.feedbacks.length),n.xp6(1),n.Q6J("ngIf",!l.loading&&!l.error&&l.feedbacks.length>0))},dependencies:[_.sg,_.O5]}),d})()}}]);